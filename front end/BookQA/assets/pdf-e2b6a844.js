import{g as getAugmentedNamespace,a as getDefaultExportFromCjs,c as commonjsGlobal}from"./_commonjsHelpers-23102255.js";function _mergeNamespaces(Q,r){for(var y=0;y<r.length;y++){const t=r[y];if(typeof t!="string"&&!Array.isArray(t)){for(const A in t)if(A!=="default"&&!(A in Q)){const w=Object.getOwnPropertyDescriptor(t,A);w&&Object.defineProperty(Q,A,w.get?w:{enumerable:!0,get:()=>t[A]})}}}return Object.freeze(Object.defineProperty(Q,Symbol.toStringTag,{value:"Module"}))}function commonjsRequire(Q){throw new Error('Could not dynamically require "'+Q+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$2={exports:{}};const __viteBrowserExternal=new Proxy({},{get(Q,r){throw new Error(`Module "" has been externalized for browser compatibility. Cannot access ".${r}" in client code.  See http://vitejs.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(r,y){module.exports=y()})(commonjsGlobal,function(){return function(Q){var r={};function y(t){if(r[t])return r[t].exports;var A=r[t]={i:t,l:!1,exports:{}};return Q[t].call(A.exports,A,A.exports,y),A.l=!0,A.exports}return y.m=Q,y.c=r,y.d=function(t,A,w){y.o(t,A)||Object.defineProperty(t,A,{enumerable:!0,get:w})},y.r=function(t){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},y.t=function(t,A){if(A&1&&(t=y(t)),A&8||A&4&&typeof t=="object"&&t&&t.__esModule)return t;var w=Object.create(null);if(y.r(w),Object.defineProperty(w,"default",{enumerable:!0,value:t}),A&2&&typeof t!="string")for(var D in t)y.d(w,D,(function(R){return t[R]}).bind(null,D));return w},y.n=function(t){var A=t&&t.__esModule?function(){return t.default}:function(){return t};return y.d(A,"a",A),A},y.o=function(t,A){return Object.prototype.hasOwnProperty.call(t,A)},y.p="",y(y.s=0)}([function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"addLinkAttributes",{enumerable:!0,get:function(){return t.addLinkAttributes}}),Object.defineProperty(r,"getFilenameFromUrl",{enumerable:!0,get:function(){return t.getFilenameFromUrl}}),Object.defineProperty(r,"LinkTarget",{enumerable:!0,get:function(){return t.LinkTarget}}),Object.defineProperty(r,"loadScript",{enumerable:!0,get:function(){return t.loadScript}}),Object.defineProperty(r,"PDFDateString",{enumerable:!0,get:function(){return t.PDFDateString}}),Object.defineProperty(r,"RenderingCancelledException",{enumerable:!0,get:function(){return t.RenderingCancelledException}}),Object.defineProperty(r,"build",{enumerable:!0,get:function(){return A.build}}),Object.defineProperty(r,"getDocument",{enumerable:!0,get:function(){return A.getDocument}}),Object.defineProperty(r,"LoopbackPort",{enumerable:!0,get:function(){return A.LoopbackPort}}),Object.defineProperty(r,"PDFDataRangeTransport",{enumerable:!0,get:function(){return A.PDFDataRangeTransport}}),Object.defineProperty(r,"PDFWorker",{enumerable:!0,get:function(){return A.PDFWorker}}),Object.defineProperty(r,"version",{enumerable:!0,get:function(){return A.version}}),Object.defineProperty(r,"CMapCompressionType",{enumerable:!0,get:function(){return w.CMapCompressionType}}),Object.defineProperty(r,"createObjectURL",{enumerable:!0,get:function(){return w.createObjectURL}}),Object.defineProperty(r,"createPromiseCapability",{enumerable:!0,get:function(){return w.createPromiseCapability}}),Object.defineProperty(r,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return w.createValidAbsoluteUrl}}),Object.defineProperty(r,"InvalidPDFException",{enumerable:!0,get:function(){return w.InvalidPDFException}}),Object.defineProperty(r,"MissingPDFException",{enumerable:!0,get:function(){return w.MissingPDFException}}),Object.defineProperty(r,"OPS",{enumerable:!0,get:function(){return w.OPS}}),Object.defineProperty(r,"PasswordResponses",{enumerable:!0,get:function(){return w.PasswordResponses}}),Object.defineProperty(r,"PermissionFlag",{enumerable:!0,get:function(){return w.PermissionFlag}}),Object.defineProperty(r,"removeNullCharacters",{enumerable:!0,get:function(){return w.removeNullCharacters}}),Object.defineProperty(r,"shadow",{enumerable:!0,get:function(){return w.shadow}}),Object.defineProperty(r,"UnexpectedResponseException",{enumerable:!0,get:function(){return w.UnexpectedResponseException}}),Object.defineProperty(r,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return w.UNSUPPORTED_FEATURES}}),Object.defineProperty(r,"Util",{enumerable:!0,get:function(){return w.Util}}),Object.defineProperty(r,"VerbosityLevel",{enumerable:!0,get:function(){return w.VerbosityLevel}}),Object.defineProperty(r,"AnnotationLayer",{enumerable:!0,get:function(){return D.AnnotationLayer}}),Object.defineProperty(r,"apiCompatibilityParams",{enumerable:!0,get:function(){return R.apiCompatibilityParams}}),Object.defineProperty(r,"GlobalWorkerOptions",{enumerable:!0,get:function(){return b.GlobalWorkerOptions}}),Object.defineProperty(r,"renderTextLayer",{enumerable:!0,get:function(){return T.renderTextLayer}}),Object.defineProperty(r,"SVGGraphics",{enumerable:!0,get:function(){return h.SVGGraphics}});var t=y(1),A=y(5),w=y(2),D=y(19),R=y(9),b=y(12),T=y(20),h=y(21);{const{isNodeJS:C}=y(4);if(C){const I=y(22).PDFNodeStream;(0,A.setPDFNetworkStreamFactory)(a=>new I(a))}else{const I=y(25).PDFNetworkStream;let a;(0,t.isFetchSupported)()&&(a=y(26).PDFFetchStream),(0,A.setPDFNetworkStreamFactory)(g=>a&&(0,t.isValidFetchUrl)(g.url)?new a(g):new I(g))}}},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.addLinkAttributes=g,r.getFilenameFromUrl=m,r.isFetchSupported=S,r.isValidFetchUrl=x,r.loadScript=k,r.deprecated=d,r.PDFDateString=r.StatTimer=r.DOMSVGFactory=r.DOMCMapReaderFactory=r.BaseCMapReaderFactory=r.DOMCanvasFactory=r.BaseCanvasFactory=r.DEFAULT_LINK_REL=r.LinkTarget=r.RenderingCancelledException=r.PageViewport=void 0;var t=y(2);const A="noopener noreferrer nofollow";r.DEFAULT_LINK_REL=A;const w="http://www.w3.org/2000/svg";class D{constructor(){this.constructor===D&&(0,t.unreachable)("Cannot initialize BaseCanvasFactory.")}create(c,l){(0,t.unreachable)("Abstract method `create` called.")}reset(c,l,v){if(!c.canvas)throw new Error("Canvas is not specified");if(l<=0||v<=0)throw new Error("Invalid canvas size");c.canvas.width=l,c.canvas.height=v}destroy(c){if(!c.canvas)throw new Error("Canvas is not specified");c.canvas.width=0,c.canvas.height=0,c.canvas=null,c.context=null}}r.BaseCanvasFactory=D;class R extends D{constructor({ownerDocument:c=globalThis.document}={}){super(),this._document=c}create(c,l){if(c<=0||l<=0)throw new Error("Invalid canvas size");const v=this._document.createElement("canvas"),P=v.getContext("2d");return v.width=c,v.height=l,{canvas:v,context:P}}}r.DOMCanvasFactory=R;class b{constructor({baseUrl:c=null,isCompressed:l=!1}){this.constructor===b&&(0,t.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=c,this.isCompressed=l}async fetch({name:c}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!c)throw new Error("CMap name must be specified.");const l=this.baseUrl+c+(this.isCompressed?".bcmap":""),v=this.isCompressed?t.CMapCompressionType.BINARY:t.CMapCompressionType.NONE;return this._fetchData(l,v).catch(P=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${l}`)})}_fetchData(c,l){(0,t.unreachable)("Abstract method `_fetchData` called.")}}r.BaseCMapReaderFactory=b;class T extends b{_fetchData(c,l){return S()&&x(c,document.baseURI)?fetch(c).then(async v=>{if(!v.ok)throw new Error(v.statusText);let P;return this.isCompressed?P=new Uint8Array(await v.arrayBuffer()):P=(0,t.stringToBytes)(await v.text()),{cMapData:P,compressionType:l}}):new Promise((v,P)=>{const N=new XMLHttpRequest;N.open("GET",c,!0),this.isCompressed&&(N.responseType="arraybuffer"),N.onreadystatechange=()=>{if(N.readyState===XMLHttpRequest.DONE){if(N.status===200||N.status===0){let M;if(this.isCompressed&&N.response?M=new Uint8Array(N.response):!this.isCompressed&&N.responseText&&(M=(0,t.stringToBytes)(N.responseText)),M){v({cMapData:M,compressionType:l});return}}P(new Error(N.statusText))}},N.send(null)})}}r.DOMCMapReaderFactory=T;class h{create(c,l){(0,t.assert)(c>0&&l>0,"Invalid SVG dimensions");const v=document.createElementNS(w,"svg:svg");return v.setAttribute("version","1.1"),v.setAttribute("width",c+"px"),v.setAttribute("height",l+"px"),v.setAttribute("preserveAspectRatio","none"),v.setAttribute("viewBox","0 0 "+c+" "+l),v}createElement(c){return(0,t.assert)(typeof c=="string","Invalid SVG element type"),document.createElementNS(w,c)}}r.DOMSVGFactory=h;class C{constructor({viewBox:c,scale:l,rotation:v,offsetX:P=0,offsetY:N=0,dontFlip:M=!1}){this.viewBox=c,this.scale=l,this.rotation=v,this.offsetX=P,this.offsetY=N;const O=(c[2]+c[0])/2,X=(c[3]+c[1])/2;let W,L,e,n;switch(v=v%360,v=v<0?v+360:v,v){case 180:W=-1,L=0,e=0,n=1;break;case 90:W=0,L=1,e=1,n=0;break;case 270:W=0,L=-1,e=-1,n=0;break;case 0:W=1,L=0,e=0,n=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}M&&(e=-e,n=-n);let s,u,p,_;W===0?(s=Math.abs(X-c[1])*l+P,u=Math.abs(O-c[0])*l+N,p=Math.abs(c[3]-c[1])*l,_=Math.abs(c[2]-c[0])*l):(s=Math.abs(O-c[0])*l+P,u=Math.abs(X-c[1])*l+N,p=Math.abs(c[2]-c[0])*l,_=Math.abs(c[3]-c[1])*l),this.transform=[W*l,L*l,e*l,n*l,s-W*l*O-e*l*X,u-L*l*O-n*l*X],this.width=p,this.height=_}clone({scale:c=this.scale,rotation:l=this.rotation,offsetX:v=this.offsetX,offsetY:P=this.offsetY,dontFlip:N=!1}={}){return new C({viewBox:this.viewBox.slice(),scale:c,rotation:l,offsetX:v,offsetY:P,dontFlip:N})}convertToViewportPoint(c,l){return t.Util.applyTransform([c,l],this.transform)}convertToViewportRectangle(c){const l=t.Util.applyTransform([c[0],c[1]],this.transform),v=t.Util.applyTransform([c[2],c[3]],this.transform);return[l[0],l[1],v[0],v[1]]}convertToPdfPoint(c,l){return t.Util.applyInverseTransform([c,l],this.transform)}}r.PageViewport=C;class I extends t.BaseException{constructor(c,l){super(c),this.type=l}}r.RenderingCancelledException=I;const a={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};r.LinkTarget=a;function g(f,{url:c,target:l,rel:v,enabled:P=!0}={}){(0,t.assert)(c&&typeof c=="string",'addLinkAttributes: A valid "url" parameter must provided.');const N=(0,t.removeNullCharacters)(c);P?f.href=f.title=N:(f.href="",f.title=`Disabled: ${N}`,f.onclick=()=>!1);let M="";switch(l){case a.NONE:break;case a.SELF:M="_self";break;case a.BLANK:M="_blank";break;case a.PARENT:M="_parent";break;case a.TOP:M="_top";break}f.target=M,f.rel=typeof v=="string"?v:A}function m(f){const c=f.indexOf("#"),l=f.indexOf("?"),v=Math.min(c>0?c:f.length,l>0?l:f.length);return f.substring(f.lastIndexOf("/",v)+1,v)}class E{constructor(){this.started=Object.create(null),this.times=[]}time(c){c in this.started&&(0,t.warn)(`Timer is already running for ${c}`),this.started[c]=Date.now()}timeEnd(c){c in this.started||(0,t.warn)(`Timer has not been started for ${c}`),this.times.push({name:c,start:this.started[c],end:Date.now()}),delete this.started[c]}toString(){const c=[];let l=0;for(const v of this.times){const P=v.name;P.length>l&&(l=P.length)}for(const v of this.times){const P=v.end-v.start;c.push(`${v.name.padEnd(l)} ${P}ms
`)}return c.join("")}}r.StatTimer=E;function S(){return typeof fetch<"u"&&typeof Response<"u"&&"body"in Response.prototype&&typeof ReadableStream<"u"}function x(f,c){try{const{protocol:l}=c?new URL(f,c):new URL(f);return l==="http:"||l==="https:"}catch{return!1}}function k(f){return new Promise((c,l)=>{const v=document.createElement("script");v.src=f,v.onload=c,v.onerror=function(){l(new Error(`Cannot load script at: ${v.src}`))},(document.head||document.documentElement).appendChild(v)})}function d(f){console.log("Deprecated API usage: "+f)}let i;class o{static toDateObject(c){if(!c||!(0,t.isString)(c))return null;i||(i=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const l=i.exec(c);if(!l)return null;const v=parseInt(l[1],10);let P=parseInt(l[2],10);P=P>=1&&P<=12?P-1:0;let N=parseInt(l[3],10);N=N>=1&&N<=31?N:1;let M=parseInt(l[4],10);M=M>=0&&M<=23?M:0;let O=parseInt(l[5],10);O=O>=0&&O<=59?O:0;let X=parseInt(l[6],10);X=X>=0&&X<=59?X:0;const W=l[7]||"Z";let L=parseInt(l[8],10);L=L>=0&&L<=23?L:0;let e=parseInt(l[9],10)||0;return e=e>=0&&e<=59?e:0,W==="-"?(M+=L,O+=e):W==="+"&&(M-=L,O-=e),new Date(Date.UTC(v,P,N,M,O,X))}}r.PDFDateString=o},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.arrayByteLength=$,r.arraysToBytes=K,r.assert=M,r.bytesToString=V,r.createPromiseCapability=ue,r.escapeString=oe,r.getModificationDate=pe,r.getVerbosityLevel=l,r.info=v,r.isArrayBuffer=be,r.isArrayEqual=ve,r.isBool=de,r.isNum=_e,r.isString=Ae,r.isSameOrigin=O,r.createValidAbsoluteUrl=W,r.removeNullCharacters=z,r.setVerbosityLevel=c,r.shadow=L,r.string32=Y,r.stringToBytes=H,r.stringToPDFString=ne,r.stringToUTF8String=Ce,r.utf8StringToString=fe,r.warn=P,r.unreachable=N,r.IsEvalSupportedCached=r.IsLittleEndianCached=r.createObjectURL=r.FormatError=r.Util=r.UnknownErrorException=r.UnexpectedResponseException=r.TextRenderingMode=r.StreamType=r.PermissionFlag=r.PasswordResponses=r.PasswordException=r.MissingPDFException=r.InvalidPDFException=r.AbortException=r.CMapCompressionType=r.ImageKind=r.FontType=r.AnnotationType=r.AnnotationStateModelType=r.AnnotationReviewState=r.AnnotationReplyType=r.AnnotationMarkedState=r.AnnotationFlag=r.AnnotationFieldFlag=r.AnnotationBorderStyleType=r.UNSUPPORTED_FEATURES=r.VerbosityLevel=r.OPS=r.IDENTITY_MATRIX=r.FONT_IDENTITY_MATRIX=r.BaseException=void 0,y(3);const t=[1,0,0,1,0,0];r.IDENTITY_MATRIX=t;const A=[.001,0,0,.001,0,0];r.FONT_IDENTITY_MATRIX=A;const w={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};r.PermissionFlag=w;const D={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};r.TextRenderingMode=D;const R={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};r.ImageKind=R;const b={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};r.AnnotationType=b;const T={MARKED:"Marked",REVIEW:"Review"};r.AnnotationStateModelType=T;const h={MARKED:"Marked",UNMARKED:"Unmarked"};r.AnnotationMarkedState=h;const C={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"};r.AnnotationReviewState=C;const I={GROUP:"Group",REPLY:"R"};r.AnnotationReplyType=I;const a={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};r.AnnotationFlag=a;const g={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};r.AnnotationFieldFlag=g;const m={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};r.AnnotationBorderStyleType=m;const E={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"};r.StreamType=E;const S={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};r.FontType=S;const x={ERRORS:0,WARNINGS:1,INFOS:5};r.VerbosityLevel=x;const k={NONE:0,BINARY:1,STREAM:2};r.CMapCompressionType=k;const d={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};r.OPS=d;const i={unknown:"unknown",forms:"forms",javaScript:"javaScript",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent"};r.UNSUPPORTED_FEATURES=i;const o={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};r.PasswordResponses=o;let f=x.WARNINGS;function c(B){Number.isInteger(B)&&(f=B)}function l(){return f}function v(B){f>=x.INFOS&&console.log(`Info: ${B}`)}function P(B){f>=x.WARNINGS&&console.log(`Warning: ${B}`)}function N(B){throw new Error(B)}function M(B,j){B||N(j)}function O(B,j){let q;try{if(q=new URL(B),!q.origin||q.origin==="null")return!1}catch{return!1}const J=new URL(j,q);return q.origin===J.origin}function X(B){if(!B)return!1;switch(B.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function W(B,j){if(!B)return null;try{const q=j?new URL(B,j):new URL(B);if(X(q))return q}catch{}return null}function L(B,j,q){return Object.defineProperty(B,j,{value:q,enumerable:!0,configurable:!0,writable:!1}),q}const e=function(){function j(q){this.constructor===j&&N("Cannot initialize BaseException."),this.message=q,this.name=this.constructor.name}return j.prototype=new Error,j.constructor=j,j}();r.BaseException=e;class n extends e{constructor(j,q){super(j),this.code=q}}r.PasswordException=n;class s extends e{constructor(j,q){super(j),this.details=q}}r.UnknownErrorException=s;class u extends e{}r.InvalidPDFException=u;class p extends e{}r.MissingPDFException=p;class _ extends e{constructor(j,q){super(j),this.status=q}}r.UnexpectedResponseException=_;class F extends e{}r.FormatError=F;class U extends e{}r.AbortException=U;const G=/\x00/g;function z(B){return typeof B!="string"?(P("The argument for removeNullCharacters must be a string."),B):B.replace(G,"")}function V(B){M(B!==null&&typeof B=="object"&&B.length!==void 0,"Invalid argument for bytesToString");const j=B.length,q=8192;if(j<q)return String.fromCharCode.apply(null,B);const J=[];for(let re=0;re<j;re+=q){const le=Math.min(re+q,j),ce=B.subarray(re,le);J.push(String.fromCharCode.apply(null,ce))}return J.join("")}function H(B){M(typeof B=="string","Invalid argument for stringToBytes");const j=B.length,q=new Uint8Array(j);for(let J=0;J<j;++J)q[J]=B.charCodeAt(J)&255;return q}function $(B){return B.length!==void 0?B.length:(M(B.byteLength!==void 0,"arrayByteLength - invalid argument."),B.byteLength)}function K(B){const j=B.length;if(j===1&&B[0]instanceof Uint8Array)return B[0];let q=0;for(let le=0;le<j;le++)q+=$(B[le]);let J=0;const re=new Uint8Array(q);for(let le=0;le<j;le++){let ce=B[le];ce instanceof Uint8Array||(typeof ce=="string"?ce=H(ce):ce=new Uint8Array(ce));const ge=ce.byteLength;re.set(ce,J),J+=ge}return re}function Y(B){return String.fromCharCode(B>>24&255,B>>16&255,B>>8&255,B&255)}function Z(){const B=new Uint8Array(4);return B[0]=1,new Uint32Array(B.buffer,0,1)[0]===1}const ee={get value(){return L(this,"value",Z())}};r.IsLittleEndianCached=ee;function te(){try{return new Function(""),!0}catch{return!1}}const se={get value(){return L(this,"value",te())}};r.IsEvalSupportedCached=se;const ae=["rgb(",0,",",0,",",0,")"];class he{static makeCssRgb(j,q,J){return ae[1]=j,ae[3]=q,ae[5]=J,ae.join("")}static transform(j,q){return[j[0]*q[0]+j[2]*q[1],j[1]*q[0]+j[3]*q[1],j[0]*q[2]+j[2]*q[3],j[1]*q[2]+j[3]*q[3],j[0]*q[4]+j[2]*q[5]+j[4],j[1]*q[4]+j[3]*q[5]+j[5]]}static applyTransform(j,q){const J=j[0]*q[0]+j[1]*q[2]+q[4],re=j[0]*q[1]+j[1]*q[3]+q[5];return[J,re]}static applyInverseTransform(j,q){const J=q[0]*q[3]-q[1]*q[2],re=(j[0]*q[3]-j[1]*q[2]+q[2]*q[5]-q[4]*q[3])/J,le=(-j[0]*q[1]+j[1]*q[0]+q[4]*q[1]-q[5]*q[0])/J;return[re,le]}static getAxialAlignedBoundingBox(j,q){const J=he.applyTransform(j,q),re=he.applyTransform(j.slice(2,4),q),le=he.applyTransform([j[0],j[3]],q),ce=he.applyTransform([j[2],j[1]],q);return[Math.min(J[0],re[0],le[0],ce[0]),Math.min(J[1],re[1],le[1],ce[1]),Math.max(J[0],re[0],le[0],ce[0]),Math.max(J[1],re[1],le[1],ce[1])]}static inverseTransform(j){const q=j[0]*j[3]-j[1]*j[2];return[j[3]/q,-j[1]/q,-j[2]/q,j[0]/q,(j[2]*j[5]-j[4]*j[3])/q,(j[4]*j[1]-j[5]*j[0])/q]}static apply3dTransform(j,q){return[j[0]*q[0]+j[1]*q[1]+j[2]*q[2],j[3]*q[0]+j[4]*q[1]+j[5]*q[2],j[6]*q[0]+j[7]*q[1]+j[8]*q[2]]}static singularValueDecompose2dScale(j){const q=[j[0],j[2],j[1],j[3]],J=j[0]*q[0]+j[1]*q[2],re=j[0]*q[1]+j[1]*q[3],le=j[2]*q[0]+j[3]*q[2],ce=j[2]*q[1]+j[3]*q[3],ge=(J+ce)/2,ye=Math.sqrt((J+ce)*(J+ce)-4*(J*ce-le*re))/2,Se=ge+ye||1,Te=ge-ye||1;return[Math.sqrt(Se),Math.sqrt(Te)]}static normalizeRect(j){const q=j.slice(0);return j[0]>j[2]&&(q[0]=j[2],q[2]=j[0]),j[1]>j[3]&&(q[1]=j[3],q[3]=j[1]),q}static intersect(j,q){function J(ge,ye){return ge-ye}const re=[j[0],j[2],q[0],q[2]].sort(J),le=[j[1],j[3],q[1],q[3]].sort(J),ce=[];if(j=he.normalizeRect(j),q=he.normalizeRect(q),re[0]===j[0]&&re[1]===q[0]||re[0]===q[0]&&re[1]===j[0])ce[0]=re[1],ce[2]=re[2];else return null;if(le[0]===j[1]&&le[1]===q[1]||le[0]===q[1]&&le[1]===j[1])ce[1]=le[1],ce[3]=le[2];else return null;return ce}}r.Util=he;const me=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function ne(B){const j=B.length,q=[];if(B[0]==="þ"&&B[1]==="ÿ")for(let J=2;J<j;J+=2)q.push(String.fromCharCode(B.charCodeAt(J)<<8|B.charCodeAt(J+1)));else if(B[0]==="ÿ"&&B[1]==="þ")for(let J=2;J<j;J+=2)q.push(String.fromCharCode(B.charCodeAt(J+1)<<8|B.charCodeAt(J)));else for(let J=0;J<j;++J){const re=me[B.charCodeAt(J)];q.push(re?String.fromCharCode(re):B.charAt(J))}return q.join("")}function oe(B){return B.replace(/([\(\)\\])/g,"\\$1")}function Ce(B){return decodeURIComponent(escape(B))}function fe(B){return unescape(encodeURIComponent(B))}function de(B){return typeof B=="boolean"}function _e(B){return typeof B=="number"}function Ae(B){return typeof B=="string"}function be(B){return typeof B=="object"&&B!==null&&B.byteLength!==void 0}function ve(B,j){return B.length!==j.length?!1:B.every(function(q,J){return q===j[J]})}function pe(B=new Date(Date.now())){return[B.getUTCFullYear().toString(),(B.getUTCMonth()+1).toString().padStart(2,"0"),(B.getUTCDate()+1).toString().padStart(2,"0"),B.getUTCHours().toString().padStart(2,"0"),B.getUTCMinutes().toString().padStart(2,"0"),B.getUTCSeconds().toString().padStart(2,"0")].join("")}function ue(){const B=Object.create(null);let j=!1;return Object.defineProperty(B,"settled",{get(){return j}}),B.promise=new Promise(function(q,J){B.resolve=function(re){j=!0,q(re)},B.reject=function(re){j=!0,J(re)}}),B}const ie=function(){const j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";return function(J,re,le=!1){if(!le&&URL.createObjectURL){const ge=new Blob([J],{type:re});return URL.createObjectURL(ge)}let ce=`data:${re};base64,`;for(let ge=0,ye=J.length;ge<ye;ge+=3){const Se=J[ge]&255,Te=J[ge+1]&255,xe=J[ge+2]&255,Pe=Se>>2,Ee=(Se&3)<<4|Te>>4,Re=ge+1<ye?(Te&15)<<2|xe>>6:64,ke=ge+2<ye?xe&63:64;ce+=j[Pe]+j[Ee]+j[Re]+j[ke]}return ce}}();r.createObjectURL=ie},function(Q,r,y){y(4)},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.isNodeJS=void 0;const t=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");r.isNodeJS=t},function(module,exports,__w_pdfjs_require__){Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.build=exports.version=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFWorker=exports.PDFDataRangeTransport=exports.LoopbackPort=void 0;var _util=__w_pdfjs_require__(2),_display_utils=__w_pdfjs_require__(1),_font_loader=__w_pdfjs_require__(6),_node_utils=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_api_compatibility=__w_pdfjs_require__(9),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(12),_is_node=__w_pdfjs_require__(4),_message_handler=__w_pdfjs_require__(13),_metadata=__w_pdfjs_require__(14),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_webgl=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DefaultCanvasFactory=_is_node.isNodeJS?_node_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory,DefaultCMapReaderFactory=_is_node.isNodeJS?_node_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;let createPDFNetworkStream;function setPDFNetworkStreamFactory(Q){createPDFNetworkStream=Q}function getDocument(Q){const r=new PDFDocumentLoadingTask;let y;if(typeof Q=="string")y={url:Q};else if((0,_util.isArrayBuffer)(Q))y={data:Q};else if(Q instanceof PDFDataRangeTransport)y={range:Q};else{if(typeof Q!="object")throw new Error("Invalid parameter in getDocument, need either Uint8Array, string or a parameter object");if(!Q.url&&!Q.data&&!Q.range)throw new Error("Invalid parameter object: need either .data, .range or .url");y=Q}const t=Object.create(null);let A=null,w=null;for(const R in y){if(R==="url"&&typeof window<"u"){t[R]=new URL(y[R],window.location).href;continue}else if(R==="range"){A=y[R];continue}else if(R==="worker"){w=y[R];continue}else if(R==="data"&&!(y[R]instanceof Uint8Array)){const b=y[R];if(typeof b=="string")t[R]=(0,_util.stringToBytes)(b);else if(typeof b=="object"&&b!==null&&!isNaN(b.length))t[R]=new Uint8Array(b);else if((0,_util.isArrayBuffer)(b))t[R]=new Uint8Array(b);else throw new Error("Invalid PDF binary data: either typed array, string or array-like object is expected in the data property.");continue}t[R]=y[R]}if(t.rangeChunkSize=t.rangeChunkSize||DEFAULT_RANGE_CHUNK_SIZE,t.CMapReaderFactory=t.CMapReaderFactory||DefaultCMapReaderFactory,t.ignoreErrors=t.stopAtErrors!==!0,t.fontExtraProperties=t.fontExtraProperties===!0,t.pdfBug=t.pdfBug===!0,Number.isInteger(t.maxImageSize)||(t.maxImageSize=-1),typeof t.isEvalSupported!="boolean"&&(t.isEvalSupported=!0),typeof t.disableFontFace!="boolean"&&(t.disableFontFace=_api_compatibility.apiCompatibilityParams.disableFontFace||!1),typeof t.ownerDocument>"u"&&(t.ownerDocument=globalThis.document),typeof t.disableRange!="boolean"&&(t.disableRange=!1),typeof t.disableStream!="boolean"&&(t.disableStream=!1),typeof t.disableAutoFetch!="boolean"&&(t.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(t.verbosity),!w){const R={verbosity:t.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};w=R.port?PDFWorker.fromPort(R):new PDFWorker(R),r._worker=w}const D=r.docId;return w.promise.then(function(){if(r.destroyed)throw new Error("Loading aborted");const R=_fetchDocument(w,t,A,D),b=new Promise(function(T){let h;A?h=new _transport_stream.PDFDataTransportStream({length:t.length,initialData:t.initialData,progressiveDone:t.progressiveDone,disableRange:t.disableRange,disableStream:t.disableStream},A):t.data||(h=createPDFNetworkStream({url:t.url,length:t.length,httpHeaders:t.httpHeaders,withCredentials:t.withCredentials,rangeChunkSize:t.rangeChunkSize,disableRange:t.disableRange,disableStream:t.disableStream})),T(h)});return Promise.all([R,b]).then(function([T,h]){if(r.destroyed)throw new Error("Loading aborted");const C=new _message_handler.MessageHandler(D,T,w.port);C.postMessageTransfers=w.postMessageTransfers;const I=new WorkerTransport(C,r,h,t);r._transport=I,C.send("Ready",null)})}).catch(r._capability.reject),r}function _fetchDocument(Q,r,y,t){return Q.destroyed?Promise.reject(new Error("Worker was destroyed")):(y&&(r.length=y.length,r.initialData=y.initialData,r.progressiveDone=y.progressiveDone),Q.messageHandler.sendWithPromise("GetDocRequest",{docId:t,apiVersion:"2.6.347",source:{data:r.data,url:r.url,password:r.password,disableAutoFetch:r.disableAutoFetch,rangeChunkSize:r.rangeChunkSize,length:r.length},maxImageSize:r.maxImageSize,disableFontFace:r.disableFontFace,postMessageTransfers:Q.postMessageTransfers,docBaseUrl:r.docBaseUrl,ignoreErrors:r.ignoreErrors,isEvalSupported:r.isEvalSupported,fontExtraProperties:r.fontExtraProperties}).then(function(A){if(Q.destroyed)throw new Error("Worker was destroyed");return A}))}const PDFDocumentLoadingTask=function(){let r=0;class y{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+r++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){return this.destroyed=!0,(this._transport?this._transport.destroy():Promise.resolve()).then(()=>{this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)})}}return y}();class PDFDataRangeTransport{constructor(r,y,t=!1){this.length=r,this.initialData=y,this.progressiveDone=t,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(r){this._rangeListeners.push(r)}addProgressListener(r){this._progressListeners.push(r)}addProgressiveReadListener(r){this._progressiveReadListeners.push(r)}addProgressiveDoneListener(r){this._progressiveDoneListeners.push(r)}onDataRange(r,y){for(const t of this._rangeListeners)t(r,y)}onDataProgress(r,y){this._readyCapability.promise.then(()=>{for(const t of this._progressListeners)t(r,y)})}onDataProgressiveRead(r){this._readyCapability.promise.then(()=>{for(const y of this._progressiveReadListeners)y(r)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const r of this._progressiveDoneListeners)r()})}transportReady(){this._readyCapability.resolve()}requestDataRange(r,y){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(r,y){this._pdfInfo=r,this._transport=y}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get numPages(){return this._pdfInfo.numPages}get fingerprint(){return this._pdfInfo.fingerprint}getPage(r){return this._transport.getPage(r)}getPageIndex(r){return this._transport.getPageIndex(r)}getDestinations(){return this._transport.getDestinations()}getDestination(r){return this._transport.getDestination(r)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}getStats(){return this._transport.getStats()}cleanup(){return this._transport.startCleanup()}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(r){return this._transport.saveDocument(r)}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(r,y,t,A,w=!1){this._pageIndex=r,this._pageInfo=y,this._ownerDocument=A,this._transport=t,this._stats=w?new _display_utils.StatTimer:null,this._pdfBug=w,this.commonObjs=t.commonObjs,this.objs=new PDFObjects,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:r,rotation:y=this.rotate,offsetX:t=0,offsetY:A=0,dontFlip:w=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:r,rotation:y,offsetX:t,offsetY:A,dontFlip:w})}getAnnotations({intent:r=null}={}){return(!this.annotationsPromise||this.annotationsIntent!==r)&&(this.annotationsPromise=this._transport.getAnnotations(this._pageIndex,r),this.annotationsIntent=r),this.annotationsPromise}render({canvasContext:r,viewport:y,intent:t="display",enableWebGL:A=!1,renderInteractiveForms:w=!1,transform:D=null,imageLayer:R=null,canvasFactory:b=null,background:T=null,annotationStorage:h=null,optionalContentConfigPromise:C=null}){this._stats&&this._stats.time("Overall");const I=t==="print"?"print":"display";this.pendingCleanup=!1,C||(C=this._transport.getOptionalContentConfig());let a=this._intentStates.get(I);a||(a=Object.create(null),this._intentStates.set(I,a)),a.streamReaderCancelTimeout&&(clearTimeout(a.streamReaderCancelTimeout),a.streamReaderCancelTimeout=null);const g=b||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),m=new _webgl.WebGLContext({enable:A});a.displayReadyCapability||(a.displayReadyCapability=(0,_util.createPromiseCapability)(),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:I,renderInteractiveForms:w===!0,annotationStorage:h&&h.getAll()||null}));const E=k=>{const d=a.renderTasks.indexOf(S);d>=0&&a.renderTasks.splice(d,1),(this.cleanupAfterRender||I==="print")&&(this.pendingCleanup=!0),this._tryCleanup(),k?(S.capability.reject(k),this._abortOperatorList({intentState:a,reason:k})):S.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},S=new InternalRenderTask({callback:E,params:{canvasContext:r,viewport:y,transform:D,imageLayer:R,background:T},objs:this.objs,commonObjs:this.commonObjs,operatorList:a.operatorList,pageIndex:this._pageIndex,canvasFactory:g,webGLContext:m,useRequestAnimationFrame:I!=="print",pdfBug:this._pdfBug});a.renderTasks||(a.renderTasks=[]),a.renderTasks.push(S);const x=S.task;return Promise.all([a.displayReadyCapability.promise,C]).then(([k,d])=>{if(this.pendingCleanup){E();return}this._stats&&this._stats.time("Rendering"),S.initializeGraphics({transparency:k,optionalContentConfig:d}),S.operatorListChanged()}).catch(E),x}getOperatorList(){function r(){if(t.operatorList.lastChunk){t.opListReadCapability.resolve(t.operatorList);const w=t.renderTasks.indexOf(A);w>=0&&t.renderTasks.splice(w,1)}}const y="oplist";let t=this._intentStates.get(y);t||(t=Object.create(null),this._intentStates.set(y,t));let A;return t.opListReadCapability||(A=Object.create(null),A.operatorListChanged=r,t.opListReadCapability=(0,_util.createPromiseCapability)(),t.renderTasks=[],t.renderTasks.push(A),t.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList({pageIndex:this._pageIndex,intent:y})),t.opListReadCapability.promise}streamTextContent({normalizeWhitespace:r=!1,disableCombineTextItems:y=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,normalizeWhitespace:r===!0,combineTextItems:y!==!0},{highWaterMark:100,size(A){return A.items.length}})}getTextContent(r={}){const y=this.streamTextContent(r);return new Promise(function(t,A){function w(){D.read().then(function({value:b,done:T}){if(T){t(R);return}Object.assign(R.styles,b.styles),R.items.push(...b.items),w()},A)}const D=y.getReader(),R={items:[],styles:Object.create(null)};w()})}_destroy(){this.destroyed=!0,this._transport.pageCache[this._pageIndex]=null;const r=[];for(const[y,t]of this._intentStates)if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),y!=="oplist")for(const A of t.renderTasks)r.push(A.completed),A.cancel();return this.objs.clear(),this.annotationsPromise=null,this.pendingCleanup=!1,Promise.all(r)}cleanup(r=!1){return this.pendingCleanup=!0,this._tryCleanup(r)}_tryCleanup(r=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:y,operatorList:t}of this._intentStates.values())if(y.length!==0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.annotationsPromise=null,r&&this._stats&&(this._stats=new _display_utils.StatTimer),this.pendingCleanup=!1,!0}_startRenderPage(r,y){const t=this._intentStates.get(y);t&&(this._stats&&this._stats.timeEnd("Page Request"),t.displayReadyCapability&&t.displayReadyCapability.resolve(r))}_renderPageChunk(r,y){for(let t=0,A=r.length;t<A;t++)y.operatorList.fnArray.push(r.fnArray[t]),y.operatorList.argsArray.push(r.argsArray[t]);y.operatorList.lastChunk=r.lastChunk;for(let t=0;t<y.renderTasks.length;t++)y.renderTasks[t].operatorListChanged();r.lastChunk&&this._tryCleanup()}_pumpOperatorList(r){(0,_util.assert)(r.intent,'PDFPageProxy._pumpOperatorList: Expected "intent" argument.');const t=this._transport.messageHandler.sendWithStream("GetOperatorList",r).getReader(),A=this._intentStates.get(r.intent);A.streamReader=t;const w=()=>{t.read().then(({value:D,done:R})=>{if(R){A.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(D,A),w())},D=>{if(A.streamReader=null,!this._transport.destroyed){if(A.operatorList){A.operatorList.lastChunk=!0;for(let R=0;R<A.renderTasks.length;R++)A.renderTasks[R].operatorListChanged();this._tryCleanup()}if(A.displayReadyCapability)A.displayReadyCapability.reject(D);else if(A.opListReadCapability)A.opListReadCapability.reject(D);else throw D}})};w()}_abortOperatorList({intentState:r,reason:y,force:t=!1}){if((0,_util.assert)(y instanceof Error||typeof y=="object"&&y!==null,'PDFPageProxy._abortOperatorList: Expected "reason" argument.'),!!r.streamReader){if(!t){if(r.renderTasks.length!==0)return;if(y instanceof _display_utils.RenderingCancelledException){r.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:r,reason:y,force:!0}),r.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT);return}}if(r.streamReader.cancel(new _util.AbortException(y&&y.message)),r.streamReader=null,!this._transport.destroyed){for(const[A,w]of this._intentStates)if(w===r){this._intentStates.delete(A);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(r=!0){this._listeners=[],this._defer=r,this._deferred=Promise.resolve(void 0)}postMessage(r,y){function t(D){if(typeof D!="object"||D===null)return D;if(A.has(D))return A.get(D);let R,b;if((R=D.buffer)&&(0,_util.isArrayBuffer)(R))return y&&y.includes(R)?b=new D.constructor(R,D.byteOffset,D.byteLength):b=new D.constructor(D),A.set(D,b),b;b=Array.isArray(D)?[]:{},A.set(D,b);for(const T in D){let h,C=D;for(;!(h=Object.getOwnPropertyDescriptor(C,T));)C=Object.getPrototypeOf(C);if(!(typeof h.value>"u")){if(typeof h.value=="function"){if(D.hasOwnProperty&&D.hasOwnProperty(T))throw new Error(`LoopbackPort.postMessage - cannot clone: ${D[T]}`);continue}b[T]=t(h.value)}}return b}if(!this._defer){this._listeners.forEach(D=>{D.call(this,{data:r})});return}const A=new WeakMap,w={data:t(r)};this._deferred.then(()=>{this._listeners.forEach(D=>{D.call(this,w)})})}addEventListener(r,y){this._listeners.push(y)}removeEventListener(r,y){const t=this._listeners.indexOf(y);this._listeners.splice(t,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorker=function PDFWorkerClosure(){const pdfWorkerPorts=new WeakMap;let isWorkerDisabled=!1,fallbackWorkerSrc,nextFakeWorkerId=0,fakeWorkerCapability;if(_is_node.isNodeJS&&typeof commonjsRequire=="function")isWorkerDisabled=!0,fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"&&"currentScript"in document){const Q=document.currentScript&&document.currentScript.src;Q&&(fallbackWorkerSrc=Q.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}function getWorkerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(typeof fallbackWorkerSrc<"u")return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}function getMainThreadWorkerMessageHandler(){let Q;try{Q=globalThis.pdfjsWorker&&globalThis.pdfjsWorker.WorkerMessageHandler}catch{}return Q||null}function setupFakeWorkerGlobal(){if(fakeWorkerCapability)return fakeWorkerCapability.promise;fakeWorkerCapability=(0,_util.createPromiseCapability)();const loader=async function(){const mainWorkerMessageHandler=getMainThreadWorkerMessageHandler();if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(getWorkerSrc());return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(getWorkerSrc()),window.pdfjsWorker.WorkerMessageHandler};return loader().then(fakeWorkerCapability.resolve,fakeWorkerCapability.reject),fakeWorkerCapability.promise}function createCDNWrapper(Q){const r="importScripts('"+Q+"');";return URL.createObjectURL(new Blob([r]))}class PDFWorker{constructor({name:r=null,port:y=null,verbosity:t=(0,_util.getVerbosityLevel)()}={}){if(y&&pdfWorkerPorts.has(y))throw new Error("Cannot use more than one PDFWorker per port");if(this.name=r,this.destroyed=!1,this.postMessageTransfers=!0,this.verbosity=t,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,y){pdfWorkerPorts.set(y,this),this._initializeFromPort(y);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(r){this._port=r,this._messageHandler=new _message_handler.MessageHandler("main","worker",r),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if(typeof Worker<"u"&&!isWorkerDisabled&&!getMainThreadWorkerMessageHandler()){let r=getWorkerSrc();try{(0,_util.isSameOrigin)(window.location.href,r)||(r=createCDNWrapper(new URL(r,window.location).href));const y=new Worker(r),t=new _message_handler.MessageHandler("main","worker",y),A=()=>{y.removeEventListener("error",w),t.destroy(),y.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},w=()=>{this._webWorker||A()};y.addEventListener("error",w),t.on("test",R=>{if(y.removeEventListener("error",w),this.destroyed){A();return}R?(this._messageHandler=t,this._port=y,this._webWorker=y,R.supportTransfers||(this.postMessageTransfers=!1),this._readyCapability.resolve(),t.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),t.destroy(),y.terminate())}),t.on("ready",R=>{if(y.removeEventListener("error",w),this.destroyed){A();return}try{D()}catch{this._setupFakeWorker()}});const D=()=>{const R=new Uint8Array([this.postMessageTransfers?255:0]);try{t.send("test",R,[R.buffer])}catch{(0,_util.warn)("Cannot use postMessage transfers."),R[0]=0,t.send("test",R)}};D();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),isWorkerDisabled=!0),setupFakeWorkerGlobal().then(r=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const y=new LoopbackPort;this._port=y;const t="fake"+nextFakeWorkerId++,A=new _message_handler.MessageHandler(t+"_worker",t,y);r.setup(A,y);const w=new _message_handler.MessageHandler(t,t+"_worker",y);this._messageHandler=w,this._readyCapability.resolve(),w.send("configure",{verbosity:this.verbosity})}).catch(r=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${r.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),pdfWorkerPorts.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(r){if(!r||!r.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return pdfWorkerPorts.has(r.port)?pdfWorkerPorts.get(r.port):new PDFWorker(r)}static getWorkerSrc(){return getWorkerSrc()}}return PDFWorker}();exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(r,y,t,A){this.messageHandler=r,this.loadingTask=y,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:y.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:A.ownerDocument}),this._params=A,this.CMapReaderFactory=new A.CMapReaderFactory({baseUrl:A.cMapUrl,isCompressed:A.cMapPacked}),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=t,this._fullReader=null,this._lastProgress=null,this.pageCache=[],this.pagePromises=[],this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const r=[];this.pageCache.forEach(function(t){t&&r.push(t._destroy())}),this.pageCache.length=0,this.pagePromises.length=0;const y=this.messageHandler.sendWithPromise("Terminate",null);return r.push(y),Promise.all(r).then(()=>{this.fontLoader.clear(),this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:r,loadingTask:y}=this;r.on("GetReader",(t,A)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=w=>{this._lastProgress={loaded:w.loaded,total:w.total}},A.onPull=()=>{this._fullReader.read().then(function({value:w,done:D}){if(D){A.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(w),"GetReader - expected an ArrayBuffer."),A.enqueue(new Uint8Array(w),1,[w])}).catch(w=>{A.error(w)})},A.onCancel=w=>{this._fullReader.cancel(w),A.ready.catch(D=>{if(!this.destroyed)throw D})}}),r.on("ReaderHeadersReady",t=>{const A=(0,_util.createPromiseCapability)(),w=this._fullReader;return w.headersReady.then(()=>{(!w.isStreamingSupported||!w.isRangeSupported)&&(this._lastProgress&&y.onProgress&&y.onProgress(this._lastProgress),w.onProgress=D=>{y.onProgress&&y.onProgress({loaded:D.loaded,total:D.total})}),A.resolve({isStreamingSupported:w.isStreamingSupported,isRangeSupported:w.isRangeSupported,contentLength:w.contentLength})},A.reject),A.promise}),r.on("GetRangeReader",(t,A)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const w=this._networkStream.getRangeReader(t.begin,t.end);if(!w){A.close();return}A.onPull=()=>{w.read().then(function({value:D,done:R}){if(R){A.close();return}(0,_util.assert)((0,_util.isArrayBuffer)(D),"GetRangeReader - expected an ArrayBuffer."),A.enqueue(new Uint8Array(D),1,[D])}).catch(D=>{A.error(D)})},A.onCancel=D=>{w.cancel(D),A.ready.catch(R=>{if(!this.destroyed)throw R})}}),r.on("GetDoc",({pdfInfo:t})=>{this._numPages=t.numPages,y._capability.resolve(new PDFDocumentProxy(t,this))}),r.on("DocException",function(t){let A;switch(t.name){case"PasswordException":A=new _util.PasswordException(t.message,t.code);break;case"InvalidPDFException":A=new _util.InvalidPDFException(t.message);break;case"MissingPDFException":A=new _util.MissingPDFException(t.message);break;case"UnexpectedResponseException":A=new _util.UnexpectedResponseException(t.message,t.status);break;case"UnknownErrorException":A=new _util.UnknownErrorException(t.message,t.details);break}if(!(A instanceof Error)){const w="DocException - expected a valid Error.";(0,_util.warn)(w)}y._capability.reject(A)}),r.on("PasswordRequest",t=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),y.onPassword){const A=w=>{this._passwordCapability.resolve({password:w})};try{y.onPassword(A,t.code)}catch(w){this._passwordCapability.reject(w)}}else this._passwordCapability.reject(new _util.PasswordException(t.message,t.code));return this._passwordCapability.promise}),r.on("DataLoaded",t=>{y.onProgress&&y.onProgress({loaded:t.length,total:t.length}),this.downloadInfoCapability.resolve(t)}),r.on("StartRenderPage",t=>{if(this.destroyed)return;this.pageCache[t.pageIndex]._startRenderPage(t.transparency,t.intent)}),r.on("commonobj",t=>{if(this.destroyed)return;const[A,w,D]=t;if(!this.commonObjs.has(A))switch(w){case"Font":const R=this._params;if("error"in D){const h=D.error;(0,_util.warn)(`Error during font loading: ${h}`),this.commonObjs.resolve(A,h);break}let b=null;R.pdfBug&&globalThis.FontInspector&&globalThis.FontInspector.enabled&&(b={registerFont(h,C){globalThis.FontInspector.fontAdded(h,C)}});const T=new _font_loader.FontFaceObject(D,{isEvalSupported:R.isEvalSupported,disableFontFace:R.disableFontFace,ignoreErrors:R.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:b});this.fontLoader.bind(T).catch(h=>r.sendWithPromise("FontFallback",{id:A})).finally(()=>{!R.fontExtraProperties&&T.data&&(T.data=null),this.commonObjs.resolve(A,T)});break;case"FontPath":case"Image":this.commonObjs.resolve(A,D);break;default:throw new Error(`Got unknown common object type ${w}`)}}),r.on("obj",t=>{if(this.destroyed)return;const[A,w,D,R]=t,b=this.pageCache[w];if(!b.objs.has(A))switch(D){case"Image":b.objs.resolve(A,R);const T=8e6;R&&"data"in R&&R.data.length>T&&(b.cleanupAfterRender=!0);break;default:throw new Error(`Got unknown object type ${D}`)}}),r.on("DocProgress",t=>{this.destroyed||y.onProgress&&y.onProgress({loaded:t.loaded,total:t.total})}),r.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),r.on("FetchBuiltInCMap",(t,A)=>{if(this.destroyed){A.error(new Error("Worker was destroyed"));return}let w=!1;A.onPull=()=>{if(w){A.close();return}w=!0,this.CMapReaderFactory.fetch(t).then(function(D){A.enqueue(D,1,[D.cMapData.buffer])}).catch(function(D){A.error(D)})}})}_onUnsupportedFeature({featureId:r}){this.destroyed||this.loadingTask.onUnsupportedFeature&&this.loadingTask.onUnsupportedFeature(r)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(r){if(!Number.isInteger(r)||r<=0||r>this._numPages)return Promise.reject(new Error("Invalid page request"));const y=r-1;if(y in this.pagePromises)return this.pagePromises[y];const t=this.messageHandler.sendWithPromise("GetPage",{pageIndex:y}).then(A=>{if(this.destroyed)throw new Error("Transport destroyed");const w=new PDFPageProxy(y,A,this,this._params.ownerDocument,this._params.pdfBug);return this.pageCache[y]=w,w});return this.pagePromises[y]=t,t}getPageIndex(r){return this.messageHandler.sendWithPromise("GetPageIndex",{ref:r}).catch(function(y){return Promise.reject(new Error(y))})}getAnnotations(r,y){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:r,intent:y})}saveDocument(r){return this.messageHandler.sendWithPromise("SaveDocument",{numPages:this._numPages,annotationStorage:r&&r.getAll()||null,filename:this._fullReader?this._fullReader.filename:null}).finally(()=>{r&&r.resetModified()})}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(r){return typeof r!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:r})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(r=>new _optional_content_config.OptionalContentConfig(r))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return this.messageHandler.sendWithPromise("GetMetadata",null).then(r=>({info:r[0],metadata:r[1]?new _metadata.Metadata(r[1]):null,contentDispositionFilename:this._fullReader?this._fullReader.filename:null}))}getStats(){return this.messageHandler.sendWithPromise("GetStats",null)}startCleanup(){return this.messageHandler.sendWithPromise("Cleanup",null).then(()=>{for(let r=0,y=this.pageCache.length;r<y;r++){const t=this.pageCache[r];if(t&&!t.cleanup())throw new Error(`startCleanup: Page ${r+1} is currently rendering.`)}this.commonObjs.clear(),this.fontLoader.clear()})}get loadingParams(){const r=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:r.disableAutoFetch,disableFontFace:r.disableFontFace})}}class PDFObjects{constructor(){this._objs=Object.create(null)}_ensureObj(r){return this._objs[r]?this._objs[r]:this._objs[r]={capability:(0,_util.createPromiseCapability)(),data:null,resolved:!1}}get(r,y=null){if(y)return this._ensureObj(r).capability.promise.then(y),null;const t=this._objs[r];if(!t||!t.resolved)throw new Error(`Requesting object that isn't resolved yet ${r}.`);return t.data}has(r){const y=this._objs[r];return y?y.resolved:!1}resolve(r,y){const t=this._ensureObj(r);t.resolved=!0,t.data=y,t.capability.resolve(y)}clear(){this._objs=Object.create(null)}}class RenderTask{constructor(r){this._internalRenderTask=r,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}const InternalRenderTask=function Q(){const r=new WeakSet;class y{constructor({callback:A,params:w,objs:D,commonObjs:R,operatorList:b,pageIndex:T,canvasFactory:h,webGLContext:C,useRequestAnimationFrame:I=!1,pdfBug:a=!1}){this.callback=A,this.params=w,this.objs=D,this.commonObjs=R,this.operatorListIdx=null,this.operatorList=b,this._pageIndex=T,this.canvasFactory=h,this.webGLContext=C,this._pdfBug=a,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=I===!0&&typeof window<"u",this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=w.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:A=!1,optionalContentConfig:w}){if(this.cancelled)return;if(this._canvas){if(r.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");r.add(this._canvas)}this._pdfBug&&globalThis.StepperManager&&globalThis.StepperManager.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:D,viewport:R,transform:b,imageLayer:T,background:h}=this.params;this.gfx=new _canvas.CanvasGraphics(D,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext,T,w),this.gfx.beginDrawing({transform:b,viewport:R,transparency:A,background:h}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(A=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&r.delete(this._canvas),this.callback(A||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this.cancel.bind(this))}):Promise.resolve().then(this._nextBound).catch(this.cancel.bind(this))}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),this._canvas&&r.delete(this._canvas),this.callback())))}}return y}(),version="2.6.347";exports.version=version;const build="3be9c65f";exports.build=build},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.FontLoader=r.FontFaceObject=void 0;var t=y(2);class A{constructor({docId:b,onUnsupportedFeature:T,ownerDocument:h=globalThis.document}){this.constructor===A&&(0,t.unreachable)("Cannot initialize BaseFontLoader."),this.docId=b,this._onUnsupportedFeature=T,this._document=h,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(b){this.nativeFontFaces.push(b),this._document.fonts.add(b)}insertRule(b){let T=this.styleElement;T||(T=this.styleElement=this._document.createElement("style"),T.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(T));const h=T.sheet;h.insertRule(b,h.cssRules.length)}clear(){this.nativeFontFaces.forEach(b=>{this._document.fonts.delete(b)}),this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async bind(b){if(b.attached||b.missingFile)return;if(b.attached=!0,this.isFontLoadingAPISupported){const h=b.createNativeFontFace();if(h){this.addNativeFontFace(h);try{await h.loaded}catch(C){throw this._onUnsupportedFeature({featureId:t.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,t.warn)(`Failed to load font '${h.family}': '${C}'.`),b.disableFontFace=!0,C}}return}const T=b.createFontFaceRule();if(T){if(this.insertRule(T),this.isSyncFontLoadingSupported)return;await new Promise(h=>{const C=this._queueLoadingCallback(h);this._prepareFontLoadEvent([T],[b],C)})}}_queueLoadingCallback(b){(0,t.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){const b=typeof this._document<"u"&&!!this._document.fonts;return(0,t.shadow)(this,"isFontLoadingAPISupported",b)}get isSyncFontLoadingSupported(){(0,t.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,t.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(b,T,h){(0,t.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let w;r.FontLoader=w,r.FontLoader=w=class extends A{constructor(b){super(b),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let b=!1;if(typeof navigator>"u")b=!0;else{const T=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);T&&T[1]>=14&&(b=!0)}return(0,t.shadow)(this,"isSyncFontLoadingSupported",b)}_queueLoadingCallback(b){function T(){for((0,t.assert)(!C.done,"completeRequest() cannot be called twice."),C.done=!0;h.requests.length>0&&h.requests[0].done;){const I=h.requests.shift();setTimeout(I.callback,0)}}const h=this.loadingContext,C={id:`pdfjs-font-loading-${h.nextRequestId++}`,done:!1,complete:T,callback:b};return h.requests.push(C),C}get _loadTestFont(){const b=function(){return atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==")};return(0,t.shadow)(this,"_loadTestFont",b())}_prepareFontLoadEvent(b,T,h){function C(M,O){return M.charCodeAt(O)<<24|M.charCodeAt(O+1)<<16|M.charCodeAt(O+2)<<8|M.charCodeAt(O+3)&255}function I(M,O,X,W){const L=M.substring(0,O),e=M.substring(O+X);return L+W+e}let a,g;const m=this._document.createElement("canvas");m.width=1,m.height=1;const E=m.getContext("2d");let S=0;function x(M,O){if(S++,S>30){(0,t.warn)("Load test font never loaded."),O();return}if(E.font="30px "+M,E.fillText(".",0,20),E.getImageData(0,0,1,1).data[3]>0){O();return}setTimeout(x.bind(null,M,O))}const k=`lt${Date.now()}${this.loadTestFontId++}`;let d=this._loadTestFont;d=I(d,976,k.length,k);const o=16,f=1482184792;let c=C(d,o);for(a=0,g=k.length-3;a<g;a+=4)c=c-f+C(k,a)|0;a<k.length&&(c=c-f+C(k+"XXX",a)|0),d=I(d,o,4,(0,t.string32)(c));const l=`url(data:font/opentype;base64,${btoa(d)});`,v=`@font-face {font-family:"${k}";src:${l}}`;this.insertRule(v);const P=[];for(a=0,g=T.length;a<g;a++)P.push(T[a].loadedName);P.push(k);const N=this._document.createElement("div");for(N.style.visibility="hidden",N.style.width=N.style.height="10px",N.style.position="absolute",N.style.top=N.style.left="0px",a=0,g=P.length;a<g;++a){const M=this._document.createElement("span");M.textContent="Hi",M.style.fontFamily=P[a],N.appendChild(M)}this._document.body.appendChild(N),x(k,()=>{this._document.body.removeChild(N),h.complete()})}};class D{constructor(b,{isEvalSupported:T=!0,disableFontFace:h=!1,ignoreErrors:C=!1,onUnsupportedFeature:I=null,fontRegistry:a=null}){this.compiledGlyphs=Object.create(null);for(const g in b)this[g]=b[g];this.isEvalSupported=T!==!1,this.disableFontFace=h===!0,this.ignoreErrors=C===!0,this._onUnsupportedFeature=I,this.fontRegistry=a}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;const b=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),b}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const b=(0,t.bytesToString)(new Uint8Array(this.data)),T=`url(data:${this.mimetype};base64,${btoa(b)});`,h=`@font-face {font-family:"${this.loadedName}";src:${T}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,T),h}getPathGenerator(b,T){if(this.compiledGlyphs[T]!==void 0)return this.compiledGlyphs[T];let h,C;try{h=b.get(this.loadedName+"_path_"+T)}catch(I){if(!this.ignoreErrors)throw I;return this._onUnsupportedFeature&&this._onUnsupportedFeature({featureId:t.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,t.warn)(`getPathGenerator - ignoring character: "${I}".`),this.compiledGlyphs[T]=function(a,g){}}if(this.isEvalSupported&&t.IsEvalSupportedCached.value){let I,a="";for(let g=0,m=h.length;g<m;g++)C=h[g],C.args!==void 0?I=C.args.join(","):I="",a+="c."+C.cmd+"("+I+`);
`;return this.compiledGlyphs[T]=new Function("c","size",a)}return this.compiledGlyphs[T]=function(I,a){for(let g=0,m=h.length;g<m;g++)C=h[g],C.cmd==="scale"&&(C.args=[a,-a]),I[C.cmd].apply(I,C.args)}}}r.FontFaceObject=D},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.NodeCMapReaderFactory=r.NodeCanvasFactory=void 0;var t=y(1),A=y(4),w=y(2);let D=class{constructor(){(0,w.unreachable)("Not implemented: NodeCanvasFactory")}};r.NodeCanvasFactory=D;let R=class{constructor(){(0,w.unreachable)("Not implemented: NodeCMapReaderFactory")}};r.NodeCMapReaderFactory=R,A.isNodeJS&&(r.NodeCanvasFactory=D=class extends t.BaseCanvasFactory{create(b,T){if(b<=0||T<=0)throw new Error("Invalid canvas size");const C=require$$5.createCanvas(b,T);return{canvas:C,context:C.getContext("2d")}}},r.NodeCMapReaderFactory=R=class extends t.BaseCMapReaderFactory{_fetchData(b,T){return new Promise((h,C)=>{require$$5.readFile(b,(a,g)=>{if(a||!g){C(new Error(a));return}h({cMapData:new Uint8Array(g),compressionType:T})})})}})},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationStorage=void 0;class t{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getOrCreateValue(w,D){return this._storage.has(w)?this._storage.get(w):(this._storage.set(w,D),D)}setValue(w,D){this._storage.get(w)!==D&&this._setModified(),this._storage.set(w,D)}getAll(){return this._storage.size===0?null:Object.fromEntries(this._storage)}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,typeof this.onResetModified=="function"&&this.onResetModified())}}r.AnnotationStorage=t},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.apiCompatibilityParams=void 0;var t=y(4);const A=Object.create(null);(function(){t.isNodeJS&&(A.disableFontFace=!0)})();const w=Object.freeze(A);r.apiCompatibilityParams=w},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.CanvasGraphics=void 0;var t=y(2),A=y(11),w=16,D=100,R=4096,b=.65,T=1e3,h=16;function C(E){E.mozCurrentTransform||(E._originalSave=E.save,E._originalRestore=E.restore,E._originalRotate=E.rotate,E._originalScale=E.scale,E._originalTranslate=E.translate,E._originalTransform=E.transform,E._originalSetTransform=E.setTransform,E._transformMatrix=E._transformMatrix||[1,0,0,1,0,0],E._transformStack=[],Object.defineProperty(E,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(E,"mozCurrentTransformInverse",{get:function(){var x=this._transformMatrix,k=x[0],d=x[1],i=x[2],o=x[3],f=x[4],c=x[5],l=k*o-d*i,v=d*i-k*o;return[o/l,d/v,i/v,k/l,(o*f-i*c)/v,(d*f-k*c)/l]}}),E.save=function(){var x=this._transformMatrix;this._transformStack.push(x),this._transformMatrix=x.slice(0,6),this._originalSave()},E.restore=function(){var x=this._transformStack.pop();x&&(this._transformMatrix=x,this._originalRestore())},E.translate=function(x,k){var d=this._transformMatrix;d[4]=d[0]*x+d[2]*k+d[4],d[5]=d[1]*x+d[3]*k+d[5],this._originalTranslate(x,k)},E.scale=function(x,k){var d=this._transformMatrix;d[0]=d[0]*x,d[1]=d[1]*x,d[2]=d[2]*k,d[3]=d[3]*k,this._originalScale(x,k)},E.transform=function(x,k,d,i,o,f){var c=this._transformMatrix;this._transformMatrix=[c[0]*x+c[2]*k,c[1]*x+c[3]*k,c[0]*d+c[2]*i,c[1]*d+c[3]*i,c[0]*o+c[2]*f+c[4],c[1]*o+c[3]*f+c[5]],E._originalTransform(x,k,d,i,o,f)},E.setTransform=function(x,k,d,i,o,f){this._transformMatrix=[x,k,d,i,o,f],E._originalSetTransform(x,k,d,i,o,f)},E.rotate=function(x){var k=Math.cos(x),d=Math.sin(x),i=this._transformMatrix;this._transformMatrix=[i[0]*k+i[2]*d,i[1]*k+i[3]*d,i[0]*-d+i[2]*k,i[1]*-d+i[3]*k,i[4],i[5]],this._originalRotate(x)})}var I=function(){function S(x){this.canvasFactory=x,this.cache=Object.create(null)}return S.prototype={getCanvas:function(k,d,i,o){var f;return this.cache[k]!==void 0?(f=this.cache[k],this.canvasFactory.reset(f,d,i),f.context.setTransform(1,0,0,1,0,0)):(f=this.canvasFactory.create(d,i),this.cache[k]=f),o&&C(f.context),f},clear(){for(var x in this.cache){var k=this.cache[x];this.canvasFactory.destroy(k),delete this.cache[x]}}},S}();function a(E){var S=1e3,x=E.width,k=E.height,d,i,o,f=x+1,c=new Uint8Array(f*(k+1)),l=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),v=x+7&-8,P=E.data,N=new Uint8Array(v*k),M=0,O;for(d=0,O=P.length;d<O;d++)for(var X=128,W=P[d];X>0;)N[M++]=W&X?0:255,X>>=1;var L=0;for(M=0,N[M]!==0&&(c[0]=1,++L),i=1;i<x;i++)N[M]!==N[M+1]&&(c[i]=N[M]?2:1,++L),M++;for(N[M]!==0&&(c[i]=2,++L),d=1;d<k;d++){M=d*v,o=d*f,N[M-v]!==N[M]&&(c[o]=N[M]?1:8,++L);var e=(N[M]?4:0)+(N[M-v]?8:0);for(i=1;i<x;i++)e=(e>>2)+(N[M+1]?4:0)+(N[M-v+1]?8:0),l[e]&&(c[o+i]=l[e],++L),M++;if(N[M-v]!==N[M]&&(c[o+i]=N[M]?2:4,++L),L>S)return null}for(M=v*(k-1),o=d*f,N[M]!==0&&(c[o]=8,++L),i=1;i<x;i++)N[M]!==N[M+1]&&(c[o+i]=N[M]?4:8,++L),M++;if(N[M]!==0&&(c[o+i]=4,++L),L>S)return null;var n=new Int32Array([0,f,-1,0,-f,0,0,0,1]),s=[];for(d=0;L&&d<=k;d++){for(var u=d*f,p=u+x;u<p&&!c[u];)u++;if(u!==p){var _=[u%f,d],F=c[u],U=u,G;do{var z=n[F];do u+=z;while(!c[u]);G=c[u],G!==5&&G!==10?(F=G,c[u]=0):(F=G&51*F>>4,c[u]&=F>>2|F<<2),_.push(u%f),_.push(u/f|0),c[u]||--L}while(U!==u);s.push(_),--d}}var V=function(H){H.save(),H.scale(1/x,-1/k),H.translate(0,-k),H.beginPath();for(let K=0,Y=s.length;K<Y;K++){var $=s[K];H.moveTo($[0],$[1]);for(let Z=2,ee=$.length;Z<ee;Z+=2)H.lineTo($[Z],$[Z+1])}H.fill(),H.beginPath(),H.restore()};return V}var g=function(){function S(){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=t.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=t.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.resumeSMaskCtx=null,this.transferMaps=null}return S.prototype={clone:function(){return Object.create(this)},setCurrentPoint:function(k,d){this.x=k,this.y=d}},S}(),m=function(){var S=15,x=10;function k(e,n,s,u,p,_,F){this.ctx=e,this.current=new g,this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=n,this.objs=s,this.canvasFactory=u,this.webGLContext=p,this.imageLayer=_,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=F,this.cachedCanvases=new I(this.canvasFactory),e&&C(e),this._cachedGetSinglePixelWidth=null}function d(e,n,s=null){if(typeof ImageData<"u"&&n instanceof ImageData){e.putImageData(n,0,0);return}var u=n.height,p=n.width,_=u%h,F=(u-_)/h,U=_===0?F:F+1,G=e.createImageData(p,h),z=0,V,H=n.data,$=G.data,K,Y,Z,ee;let te,se,ae,he;if(s)switch(s.length){case 1:te=s[0],se=s[0],ae=s[0],he=s[0];break;case 4:te=s[0],se=s[1],ae=s[2],he=s[3];break}if(n.kind===t.ImageKind.GRAYSCALE_1BPP){var me=H.byteLength,ne=new Uint32Array($.buffer,0,$.byteLength>>2),oe=ne.length,Ce=p+7>>3,fe=4294967295,de=t.IsLittleEndianCached.value?4278190080:255;for(he&&he[0]===255&&he[255]===0&&([fe,de]=[de,fe]),K=0;K<U;K++){for(Z=K<F?h:_,V=0,Y=0;Y<Z;Y++){var _e=me-z;let ue=0;for(var Ae=_e>Ce?p:_e*8-7,be=Ae&-8,ve=0,pe=0;ue<be;ue+=8)pe=H[z++],ne[V++]=pe&128?fe:de,ne[V++]=pe&64?fe:de,ne[V++]=pe&32?fe:de,ne[V++]=pe&16?fe:de,ne[V++]=pe&8?fe:de,ne[V++]=pe&4?fe:de,ne[V++]=pe&2?fe:de,ne[V++]=pe&1?fe:de;for(;ue<Ae;ue++)ve===0&&(pe=H[z++],ve=128),ne[V++]=pe&ve?fe:de,ve>>=1}for(;V<oe;)ne[V++]=0;e.putImageData(G,0,K*h)}}else if(n.kind===t.ImageKind.RGBA_32BPP){const ue=!!(te||se||ae);for(Y=0,ee=p*h*4,K=0;K<F;K++){if($.set(H.subarray(z,z+ee)),z+=ee,ue)for(let ie=0;ie<ee;ie+=4)te&&($[ie+0]=te[$[ie+0]]),se&&($[ie+1]=se[$[ie+1]]),ae&&($[ie+2]=ae[$[ie+2]]);e.putImageData(G,0,Y),Y+=h}if(K<U){if(ee=p*_*4,$.set(H.subarray(z,z+ee)),ue)for(let ie=0;ie<ee;ie+=4)te&&($[ie+0]=te[$[ie+0]]),se&&($[ie+1]=se[$[ie+1]]),ae&&($[ie+2]=ae[$[ie+2]]);e.putImageData(G,0,Y)}}else if(n.kind===t.ImageKind.RGB_24BPP){const ue=!!(te||se||ae);for(Z=h,ee=p*Z,K=0;K<U;K++){for(K>=F&&(Z=_,ee=p*Z),V=0,Y=ee;Y--;)$[V++]=H[z++],$[V++]=H[z++],$[V++]=H[z++],$[V++]=255;if(ue)for(let ie=0;ie<V;ie+=4)te&&($[ie+0]=te[$[ie+0]]),se&&($[ie+1]=se[$[ie+1]]),ae&&($[ie+2]=ae[$[ie+2]]);e.putImageData(G,0,K*h)}}else throw new Error(`bad image kind: ${n.kind}`)}function i(e,n){for(var s=n.height,u=n.width,p=s%h,_=(s-p)/h,F=p===0?_:_+1,U=e.createImageData(u,h),G=0,z=n.data,V=U.data,H=0;H<F;H++){for(var $=H<_?h:p,K=3,Y=0;Y<$;Y++)for(var Z=0,ee=0;ee<u;ee++){if(!Z){var te=z[G++];Z=128}V[K]=te&Z?0:255,K+=4,Z>>=1}e.putImageData(U,0,H*h)}}function o(e,n){for(var s=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"],u=0,p=s.length;u<p;u++){var _=s[u];e[_]!==void 0&&(n[_]=e[_])}e.setLineDash!==void 0&&(n.setLineDash(e.getLineDash()),n.lineDashOffset=e.lineDashOffset)}function f(e){e.strokeStyle="#000000",e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",e.setLineDash!==void 0&&(e.setLineDash([]),e.lineDashOffset=0)}function c(e,n,s,u){for(var p=e.length,_=3;_<p;_+=4){var F=e[_];if(F===0)e[_-3]=n,e[_-2]=s,e[_-1]=u;else if(F<255){var U=255-F;e[_-3]=e[_-3]*F+n*U>>8,e[_-2]=e[_-2]*F+s*U>>8,e[_-1]=e[_-1]*F+u*U>>8}}}function l(e,n,s){for(var u=e.length,p=1/255,_=3;_<u;_+=4){var F=s?s[e[_]]:e[_];n[_]=n[_]*F*p|0}}function v(e,n,s){for(var u=e.length,p=3;p<u;p+=4){var _=e[p-3]*77+e[p-2]*152+e[p-1]*28;n[p]=s?n[p]*s[_>>8]>>8:n[p]*_>>16}}function P(e,n,s,u,p,_,F){var U=!!_,G=U?_[0]:0,z=U?_[1]:0,V=U?_[2]:0,H;p==="Luminosity"?H=v:H=l;for(var $=1048576,K=Math.min(u,Math.ceil($/s)),Y=0;Y<u;Y+=K){var Z=Math.min(K,u-Y),ee=e.getImageData(0,Y,s,Z),te=n.getImageData(0,Y,s,Z);U&&c(ee.data,G,z,V),H(ee.data,te.data,F),e.putImageData(te,0,Y)}}function N(e,n,s,u){var p=n.canvas,_=n.context;e.setTransform(n.scaleX,0,0,n.scaleY,n.offsetX,n.offsetY);var F=n.backdrop||null;if(!n.transferMap&&u.isEnabled){const U=u.composeSMask({layer:s.canvas,mask:p,properties:{subtype:n.subtype,backdrop:F}});e.setTransform(1,0,0,1,0,0),e.drawImage(U,n.offsetX,n.offsetY);return}P(_,s,p.width,p.height,n.subtype,F,n.transferMap),e.drawImage(p,0,0)}var M=["butt","round","square"],O=["miter","round","bevel"],X={},W={};k.prototype={beginDrawing({transform:e,viewport:n,transparency:s=!1,background:u=null}){var p=this.ctx.canvas.width,_=this.ctx.canvas.height;if(this.ctx.save(),this.ctx.fillStyle=u||"rgb(255, 255, 255)",this.ctx.fillRect(0,0,p,_),this.ctx.restore(),s){var F=this.cachedCanvases.getCanvas("transparent",p,_,!0);this.compositeCtx=this.ctx,this.transparentCanvas=F.canvas,this.ctx=F.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),f(this.ctx),e&&this.ctx.transform.apply(this.ctx,e),this.ctx.transform.apply(this.ctx,n.transform),this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()},executeOperatorList:function(n,s,u,p){var _=n.argsArray,F=n.fnArray,U=s||0,G=_.length;if(G===U)return U;for(var z=G-U>x&&typeof u=="function",V=z?Date.now()+S:0,H=0,$=this.commonObjs,K=this.objs,Y;;){if(p!==void 0&&U===p.nextBreakPoint)return p.breakIt(U,u),U;if(Y=F[U],Y!==t.OPS.dependency)this[Y].apply(this,_[U]);else for(const Z of _[U]){const ee=Z.startsWith("g_")?$:K;if(!ee.has(Z))return ee.get(Z,u),U}if(U++,U===G)return U;if(z&&++H>x){if(Date.now()>V)return u(),U;H=0}}},endDrawing:function(){this.current.activeSMask!==null&&this.endSMaskGroup(),this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.webGLContext.clear(),this.imageLayer&&this.imageLayer.endLayout()},setLineWidth:function(n){this.current.lineWidth=n,this.ctx.lineWidth=n},setLineCap:function(n){this.ctx.lineCap=M[n]},setLineJoin:function(n){this.ctx.lineJoin=O[n]},setMiterLimit:function(n){this.ctx.miterLimit=n},setDash:function(n,s){var u=this.ctx;u.setLineDash!==void 0&&(u.setLineDash(n),u.lineDashOffset=s)},setRenderingIntent(e){},setFlatness(e){},setGState:function(n){for(var s=0,u=n.length;s<u;s++){var p=n[s],_=p[0],F=p[1];switch(_){case"LW":this.setLineWidth(F);break;case"LC":this.setLineCap(F);break;case"LJ":this.setLineJoin(F);break;case"ML":this.setMiterLimit(F);break;case"D":this.setDash(F[0],F[1]);break;case"RI":this.setRenderingIntent(F);break;case"FL":this.setFlatness(F);break;case"Font":this.setFont(F[0],F[1]);break;case"CA":this.current.strokeAlpha=p[1];break;case"ca":this.current.fillAlpha=p[1],this.ctx.globalAlpha=p[1];break;case"BM":this.ctx.globalCompositeOperation=F;break;case"SMask":this.current.activeSMask&&(this.stateStack.length>0&&this.stateStack[this.stateStack.length-1].activeSMask===this.current.activeSMask?this.suspendSMaskGroup():this.endSMaskGroup()),this.current.activeSMask=F?this.tempSMask:null,this.current.activeSMask&&this.beginSMaskGroup(),this.tempSMask=null;break;case"TR":this.current.transferMaps=F}}},beginSMaskGroup:function(){var n=this.current.activeSMask,s=n.canvas.width,u=n.canvas.height,p="smaskGroupAt"+this.groupLevel,_=this.cachedCanvases.getCanvas(p,s,u,!0),F=this.ctx,U=F.mozCurrentTransform;this.ctx.save();var G=_.context;G.scale(1/n.scaleX,1/n.scaleY),G.translate(-n.offsetX,-n.offsetY),G.transform.apply(G,U),n.startTransformInverse=G.mozCurrentTransformInverse,o(F,G),this.ctx=G,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(F),this.groupLevel++},suspendSMaskGroup:function(){var n=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),N(this.ctx,this.current.activeSMask,n,this.webGLContext),this.ctx.restore(),this.ctx.save(),o(n,this.ctx),this.current.resumeSMaskCtx=n;var s=t.Util.transform(this.current.activeSMask.startTransformInverse,n.mozCurrentTransform);this.ctx.transform.apply(this.ctx,s),n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,n.canvas.width,n.canvas.height),n.restore()},resumeSMaskGroup:function(){var n=this.current.resumeSMaskCtx,s=this.ctx;this.ctx=n,this.groupStack.push(s),this.groupLevel++},endSMaskGroup:function(){var n=this.ctx;this.groupLevel--,this.ctx=this.groupStack.pop(),N(this.ctx,this.current.activeSMask,n,this.webGLContext),this.ctx.restore(),o(n,this.ctx);var s=t.Util.transform(this.current.activeSMask.startTransformInverse,n.mozCurrentTransform);this.ctx.transform.apply(this.ctx,s)},save:function(){this.ctx.save();var n=this.current;this.stateStack.push(n),this.current=n.clone(),this.current.resumeSMaskCtx=null},restore:function(){this.current.resumeSMaskCtx&&this.resumeSMaskGroup(),this.current.activeSMask!==null&&(this.stateStack.length===0||this.stateStack[this.stateStack.length-1].activeSMask!==this.current.activeSMask)&&this.endSMaskGroup(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.ctx.restore(),this.pendingClip=null,this._cachedGetSinglePixelWidth=null)},transform:function(n,s,u,p,_,F){this.ctx.transform(n,s,u,p,_,F),this._cachedGetSinglePixelWidth=null},constructPath:function(n,s){for(var u=this.ctx,p=this.current,_=p.x,F=p.y,U=0,G=0,z=n.length;U<z;U++)switch(n[U]|0){case t.OPS.rectangle:_=s[G++],F=s[G++];var V=s[G++],H=s[G++];V===0&&u.lineWidth<this.getSinglePixelWidth()&&(V=this.getSinglePixelWidth()),H===0&&u.lineWidth<this.getSinglePixelWidth()&&(H=this.getSinglePixelWidth());var $=_+V,K=F+H;u.moveTo(_,F),u.lineTo($,F),u.lineTo($,K),u.lineTo(_,K),u.lineTo(_,F),u.closePath();break;case t.OPS.moveTo:_=s[G++],F=s[G++],u.moveTo(_,F);break;case t.OPS.lineTo:_=s[G++],F=s[G++],u.lineTo(_,F);break;case t.OPS.curveTo:_=s[G+4],F=s[G+5],u.bezierCurveTo(s[G],s[G+1],s[G+2],s[G+3],_,F),G+=6;break;case t.OPS.curveTo2:u.bezierCurveTo(_,F,s[G],s[G+1],s[G+2],s[G+3]),_=s[G+2],F=s[G+3],G+=4;break;case t.OPS.curveTo3:_=s[G+2],F=s[G+3],u.bezierCurveTo(s[G],s[G+1],_,F,_,F),G+=4;break;case t.OPS.closePath:u.closePath();break}p.setCurrentPoint(_,F)},closePath:function(){this.ctx.closePath()},stroke:function(n){n=typeof n<"u"?n:!0;var s=this.ctx,u=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(u&&u.hasOwnProperty("type")&&u.type==="Pattern"){s.save();const p=s.mozCurrentTransform,_=t.Util.singularValueDecompose2dScale(p)[0];s.strokeStyle=u.getPattern(s,this),s.lineWidth=Math.max(this.getSinglePixelWidth()*b,this.current.lineWidth*_),s.stroke(),s.restore()}else s.lineWidth=Math.max(this.getSinglePixelWidth()*b,this.current.lineWidth),s.stroke();n&&this.consumePath(),s.globalAlpha=this.current.fillAlpha},closeStroke:function(){this.closePath(),this.stroke()},fill:function(n){n=typeof n<"u"?n:!0;var s=this.ctx,u=this.current.fillColor,p=this.current.patternFill,_=!1;p&&(s.save(),this.baseTransform&&s.setTransform.apply(s,this.baseTransform),s.fillStyle=u.getPattern(s,this),_=!0),this.contentVisible&&(this.pendingEOFill?(s.fill("evenodd"),this.pendingEOFill=!1):s.fill()),_&&s.restore(),n&&this.consumePath()},eoFill:function(){this.pendingEOFill=!0,this.fill()},fillStroke:function(){this.fill(!1),this.stroke(!1),this.consumePath()},eoFillStroke:function(){this.pendingEOFill=!0,this.fillStroke()},closeFillStroke:function(){this.closePath(),this.fillStroke()},closeEOFillStroke:function(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()},endPath:function(){this.consumePath()},clip:function(){this.pendingClip=X},eoClip:function(){this.pendingClip=W},beginText:function(){this.current.textMatrix=t.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},endText:function(){var n=this.pendingTextPaths,s=this.ctx;if(n===void 0){s.beginPath();return}s.save(),s.beginPath();for(var u=0;u<n.length;u++){var p=n[u];s.setTransform.apply(s,p.transform),s.translate(p.x,p.y),p.addToPath(s,p.fontSize)}s.restore(),s.clip(),s.beginPath(),delete this.pendingTextPaths},setCharSpacing:function(n){this.current.charSpacing=n},setWordSpacing:function(n){this.current.wordSpacing=n},setHScale:function(n){this.current.textHScale=n/100},setLeading:function(n){this.current.leading=-n},setFont:function(n,s){var u=this.commonObjs.get(n),p=this.current;if(!u)throw new Error(`Can't find font for ${n}`);if(p.fontMatrix=u.fontMatrix?u.fontMatrix:t.FONT_IDENTITY_MATRIX,(p.fontMatrix[0]===0||p.fontMatrix[3]===0)&&(0,t.warn)("Invalid font matrix for font "+n),s<0?(s=-s,p.fontDirection=-1):p.fontDirection=1,this.current.font=u,this.current.fontSize=s,u.isType3Font)return;var _=u.loadedName||"sans-serif";let F="normal";u.black?F="900":u.bold&&(F="bold");var U=u.italic?"italic":"normal",G=`"${_}", ${u.fallbackName}`;let z=s;s<w?z=w:s>D&&(z=D),this.current.fontSizeScale=s/z,this.ctx.font=`${U} ${F} ${z}px ${G}`},setTextRenderingMode:function(n){this.current.textRenderingMode=n},setTextRise:function(n){this.current.textRise=n},moveText:function(n,s){this.current.x=this.current.lineX+=n,this.current.y=this.current.lineY+=s},setLeadingMoveText:function(n,s){this.setLeading(-s),this.moveText(n,s)},setTextMatrix:function(n,s,u,p,_,F){this.current.textMatrix=[n,s,u,p,_,F],this.current.textMatrixScale=Math.sqrt(n*n+s*s),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0},nextLine:function(){this.moveText(0,this.current.leading)},paintChar(e,n,s,u){var p=this.ctx,_=this.current,F=_.font,U=_.textRenderingMode,G=_.fontSize/_.fontSizeScale,z=U&t.TextRenderingMode.FILL_STROKE_MASK,V=!!(U&t.TextRenderingMode.ADD_TO_PATH_FLAG);const H=_.patternFill&&!F.missingFile;var $;if((F.disableFontFace||V||H)&&($=F.getPathGenerator(this.commonObjs,e)),F.disableFontFace||H?(p.save(),p.translate(n,s),p.beginPath(),$(p,G),u&&p.setTransform.apply(p,u),(z===t.TextRenderingMode.FILL||z===t.TextRenderingMode.FILL_STROKE)&&p.fill(),(z===t.TextRenderingMode.STROKE||z===t.TextRenderingMode.FILL_STROKE)&&p.stroke(),p.restore()):((z===t.TextRenderingMode.FILL||z===t.TextRenderingMode.FILL_STROKE)&&p.fillText(e,n,s),(z===t.TextRenderingMode.STROKE||z===t.TextRenderingMode.FILL_STROKE)&&p.strokeText(e,n,s)),V){var K=this.pendingTextPaths||(this.pendingTextPaths=[]);K.push({transform:p.mozCurrentTransform,x:n,y:s,fontSize:G,addToPath:$})}},get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);for(var n=e.getImageData(0,0,10,10).data,s=!1,u=3;u<n.length;u+=4)if(n[u]>0&&n[u]<255){s=!0;break}return(0,t.shadow)(this,"isFontSubpixelAAEnabled",s)},showText:function(n){var s=this.current,u=s.font;if(u.isType3Font)return this.showType3Text(n);var p=s.fontSize;if(p===0)return;var _=this.ctx,F=s.fontSizeScale,U=s.charSpacing,G=s.wordSpacing,z=s.fontDirection,V=s.textHScale*z,H=n.length,$=u.vertical,K=$?1:-1,Y=u.defaultVMetrics,Z=p*s.fontMatrix[0],ee=s.textRenderingMode===t.TextRenderingMode.FILL&&!u.disableFontFace&&!s.patternFill;_.save();let te;if(s.patternFill){_.save();const le=s.fillColor.getPattern(_,this);te=_.mozCurrentTransform,_.restore(),_.fillStyle=le}_.transform.apply(_,s.textMatrix),_.translate(s.x,s.y+s.textRise),z>0?_.scale(V,-1):_.scale(V,1);var se=s.lineWidth,ae=s.textMatrixScale;if(ae===0||se===0){var he=s.textRenderingMode&t.TextRenderingMode.FILL_STROKE_MASK;(he===t.TextRenderingMode.STROKE||he===t.TextRenderingMode.FILL_STROKE)&&(this._cachedGetSinglePixelWidth=null,se=this.getSinglePixelWidth()*b)}else se/=ae;F!==1&&(_.scale(F,F),se/=F),_.lineWidth=se;var me=0,ne;for(ne=0;ne<H;++ne){var oe=n[ne];if((0,t.isNum)(oe)){me+=K*oe*p/1e3;continue}var Ce=!1,fe=(oe.isSpace?G:0)+U,de=oe.fontChar,_e=oe.accent,Ae,be,ve,pe,ue=oe.width;if($){var ie,B,j;ie=oe.vmetric||Y,B=oe.vmetric?ie[1]:ue*.5,B=-B*Z,j=ie[2]*Z,ue=ie?-ie[0]:ue,Ae=B/F,be=(me+j)/F}else Ae=me/F,be=0;if(u.remeasure&&ue>0){var q=_.measureText(de).width*1e3/p*F;if(ue<q&&this.isFontSubpixelAAEnabled){var J=ue/q;Ce=!0,_.save(),_.scale(J,1),Ae/=J}else ue!==q&&(Ae+=(ue-q)/2e3*p/F)}this.contentVisible&&(oe.isInFont||u.missingFile)&&(ee&&!_e?_.fillText(de,Ae,be):(this.paintChar(de,Ae,be,te),_e&&(ve=Ae+p*_e.offset.x/F,pe=be-p*_e.offset.y/F,this.paintChar(_e.fontChar,ve,pe,te))));var re;$?re=ue*Z-fe*z:re=ue*Z+fe*z,me+=re,Ce&&_.restore()}$?s.y-=me:s.x+=me*V,_.restore()},showType3Text:function(n){var s=this.ctx,u=this.current,p=u.font,_=u.fontSize,F=u.fontDirection,U=p.vertical?1:-1,G=u.charSpacing,z=u.wordSpacing,V=u.textHScale*F,H=u.fontMatrix||t.FONT_IDENTITY_MATRIX,$=n.length,K=u.textRenderingMode===t.TextRenderingMode.INVISIBLE,Y,Z,ee,te;if(!(K||_===0)){for(this._cachedGetSinglePixelWidth=null,s.save(),s.transform.apply(s,u.textMatrix),s.translate(u.x,u.y),s.scale(V,F),Y=0;Y<$;++Y){if(Z=n[Y],(0,t.isNum)(Z)){te=U*Z*_/1e3,this.ctx.translate(te,0),u.x+=te*V;continue}var se=(Z.isSpace?z:0)+G,ae=p.charProcOperatorList[Z.operatorListId];if(!ae){(0,t.warn)(`Type3 character "${Z.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Z,this.save(),s.scale(_,_),s.transform.apply(s,H),this.executeOperatorList(ae),this.restore());var he=t.Util.applyTransform([Z.width,0],H);ee=he[0]*_+se,s.translate(ee,0),u.x+=ee*V}s.restore(),this.processingType3=null}},setCharWidth:function(n,s){},setCharWidthAndBounds:function(n,s,u,p,_,F){this.ctx.rect(u,p,_-u,F-p),this.clip(),this.endPath()},getColorN_Pattern:function(n){var s;if(n[0]==="TilingPattern"){var u=n[1],p=this.baseTransform||this.ctx.mozCurrentTransform.slice(),_={createCanvasGraphics:F=>new k(F,this.commonObjs,this.objs,this.canvasFactory,this.webGLContext)};s=new A.TilingPattern(n,u,this.ctx,_,p)}else s=(0,A.getShadingPatternFromIR)(n);return s},setStrokeColorN:function(){this.current.strokeColor=this.getColorN_Pattern(arguments)},setFillColorN:function(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0},setStrokeRGBColor:function(n,s,u){var p=t.Util.makeCssRgb(n,s,u);this.ctx.strokeStyle=p,this.current.strokeColor=p},setFillRGBColor:function(n,s,u){var p=t.Util.makeCssRgb(n,s,u);this.ctx.fillStyle=p,this.current.fillColor=p,this.current.patternFill=!1},shadingFill:function(n){if(this.contentVisible){var s=this.ctx;this.save();var u=(0,A.getShadingPatternFromIR)(n);s.fillStyle=u.getPattern(s,this,!0);var p=s.mozCurrentTransformInverse;if(p){var _=s.canvas,F=_.width,U=_.height,G=t.Util.applyTransform([0,0],p),z=t.Util.applyTransform([0,U],p),V=t.Util.applyTransform([F,0],p),H=t.Util.applyTransform([F,U],p),$=Math.min(G[0],z[0],V[0],H[0]),K=Math.min(G[1],z[1],V[1],H[1]),Y=Math.max(G[0],z[0],V[0],H[0]),Z=Math.max(G[1],z[1],V[1],H[1]);this.ctx.fillRect($,K,Y-$,Z-K)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.restore()}},beginInlineImage:function(){(0,t.unreachable)("Should not call beginInlineImage")},beginImageData:function(){(0,t.unreachable)("Should not call beginImageData")},paintFormXObjectBegin:function(n,s){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(n)&&n.length===6&&this.transform.apply(this,n),this.baseTransform=this.ctx.mozCurrentTransform,s)){var u=s[2]-s[0],p=s[3]-s[1];this.ctx.rect(s[0],s[1],u,p),this.clip(),this.endPath()}},paintFormXObjectEnd:function(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())},beginGroup:function(n){if(this.contentVisible){this.save();var s=this.ctx;n.isolated||(0,t.info)("TODO: Support non-isolated groups."),n.knockout&&(0,t.warn)("Knockout groups not supported.");var u=s.mozCurrentTransform;if(n.matrix&&s.transform.apply(s,n.matrix),!n.bbox)throw new Error("Bounding box is required.");var p=t.Util.getAxialAlignedBoundingBox(n.bbox,s.mozCurrentTransform),_=[0,0,s.canvas.width,s.canvas.height];p=t.Util.intersect(p,_)||[0,0,0,0];var F=Math.floor(p[0]),U=Math.floor(p[1]),G=Math.max(Math.ceil(p[2])-F,1),z=Math.max(Math.ceil(p[3])-U,1),V=1,H=1;G>R&&(V=G/R,G=R),z>R&&(H=z/R,z=R);var $="groupAt"+this.groupLevel;n.smask&&($+="_smask_"+this.smaskCounter++%2);var K=this.cachedCanvases.getCanvas($,G,z,!0),Y=K.context;Y.scale(1/V,1/H),Y.translate(-F,-U),Y.transform.apply(Y,u),n.smask?this.smaskStack.push({canvas:K.canvas,context:Y,offsetX:F,offsetY:U,scaleX:V,scaleY:H,subtype:n.smask.subtype,backdrop:n.smask.backdrop,transferMap:n.smask.transferMap||null,startTransformInverse:null}):(s.setTransform(1,0,0,1,0,0),s.translate(F,U),s.scale(V,H)),o(s,Y),this.ctx=Y,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(s),this.groupLevel++,this.current.activeSMask=null}},endGroup:function(n){if(this.contentVisible){this.groupLevel--;var s=this.ctx;this.ctx=this.groupStack.pop(),this.ctx.imageSmoothingEnabled!==void 0?this.ctx.imageSmoothingEnabled=!1:this.ctx.mozImageSmoothingEnabled=!1,n.smask?this.tempSMask=this.smaskStack.pop():this.ctx.drawImage(s.canvas,0,0),this.restore()}},beginAnnotations:function(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)},endAnnotations:function(){this.restore()},beginAnnotation:function(n,s,u){if(this.save(),f(this.ctx),this.current=new g,Array.isArray(n)&&n.length===4){var p=n[2]-n[0],_=n[3]-n[1];this.ctx.rect(n[0],n[1],p,_),this.clip(),this.endPath()}this.transform.apply(this,s),this.transform.apply(this,u)},endAnnotation:function(){this.restore()},paintImageMaskXObject:function(n){if(this.contentVisible){var s=this.ctx,u=n.width,p=n.height,_=this.current.fillColor,F=this.current.patternFill,U=this.processingType3;if(U&&U.compiled===void 0&&(u<=T&&p<=T?U.compiled=a({data:n.data,width:u,height:p}):U.compiled=null),U&&U.compiled){U.compiled(s);return}var G=this.cachedCanvases.getCanvas("maskCanvas",u,p),z=G.context;z.save(),i(z,n),z.globalCompositeOperation="source-in",z.fillStyle=F?_.getPattern(z,this):_,z.fillRect(0,0,u,p),z.restore(),this.paintInlineImageXObject(G.canvas)}},paintImageMaskXObjectRepeat(e,n,s=0,u=0,p,_){if(this.contentVisible){var F=e.width,U=e.height,G=this.current.fillColor,z=this.current.patternFill,V=this.cachedCanvases.getCanvas("maskCanvas",F,U),H=V.context;H.save(),i(H,e),H.globalCompositeOperation="source-in",H.fillStyle=z?G.getPattern(H,this):G,H.fillRect(0,0,F,U),H.restore();for(var $=this.ctx,K=0,Y=_.length;K<Y;K+=2)$.save(),$.transform(n,s,u,p,_[K],_[K+1]),$.scale(1,-1),$.drawImage(V.canvas,0,0,F,U,0,-1,1,1),$.restore()}},paintImageMaskXObjectGroup:function(n){if(this.contentVisible)for(var s=this.ctx,u=this.current.fillColor,p=this.current.patternFill,_=0,F=n.length;_<F;_++){var U=n[_],G=U.width,z=U.height,V=this.cachedCanvases.getCanvas("maskCanvas",G,z),H=V.context;H.save(),i(H,U),H.globalCompositeOperation="source-in",H.fillStyle=p?u.getPattern(H,this):u,H.fillRect(0,0,G,z),H.restore(),s.save(),s.transform.apply(s,U.transform),s.scale(1,-1),s.drawImage(V.canvas,0,0,G,z,0,-1,1,1),s.restore()}},paintImageXObject:function(n){if(!this.contentVisible)return;const s=n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n);if(!s){(0,t.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(s)},paintImageXObjectRepeat:function(n,s,u,p){if(!this.contentVisible)return;const _=n.startsWith("g_")?this.commonObjs.get(n):this.objs.get(n);if(!_){(0,t.warn)("Dependent image isn't ready yet");return}for(var F=_.width,U=_.height,G=[],z=0,V=p.length;z<V;z+=2)G.push({transform:[s,0,0,u,p[z],p[z+1]],x:0,y:0,w:F,h:U});this.paintInlineImageXObjectGroup(_,G)},paintInlineImageXObject:function(n){if(this.contentVisible){var s=n.width,u=n.height,p=this.ctx;this.save(),p.scale(1/s,-1/u);var _=p.mozCurrentTransformInverse,F=_[0],U=_[1],G=Math.max(Math.sqrt(F*F+U*U),1),z=_[2],V=_[3],H=Math.max(Math.sqrt(z*z+V*V),1),$,K;if(typeof HTMLElement=="function"&&n instanceof HTMLElement||!n.data)$=n;else{K=this.cachedCanvases.getCanvas("inlineImage",s,u);var Y=K.context;d(Y,n,this.current.transferMaps),$=K.canvas}for(var Z=s,ee=u,te="prescale1";G>2&&Z>1||H>2&&ee>1;){var se=Z,ae=ee;G>2&&Z>1&&(se=Math.ceil(Z/2),G/=Z/se),H>2&&ee>1&&(ae=Math.ceil(ee/2),H/=ee/ae),K=this.cachedCanvases.getCanvas(te,se,ae),Y=K.context,Y.clearRect(0,0,se,ae),Y.drawImage($,0,0,Z,ee,0,0,se,ae),$=K.canvas,Z=se,ee=ae,te=te==="prescale1"?"prescale2":"prescale1"}if(p.drawImage($,0,0,Z,ee,0,-u,s,u),this.imageLayer){var he=this.getCanvasPosition(0,-u);this.imageLayer.appendImage({imgData:n,left:he[0],top:he[1],width:s/_[0],height:u/_[3]})}this.restore()}},paintInlineImageXObjectGroup:function(n,s){if(this.contentVisible){var u=this.ctx,p=n.width,_=n.height,F=this.cachedCanvases.getCanvas("inlineImage",p,_),U=F.context;d(U,n,this.current.transferMaps);for(var G=0,z=s.length;G<z;G++){var V=s[G];if(u.save(),u.transform.apply(u,V.transform),u.scale(1,-1),u.drawImage(F.canvas,V.x,V.y,V.w,V.h,0,-1,1,1),this.imageLayer){var H=this.getCanvasPosition(V.x,V.y);this.imageLayer.appendImage({imgData:n,left:H[0],top:H[1],width:p,height:_})}u.restore()}}},paintSolidColorImageMask:function(){this.contentVisible&&this.ctx.fillRect(0,0,1,1)},markPoint:function(n){},markPointProps:function(n,s){},beginMarkedContent:function(n){this.markedContentStack.push({visible:!0})},beginMarkedContentProps:function(n,s){n==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(s)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()},endMarkedContent:function(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()},beginCompat:function(){},endCompat:function(){},consumePath:function(){var n=this.ctx;this.pendingClip&&(this.pendingClip===W?n.clip("evenodd"):n.clip(),this.pendingClip=null),n.beginPath()},getSinglePixelWidth(e){if(this._cachedGetSinglePixelWidth===null){const n=this.ctx.mozCurrentTransformInverse;this._cachedGetSinglePixelWidth=Math.sqrt(Math.max(n[0]*n[0]+n[1]*n[1],n[2]*n[2]+n[3]*n[3]))}return this._cachedGetSinglePixelWidth},getCanvasPosition:function(n,s){var u=this.ctx.mozCurrentTransform;return[u[0]*n+u[2]*s+u[4],u[1]*n+u[3]*s+u[5]]},isContentVisible:function(){for(let n=this.markedContentStack.length-1;n>=0;n--)if(!this.markedContentStack[n].visible)return!1;return!0}};for(var L in t.OPS)k.prototype[t.OPS[L]]=k.prototype[L];return k}();r.CanvasGraphics=m},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.getShadingPatternFromIR=R,r.TilingPattern=void 0;var t=y(2),A={};function w(T,h){if(!h||typeof Path2D>"u")return;const C=h[2]-h[0],I=h[3]-h[1],a=new Path2D;a.rect(h[0],h[1],C,I),T.clip(a)}A.RadialAxial={fromIR:function(h){var C=h[1],I=h[2],a=h[3],g=h[4],m=h[5],E=h[6],S=h[7];return{type:"Pattern",getPattern:function(k){w(k,I);var d;C==="axial"?d=k.createLinearGradient(g[0],g[1],m[0],m[1]):C==="radial"&&(d=k.createRadialGradient(g[0],g[1],E,m[0],m[1],S));for(var i=0,o=a.length;i<o;++i){var f=a[i];d.addColorStop(f[0],f[1])}return d}}}};var D=function(){function h(a,g,m,E,S,x,k,d){var i=g.coords,o=g.colors,f=a.data,c=a.width*4,l;i[m+1]>i[E+1]&&(l=m,m=E,E=l,l=x,x=k,k=l),i[E+1]>i[S+1]&&(l=E,E=S,S=l,l=k,k=d,d=l),i[m+1]>i[E+1]&&(l=m,m=E,E=l,l=x,x=k,k=l);var v=(i[m]+g.offsetX)*g.scaleX,P=(i[m+1]+g.offsetY)*g.scaleY,N=(i[E]+g.offsetX)*g.scaleX,M=(i[E+1]+g.offsetY)*g.scaleY,O=(i[S]+g.offsetX)*g.scaleX,X=(i[S+1]+g.offsetY)*g.scaleY;if(!(P>=X))for(var W=o[x],L=o[x+1],e=o[x+2],n=o[k],s=o[k+1],u=o[k+2],p=o[d],_=o[d+1],F=o[d+2],U=Math.round(P),G=Math.round(X),z,V,H,$,K,Y,Z,ee,te=U;te<=G;te++){if(te<M){let oe;te<P?oe=0:P===M?oe=1:oe=(P-te)/(P-M),z=v-(v-N)*oe,V=W-(W-n)*oe,H=L-(L-s)*oe,$=e-(e-u)*oe}else{let oe;te>X?oe=1:M===X?oe=0:oe=(M-te)/(M-X),z=N-(N-O)*oe,V=n-(n-p)*oe,H=s-(s-_)*oe,$=u-(u-F)*oe}let ne;te<P?ne=0:te>X?ne=1:ne=(P-te)/(P-X),K=v-(v-O)*ne,Y=W-(W-p)*ne,Z=L-(L-_)*ne,ee=e-(e-F)*ne;for(var se=Math.round(Math.min(z,K)),ae=Math.round(Math.max(z,K)),he=c*te+se*4,me=se;me<=ae;me++)ne=(z-me)/(z-K),ne<0?ne=0:ne>1&&(ne=1),f[he++]=V-(V-Y)*ne|0,f[he++]=H-(H-Z)*ne|0,f[he++]=$-($-ee)*ne|0,f[he++]=255}}function C(a,g,m){var E=g.coords,S=g.colors,x,k;switch(g.type){case"lattice":var d=g.verticesPerRow,i=Math.floor(E.length/d)-1,o=d-1;for(x=0;x<i;x++)for(var f=x*d,c=0;c<o;c++,f++)h(a,m,E[f],E[f+1],E[f+d],S[f],S[f+1],S[f+d]),h(a,m,E[f+d+1],E[f+1],E[f+d],S[f+d+1],S[f+1],S[f+d]);break;case"triangles":for(x=0,k=E.length;x<k;x+=3)h(a,m,E[x],E[x+1],E[x+2],S[x],S[x+1],S[x+2]);break;default:throw new Error("illegal figure")}}function I(a,g,m,E,S,x,k,d){var i=1.1,o=3e3,f=2,c=Math.floor(a[0]),l=Math.floor(a[1]),v=Math.ceil(a[2])-c,P=Math.ceil(a[3])-l,N=Math.min(Math.ceil(Math.abs(v*g[0]*i)),o),M=Math.min(Math.ceil(Math.abs(P*g[1]*i)),o),O=v/N,X=P/M,W={coords:m,colors:E,offsetX:-c,offsetY:-l,scaleX:1/O,scaleY:1/X},L=N+f*2,e=M+f*2,n,s,u,p;if(d.isEnabled)n=d.drawFigures({width:N,height:M,backgroundColor:x,figures:S,context:W}),s=k.getCanvas("mesh",L,e,!1),s.context.drawImage(n,f,f),n=s.canvas;else{s=k.getCanvas("mesh",L,e,!1);var _=s.context,F=_.createImageData(N,M);if(x){var U=F.data;for(u=0,p=U.length;u<p;u+=4)U[u]=x[0],U[u+1]=x[1],U[u+2]=x[2],U[u+3]=255}for(u=0;u<S.length;u++)C(F,S[u],W);_.putImageData(F,f,f),n=s.canvas}return{canvas:n,offsetX:c-f*O,offsetY:l-f*X,scaleX:O,scaleY:X}}return I}();A.Mesh={fromIR:function(h){var C=h[2],I=h[3],a=h[4],g=h[5],m=h[6],E=h[7],S=h[8];return{type:"Pattern",getPattern:function(k,d,i){w(k,E);var o;if(i)o=t.Util.singularValueDecompose2dScale(k.mozCurrentTransform);else if(o=t.Util.singularValueDecompose2dScale(d.baseTransform),m){var f=t.Util.singularValueDecompose2dScale(m);o=[o[0]*f[0],o[1]*f[1]]}var c=D(g,o,C,I,a,i?null:S,d.cachedCanvases,d.webGLContext);return i||(k.setTransform.apply(k,d.baseTransform),m&&k.transform.apply(k,m)),k.translate(c.offsetX,c.offsetY),k.scale(c.scaleX,c.scaleY),k.createPattern(c.canvas,"no-repeat")}}}},A.Dummy={fromIR:function(){return{type:"Pattern",getPattern:function(){return"hotpink"}}}};function R(T){var h=A[T[0]];if(!h)throw new Error(`Unknown IR type: ${T[0]}`);return h.fromIR(T)}var b=function(){var h={COLORED:1,UNCOLORED:2},C=3e3;function I(a,g,m,E,S){this.operatorList=a[2],this.matrix=a[3]||[1,0,0,1,0,0],this.bbox=a[4],this.xstep=a[5],this.ystep=a[6],this.paintType=a[7],this.tilingType=a[8],this.color=g,this.canvasGraphicsFactory=E,this.baseTransform=S,this.type="Pattern",this.ctx=m}return I.prototype={createPatternCanvas:function(g){var m=this.operatorList,E=this.bbox,S=this.xstep,x=this.ystep,k=this.paintType,d=this.tilingType,i=this.color,o=this.canvasGraphicsFactory;(0,t.info)("TilingType: "+d);var f=E[0],c=E[1],l=E[2],v=E[3],P=t.Util.singularValueDecompose2dScale(this.matrix),N=t.Util.singularValueDecompose2dScale(this.baseTransform),M=[P[0]*N[0],P[1]*N[1]],O=this.getSizeAndScale(S,this.ctx.canvas.width,M[0]),X=this.getSizeAndScale(x,this.ctx.canvas.height,M[1]),W=g.cachedCanvases.getCanvas("pattern",O.size,X.size,!0),L=W.context,e=o.createCanvasGraphics(L);return e.groupLevel=g.groupLevel,this.setFillAndStrokeStyleToContext(e,k,i),e.transform(O.scale,0,0,X.scale,0,0),e.transform(1,0,0,1,-f,-c),this.clipBbox(e,E,f,c,l,v),e.executeOperatorList(m),this.ctx.transform(1,0,0,1,f,c),this.ctx.scale(1/O.scale,1/X.scale),W.canvas},getSizeAndScale:function(g,m,E){g=Math.abs(g);var S=Math.max(C,m),x=Math.ceil(g*E);return x>=S?x=S:E=x/g,{scale:E,size:x}},clipBbox:function(g,m,E,S,x,k){if(Array.isArray(m)&&m.length===4){var d=x-E,i=k-S;g.ctx.rect(E,S,d,i),g.clip(),g.endPath()}},setFillAndStrokeStyleToContext:function(g,m,E){const S=g.ctx,x=g.current;switch(m){case h.COLORED:var k=this.ctx;S.fillStyle=k.fillStyle,S.strokeStyle=k.strokeStyle,x.fillColor=k.fillStyle,x.strokeColor=k.strokeStyle;break;case h.UNCOLORED:var d=t.Util.makeCssRgb(E[0],E[1],E[2]);S.fillStyle=d,S.strokeStyle=d,x.fillColor=d,x.strokeColor=d;break;default:throw new t.FormatError(`Unsupported paint type: ${m}`)}},getPattern:function(g,m){g=this.ctx,g.setTransform.apply(g,this.baseTransform),g.transform.apply(g,this.matrix);var E=this.createPatternCanvas(m);return g.createPattern(E,"repeat")}},I}();r.TilingPattern=b},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.GlobalWorkerOptions=void 0;const t=Object.create(null);r.GlobalWorkerOptions=t,t.workerPort=t.workerPort===void 0?null:t.workerPort,t.workerSrc=t.workerSrc===void 0?"":t.workerSrc},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.MessageHandler=void 0;var t=y(2);const A={UNKNOWN:0,DATA:1,ERROR:2},w={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function D(b){if(typeof b!="object"||b===null)return b;switch(b.name){case"AbortException":return new t.AbortException(b.message);case"MissingPDFException":return new t.MissingPDFException(b.message);case"UnexpectedResponseException":return new t.UnexpectedResponseException(b.message,b.status);case"UnknownErrorException":return new t.UnknownErrorException(b.message,b.details);default:return new t.UnknownErrorException(b.message,b.toString())}}class R{constructor(T,h,C){this.sourceName=T,this.targetName=h,this.comObj=C,this.callbackId=1,this.streamId=1,this.postMessageTransfers=!0,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=I=>{const a=I.data;if(a.targetName!==this.sourceName)return;if(a.stream){this._processStreamMessage(a);return}if(a.callback){const m=a.callbackId,E=this.callbackCapabilities[m];if(!E)throw new Error(`Cannot resolve callback ${m}`);if(delete this.callbackCapabilities[m],a.callback===A.DATA)E.resolve(a.data);else if(a.callback===A.ERROR)E.reject(D(a.reason));else throw new Error("Unexpected callback case");return}const g=this.actionHandler[a.action];if(!g)throw new Error(`Unknown action from worker: ${a.action}`);if(a.callbackId){const m=this.sourceName,E=a.sourceName;new Promise(function(S){S(g(a.data))}).then(function(S){C.postMessage({sourceName:m,targetName:E,callback:A.DATA,callbackId:a.callbackId,data:S})},function(S){C.postMessage({sourceName:m,targetName:E,callback:A.ERROR,callbackId:a.callbackId,reason:D(S)})});return}if(a.streamId){this._createStreamSink(a);return}g(a.data)},C.addEventListener("message",this._onComObjOnMessage)}on(T,h){const C=this.actionHandler;if(C[T])throw new Error(`There is already an actionName called "${T}"`);C[T]=h}send(T,h,C){this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,data:h},C)}sendWithPromise(T,h,C){const I=this.callbackId++,a=(0,t.createPromiseCapability)();this.callbackCapabilities[I]=a;try{this._postMessage({sourceName:this.sourceName,targetName:this.targetName,action:T,callbackId:I,data:h},C)}catch(g){a.reject(g)}return a.promise}sendWithStream(T,h,C,I){const a=this.streamId++,g=this.sourceName,m=this.targetName,E=this.comObj;return new ReadableStream({start:S=>{const x=(0,t.createPromiseCapability)();return this.streamControllers[a]={controller:S,startCall:x,pullCall:null,cancelCall:null,isClosed:!1},this._postMessage({sourceName:g,targetName:m,action:T,streamId:a,data:h,desiredSize:S.desiredSize},I),x.promise},pull:S=>{const x=(0,t.createPromiseCapability)();return this.streamControllers[a].pullCall=x,E.postMessage({sourceName:g,targetName:m,stream:w.PULL,streamId:a,desiredSize:S.desiredSize}),x.promise},cancel:S=>{(0,t.assert)(S instanceof Error,"cancel must have a valid reason");const x=(0,t.createPromiseCapability)();return this.streamControllers[a].cancelCall=x,this.streamControllers[a].isClosed=!0,E.postMessage({sourceName:g,targetName:m,stream:w.CANCEL,streamId:a,reason:D(S)}),x.promise}},C)}_createStreamSink(T){const h=this,C=this.actionHandler[T.action],I=T.streamId,a=this.sourceName,g=T.sourceName,m=this.comObj,E={enqueue(S,x=1,k){if(this.isCancelled)return;const d=this.desiredSize;this.desiredSize-=x,d>0&&this.desiredSize<=0&&(this.sinkCapability=(0,t.createPromiseCapability)(),this.ready=this.sinkCapability.promise),h._postMessage({sourceName:a,targetName:g,stream:w.ENQUEUE,streamId:I,chunk:S},k)},close(){this.isCancelled||(this.isCancelled=!0,m.postMessage({sourceName:a,targetName:g,stream:w.CLOSE,streamId:I}),delete h.streamSinks[I])},error(S){(0,t.assert)(S instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,m.postMessage({sourceName:a,targetName:g,stream:w.ERROR,streamId:I,reason:D(S)}))},sinkCapability:(0,t.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:T.desiredSize,ready:null};E.sinkCapability.resolve(),E.ready=E.sinkCapability.promise,this.streamSinks[I]=E,new Promise(function(S){S(C(T.data,E))}).then(function(){m.postMessage({sourceName:a,targetName:g,stream:w.START_COMPLETE,streamId:I,success:!0})},function(S){m.postMessage({sourceName:a,targetName:g,stream:w.START_COMPLETE,streamId:I,reason:D(S)})})}_processStreamMessage(T){const h=T.streamId,C=this.sourceName,I=T.sourceName,a=this.comObj;switch(T.stream){case w.START_COMPLETE:T.success?this.streamControllers[h].startCall.resolve():this.streamControllers[h].startCall.reject(D(T.reason));break;case w.PULL_COMPLETE:T.success?this.streamControllers[h].pullCall.resolve():this.streamControllers[h].pullCall.reject(D(T.reason));break;case w.PULL:if(!this.streamSinks[h]){a.postMessage({sourceName:C,targetName:I,stream:w.PULL_COMPLETE,streamId:h,success:!0});break}this.streamSinks[h].desiredSize<=0&&T.desiredSize>0&&this.streamSinks[h].sinkCapability.resolve(),this.streamSinks[h].desiredSize=T.desiredSize;const{onPull:g}=this.streamSinks[T.streamId];new Promise(function(E){E(g&&g())}).then(function(){a.postMessage({sourceName:C,targetName:I,stream:w.PULL_COMPLETE,streamId:h,success:!0})},function(E){a.postMessage({sourceName:C,targetName:I,stream:w.PULL_COMPLETE,streamId:h,reason:D(E)})});break;case w.ENQUEUE:if((0,t.assert)(this.streamControllers[h],"enqueue should have stream controller"),this.streamControllers[h].isClosed)break;this.streamControllers[h].controller.enqueue(T.chunk);break;case w.CLOSE:if((0,t.assert)(this.streamControllers[h],"close should have stream controller"),this.streamControllers[h].isClosed)break;this.streamControllers[h].isClosed=!0,this.streamControllers[h].controller.close(),this._deleteStreamController(h);break;case w.ERROR:(0,t.assert)(this.streamControllers[h],"error should have stream controller"),this.streamControllers[h].controller.error(D(T.reason)),this._deleteStreamController(h);break;case w.CANCEL_COMPLETE:T.success?this.streamControllers[h].cancelCall.resolve():this.streamControllers[h].cancelCall.reject(D(T.reason)),this._deleteStreamController(h);break;case w.CANCEL:if(!this.streamSinks[h])break;const{onCancel:m}=this.streamSinks[T.streamId];new Promise(function(E){E(m&&m(D(T.reason)))}).then(function(){a.postMessage({sourceName:C,targetName:I,stream:w.CANCEL_COMPLETE,streamId:h,success:!0})},function(E){a.postMessage({sourceName:C,targetName:I,stream:w.CANCEL_COMPLETE,streamId:h,reason:D(E)})}),this.streamSinks[h].sinkCapability.reject(D(T.reason)),this.streamSinks[h].isCancelled=!0,delete this.streamSinks[h];break;default:throw new Error("Unexpected stream case")}}async _deleteStreamController(T){await Promise.allSettled([this.streamControllers[T].startCall,this.streamControllers[T].pullCall,this.streamControllers[T].cancelCall].map(function(h){return h&&h.promise})),delete this.streamControllers[T]}_postMessage(T,h){h&&this.postMessageTransfers?this.comObj.postMessage(T,h):this.comObj.postMessage(T)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}r.MessageHandler=R},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.Metadata=void 0;var t=y(2),A=y(15);class w{constructor(R){(0,t.assert)(typeof R=="string","Metadata: input is not a string"),R=this._repair(R);const T=new A.SimpleXMLParser().parseFromString(R);this._metadataMap=new Map,T&&this._parse(T)}_repair(R){return R.replace(/^[^<]+/,"").replace(/>\\376\\377([^<]+)/g,function(b,T){const h=T.replace(/\\([0-3])([0-7])([0-7])/g,function(I,a,g,m){return String.fromCharCode(a*64+g*8+m*1)}).replace(/&(amp|apos|gt|lt|quot);/g,function(I,a){switch(a){case"amp":return"&";case"apos":return"'";case"gt":return">";case"lt":return"<";case"quot":return'"'}throw new Error(`_repair: ${a} isn't defined.`)});let C="";for(let I=0,a=h.length;I<a;I+=2){const g=h.charCodeAt(I)*256+h.charCodeAt(I+1);g>=32&&g<127&&g!==60&&g!==62&&g!==38?C+=String.fromCharCode(g):C+="&#x"+(65536+g).toString(16).substring(1)+";"}return">"+C})}_parse(R){let b=R.documentElement;if(b.nodeName.toLowerCase()!=="rdf:rdf")for(b=b.firstChild;b&&b.nodeName.toLowerCase()!=="rdf:rdf";)b=b.nextSibling;const T=b?b.nodeName.toLowerCase():null;if(!b||T!=="rdf:rdf"||!b.hasChildNodes())return;const h=b.childNodes;for(let C=0,I=h.length;C<I;C++){const a=h[C];if(a.nodeName.toLowerCase()==="rdf:description"){for(let g=0,m=a.childNodes.length;g<m;g++)if(a.childNodes[g].nodeName.toLowerCase()!=="#text"){const E=a.childNodes[g],S=E.nodeName.toLowerCase();this._metadataMap.set(S,E.textContent.trim())}}}}get(R){return this._metadataMap.has(R)?this._metadataMap.get(R):null}getAll(){return Object.fromEntries(this._metadataMap)}has(R){return this._metadataMap.has(R)}}r.Metadata=w},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.SimpleXMLParser=void 0;const t={NoError:0,EndOfDocument:-1,UnterminatedCdat:-2,UnterminatedXmlDeclaration:-3,UnterminatedDoctypeDeclaration:-4,UnterminatedComment:-5,MalformedElement:-6,OutOfMemory:-7,UnterminatedAttributeValue:-8,UnterminatedElement:-9,ElementNeverBegun:-10};function A(T,h){const C=T[h];return C===" "||C===`
`||C==="\r"||C==="	"}function w(T){for(let h=0,C=T.length;h<C;h++)if(!A(T,h))return!1;return!0}class D{_resolveEntities(h){return h.replace(/&([^;]+);/g,(C,I)=>{if(I.substring(0,2)==="#x")return String.fromCharCode(parseInt(I.substring(2),16));if(I.substring(0,1)==="#")return String.fromCharCode(parseInt(I.substring(1),10));switch(I){case"lt":return"<";case"gt":return">";case"amp":return"&";case"quot":return'"'}return this.onResolveEntity(I)})}_parseContent(h,C){const I=[];let a=C;function g(){for(;a<h.length&&A(h,a);)++a}for(;a<h.length&&!A(h,a)&&h[a]!==">"&&h[a]!=="/";)++a;const m=h.substring(C,a);for(g();a<h.length&&h[a]!==">"&&h[a]!=="/"&&h[a]!=="?";){g();let E="",S="";for(;a<h.length&&!A(h,a)&&h[a]!=="=";)E+=h[a],++a;if(g(),h[a]!=="=")return null;++a,g();const x=h[a];if(x!=='"'&&x!=="'")return null;const k=h.indexOf(x,++a);if(k<0)return null;S=h.substring(a,k),I.push({name:E,value:this._resolveEntities(S)}),a=k+1,g()}return{name:m,attributes:I,parsed:a-C}}_parseProcessingInstruction(h,C){let I=C;function a(){for(;I<h.length&&A(h,I);)++I}for(;I<h.length&&!A(h,I)&&h[I]!==">"&&h[I]!=="/";)++I;const g=h.substring(C,I);a();const m=I;for(;I<h.length&&(h[I]!=="?"||h[I+1]!==">");)++I;const E=h.substring(m,I);return{name:g,value:E,parsed:I-C}}parseXml(h){let C=0;for(;C<h.length;){const I=h[C];let a=C;if(I==="<"){++a;const g=h[a];let m;switch(g){case"/":if(++a,m=h.indexOf(">",a),m<0){this.onError(t.UnterminatedElement);return}this.onEndElement(h.substring(a,m)),a=m+1;break;case"?":++a;const E=this._parseProcessingInstruction(h,a);if(h.substring(a+E.parsed,a+E.parsed+2)!=="?>"){this.onError(t.UnterminatedXmlDeclaration);return}this.onPi(E.name,E.value),a+=E.parsed+2;break;case"!":if(h.substring(a+1,a+3)==="--"){if(m=h.indexOf("-->",a+3),m<0){this.onError(t.UnterminatedComment);return}this.onComment(h.substring(a+3,m)),a=m+3}else if(h.substring(a+1,a+8)==="[CDATA["){if(m=h.indexOf("]]>",a+8),m<0){this.onError(t.UnterminatedCdat);return}this.onCdata(h.substring(a+8,m)),a=m+3}else if(h.substring(a+1,a+8)==="DOCTYPE"){const k=h.indexOf("[",a+8);let d=!1;if(m=h.indexOf(">",a+8),m<0){this.onError(t.UnterminatedDoctypeDeclaration);return}if(k>0&&m>k){if(m=h.indexOf("]>",a+8),m<0){this.onError(t.UnterminatedDoctypeDeclaration);return}d=!0}const i=h.substring(a+8,m+(d?1:0));this.onDoctype(i),a=m+(d?2:1)}else{this.onError(t.MalformedElement);return}break;default:const S=this._parseContent(h,a);if(S===null){this.onError(t.MalformedElement);return}let x=!1;if(h.substring(a+S.parsed,a+S.parsed+2)==="/>")x=!0;else if(h.substring(a+S.parsed,a+S.parsed+1)!==">"){this.onError(t.UnterminatedElement);return}this.onBeginElement(S.name,S.attributes,x),a+=S.parsed+(x?2:1);break}}else{for(;a<h.length&&h[a]!=="<";)a++;const g=h.substring(C,a);this.onText(this._resolveEntities(g))}C=a}}onResolveEntity(h){return`&${h};`}onPi(h,C){}onComment(h){}onCdata(h){}onDoctype(h){}onText(h){}onBeginElement(h,C,I){}onEndElement(h){}onError(h){}}class R{constructor(h,C){this.nodeName=h,this.nodeValue=C,Object.defineProperty(this,"parentNode",{value:null,writable:!0})}get firstChild(){return this.childNodes&&this.childNodes[0]}get nextSibling(){const h=this.parentNode.childNodes;if(!h)return;const C=h.indexOf(this);if(C!==-1)return h[C+1]}get textContent(){return this.childNodes?this.childNodes.map(function(h){return h.textContent}).join(""):this.nodeValue||""}hasChildNodes(){return this.childNodes&&this.childNodes.length>0}}class b extends D{constructor(){super(),this._currentFragment=null,this._stack=null,this._errorCode=t.NoError}parseFromString(h){if(this._currentFragment=[],this._stack=[],this._errorCode=t.NoError,this.parseXml(h),this._errorCode!==t.NoError)return;const[C]=this._currentFragment;if(C)return{documentElement:C}}onResolveEntity(h){switch(h){case"apos":return"'"}return super.onResolveEntity(h)}onText(h){if(w(h))return;const C=new R("#text",h);this._currentFragment.push(C)}onCdata(h){const C=new R("#text",h);this._currentFragment.push(C)}onBeginElement(h,C,I){const a=new R(h);a.childNodes=[],this._currentFragment.push(a),!I&&(this._stack.push(this._currentFragment),this._currentFragment=a.childNodes)}onEndElement(h){this._currentFragment=this._stack.pop()||[];const C=this._currentFragment[this._currentFragment.length-1];if(C)for(let I=0,a=C.childNodes.length;I<a;I++)C.childNodes[I].parentNode=C}onError(h){this._errorCode=h}}r.SimpleXMLParser=b},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.OptionalContentConfig=void 0;var t=y(2);class A{constructor(R,b){this.visible=!0,this.name=R,this.intent=b}}class w{constructor(R){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,R!==null){this.name=R.name,this.creator=R.creator,this._order=R.order;for(const b of R.groups)this._groups.set(b.id,new A(b.name,b.intent));if(R.baseState==="OFF")for(const b of this._groups)b.visible=!1;for(const b of R.on)this._groups.get(b).visible=!0;for(const b of R.off)this._groups.get(b).visible=!1}}isVisible(R){if(R.type==="OCG")return this._groups.has(R.id)?this._groups.get(R.id).visible:((0,t.warn)(`Optional content group not found: ${R.id}`),!0);if(R.type==="OCMD"){if(R.expression&&(0,t.warn)("Visibility expression not supported yet."),!R.policy||R.policy==="AnyOn"){for(const b of R.ids){if(!this._groups.has(b))return(0,t.warn)(`Optional content group not found: ${b}`),!0;if(this._groups.get(b).visible)return!0}return!1}else if(R.policy==="AllOn"){for(const b of R.ids){if(!this._groups.has(b))return(0,t.warn)(`Optional content group not found: ${b}`),!0;if(!this._groups.get(b).visible)return!1}return!0}else if(R.policy==="AnyOff"){for(const b of R.ids){if(!this._groups.has(b))return(0,t.warn)(`Optional content group not found: ${b}`),!0;if(!this._groups.get(b).visible)return!0}return!1}else if(R.policy==="AllOff"){for(const b of R.ids){if(!this._groups.has(b))return(0,t.warn)(`Optional content group not found: ${b}`),!0;if(this._groups.get(b).visible)return!1}return!0}return(0,t.warn)(`Unknown optional content policy ${R.policy}.`),!0}return(0,t.warn)(`Unknown group type ${R.type}.`),!0}setVisibility(R,b=!0){if(!this._groups.has(R)){(0,t.warn)(`Optional content group not found: ${R}`);return}this._groups.get(R).visible=!!b}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size?Object.fromEntries(this._groups):null}getGroup(R){return this._groups.get(R)||null}}r.OptionalContentConfig=w},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.PDFDataTransportStream=void 0;var t=y(2);class A{constructor(b,T){(0,t.assert)(T,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=b.progressiveDone||!1;const h=b.initialData;if(h&&h.length>0){const C=new Uint8Array(h).buffer;this._queuedChunks.push(C)}this._pdfDataRangeTransport=T,this._isStreamingSupported=!b.disableStream,this._isRangeSupported=!b.disableRange,this._contentLength=b.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((C,I)=>{this._onReceiveData({begin:C,chunk:I})}),this._pdfDataRangeTransport.addProgressListener((C,I)=>{this._onProgress({loaded:C,total:I})}),this._pdfDataRangeTransport.addProgressiveReadListener(C=>{this._onReceiveData({chunk:C})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(b){const T=new Uint8Array(b.chunk).buffer;if(b.begin===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(T):this._queuedChunks.push(T);else{const h=this._rangeReaders.some(function(C){return C._begin!==b.begin?!1:(C._enqueue(T),!0)});(0,t.assert)(h,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}_onProgress(b){if(b.total===void 0){const T=this._rangeReaders[0];T&&T.onProgress&&T.onProgress({loaded:b.loaded})}else{const T=this._fullRequestReader;T&&T.onProgress&&T.onProgress({loaded:b.loaded,total:b.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(b){const T=this._rangeReaders.indexOf(b);T>=0&&this._rangeReaders.splice(T,1)}getFullReader(){(0,t.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const b=this._queuedChunks;return this._queuedChunks=null,new w(this,b,this._progressiveDone)}getRangeReader(b,T){if(T<=this._progressiveDataLength)return null;const h=new D(this,b,T);return this._pdfDataRangeTransport.requestDataRange(b,T),this._rangeReaders.push(h),h}cancelAllRequests(b){this._fullRequestReader&&this._fullRequestReader.cancel(b),this._rangeReaders.slice(0).forEach(function(h){h.cancel(b)}),this._pdfDataRangeTransport.abort()}}r.PDFDataTransportStream=A;class w{constructor(b,T,h=!1){this._stream=b,this._done=h||!1,this._filename=null,this._queuedChunks=T||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),b._fullRequestReader=this,this.onProgress=null}_enqueue(b){this._done||(this._requests.length>0?this._requests.shift().resolve({value:b,done:!1}):this._queuedChunks.push(b),this._loaded+=b.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const b=(0,t.createPromiseCapability)();return this._requests.push(b),b.promise}cancel(b){this._done=!0,this._requests.forEach(function(T){T.resolve({value:void 0,done:!0})}),this._requests=[]}progressiveDone(){this._done||(this._done=!0)}}class D{constructor(b,T,h){this._stream=b,this._begin=T,this._end=h,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(b){this._done||(this._requests.length===0?this._queuedChunk=b:(this._requests.shift().resolve({value:b,done:!1}),this._requests.forEach(function(h){h.resolve({value:void 0,done:!0})}),this._requests=[]),this._done=!0,this._stream._removeRangeReader(this))}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const T=this._queuedChunk;return this._queuedChunk=null,{value:T,done:!1}}if(this._done)return{value:void 0,done:!0};const b=(0,t.createPromiseCapability)();return this._requests.push(b),b.promise}cancel(b){this._done=!0,this._requests.forEach(function(T){T.resolve({value:void 0,done:!0})}),this._requests=[],this._stream._removeRangeReader(this)}}},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.WebGLContext=void 0;var t=y(2);class A{constructor({enable:R=!1}){this._enabled=R===!0}get isEnabled(){let R=this._enabled;return R&&(R=w.tryInitGL()),(0,t.shadow)(this,"isEnabled",R)}composeSMask({layer:R,mask:b,properties:T}){return w.composeSMask(R,b,T)}drawFigures({width:R,height:b,backgroundColor:T,figures:h,context:C}){return w.drawFigures(R,b,T,h,C)}clear(){w.cleanup()}}r.WebGLContext=A;var w=function(){function R(l,v,P){var N=l.createShader(P);l.shaderSource(N,v),l.compileShader(N);var M=l.getShaderParameter(N,l.COMPILE_STATUS);if(!M){var O=l.getShaderInfoLog(N);throw new Error("Error during shader compilation: "+O)}return N}function b(l,v){return R(l,v,l.VERTEX_SHADER)}function T(l,v){return R(l,v,l.FRAGMENT_SHADER)}function h(l,v){for(var P=l.createProgram(),N=0,M=v.length;N<M;++N)l.attachShader(P,v[N]);l.linkProgram(P);var O=l.getProgramParameter(P,l.LINK_STATUS);if(!O){var X=l.getProgramInfoLog(P);throw new Error("Error during program linking: "+X)}return P}function C(l,v,P){l.activeTexture(P);var N=l.createTexture();return l.bindTexture(l.TEXTURE_2D,N),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_S,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_WRAP_T,l.CLAMP_TO_EDGE),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MIN_FILTER,l.NEAREST),l.texParameteri(l.TEXTURE_2D,l.TEXTURE_MAG_FILTER,l.NEAREST),l.texImage2D(l.TEXTURE_2D,0,l.RGBA,l.RGBA,l.UNSIGNED_BYTE,v),N}var I,a;function g(){I||(a=document.createElement("canvas"),I=a.getContext("webgl",{premultipliedalpha:!1}))}var m="	  attribute vec2 a_position;                                    	  attribute vec2 a_texCoord;                                    	                                                                	  uniform vec2 u_resolution;                                    	                                                                	  varying vec2 v_texCoord;                                      	                                                                	  void main() {                                                 	    vec2 clipSpace = (a_position / u_resolution) * 2.0 - 1.0;   	    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);          	                                                                	    v_texCoord = a_texCoord;                                    	  }                                                             ",E="	  precision mediump float;                                      	                                                                	  uniform vec4 u_backdrop;                                      	  uniform int u_subtype;                                        	  uniform sampler2D u_image;                                    	  uniform sampler2D u_mask;                                     	                                                                	  varying vec2 v_texCoord;                                      	                                                                	  void main() {                                                 	    vec4 imageColor = texture2D(u_image, v_texCoord);           	    vec4 maskColor = texture2D(u_mask, v_texCoord);             	    if (u_backdrop.a > 0.0) {                                   	      maskColor.rgb = maskColor.rgb * maskColor.a +             	                      u_backdrop.rgb * (1.0 - maskColor.a);     	    }                                                           	    float lum;                                                  	    if (u_subtype == 0) {                                       	      lum = maskColor.a;                                        	    } else {                                                    	      lum = maskColor.r * 0.3 + maskColor.g * 0.59 +            	            maskColor.b * 0.11;                                 	    }                                                           	    imageColor.a *= lum;                                        	    imageColor.rgb *= imageColor.a;                             	    gl_FragColor = imageColor;                                  	  }                                                             ",S=null;function x(){var l,v;g(),l=a,a=null,v=I,I=null;var P=b(v,m),N=T(v,E),M=h(v,[P,N]);v.useProgram(M);var O={};O.gl=v,O.canvas=l,O.resolutionLocation=v.getUniformLocation(M,"u_resolution"),O.positionLocation=v.getAttribLocation(M,"a_position"),O.backdropLocation=v.getUniformLocation(M,"u_backdrop"),O.subtypeLocation=v.getUniformLocation(M,"u_subtype");var X=v.getAttribLocation(M,"a_texCoord"),W=v.getUniformLocation(M,"u_image"),L=v.getUniformLocation(M,"u_mask"),e=v.createBuffer();v.bindBuffer(v.ARRAY_BUFFER,e),v.bufferData(v.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),v.STATIC_DRAW),v.enableVertexAttribArray(X),v.vertexAttribPointer(X,2,v.FLOAT,!1,0,0),v.uniform1i(W,0),v.uniform1i(L,1),S=O}function k(l,v,P){var N=l.width,M=l.height;S||x();var O=S,X=O.canvas,W=O.gl;X.width=N,X.height=M,W.viewport(0,0,W.drawingBufferWidth,W.drawingBufferHeight),W.uniform2f(O.resolutionLocation,N,M),P.backdrop?W.uniform4f(O.resolutionLocation,P.backdrop[0],P.backdrop[1],P.backdrop[2],1):W.uniform4f(O.resolutionLocation,0,0,0,0),W.uniform1i(O.subtypeLocation,P.subtype==="Luminosity"?1:0);var L=C(W,l,W.TEXTURE0),e=C(W,v,W.TEXTURE1),n=W.createBuffer();return W.bindBuffer(W.ARRAY_BUFFER,n),W.bufferData(W.ARRAY_BUFFER,new Float32Array([0,0,N,0,0,M,0,M,N,0,N,M]),W.STATIC_DRAW),W.enableVertexAttribArray(O.positionLocation),W.vertexAttribPointer(O.positionLocation,2,W.FLOAT,!1,0,0),W.clearColor(0,0,0,0),W.enable(W.BLEND),W.blendFunc(W.ONE,W.ONE_MINUS_SRC_ALPHA),W.clear(W.COLOR_BUFFER_BIT),W.drawArrays(W.TRIANGLES,0,6),W.flush(),W.deleteTexture(L),W.deleteTexture(e),W.deleteBuffer(n),X}var d="	  attribute vec2 a_position;                                    	  attribute vec3 a_color;                                       	                                                                	  uniform vec2 u_resolution;                                    	  uniform vec2 u_scale;                                         	  uniform vec2 u_offset;                                        	                                                                	  varying vec4 v_color;                                         	                                                                	  void main() {                                                 	    vec2 position = (a_position + u_offset) * u_scale;          	    vec2 clipSpace = (position / u_resolution) * 2.0 - 1.0;     	    gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);          	                                                                	    v_color = vec4(a_color / 255.0, 1.0);                       	  }                                                             ",i="	  precision mediump float;                                      	                                                                	  varying vec4 v_color;                                         	                                                                	  void main() {                                                 	    gl_FragColor = v_color;                                     	  }                                                             ",o=null;function f(){var l,v;g(),l=a,a=null,v=I,I=null;var P=b(v,d),N=T(v,i),M=h(v,[P,N]);v.useProgram(M);var O={};O.gl=v,O.canvas=l,O.resolutionLocation=v.getUniformLocation(M,"u_resolution"),O.scaleLocation=v.getUniformLocation(M,"u_scale"),O.offsetLocation=v.getUniformLocation(M,"u_offset"),O.positionLocation=v.getAttribLocation(M,"a_position"),O.colorLocation=v.getAttribLocation(M,"a_color"),o=O}function c(l,v,P,N,M){o||f();var O=o,X=O.canvas,W=O.gl;X.width=l,X.height=v,W.viewport(0,0,W.drawingBufferWidth,W.drawingBufferHeight),W.uniform2f(O.resolutionLocation,l,v);var L=0,e,n,s;for(e=0,n=N.length;e<n;e++)switch(N[e].type){case"lattice":s=N[e].coords.length/N[e].verticesPerRow|0,L+=(s-1)*(N[e].verticesPerRow-1)*6;break;case"triangles":L+=N[e].coords.length;break}var u=new Float32Array(L*2),p=new Uint8Array(L*3),_=M.coords,F=M.colors,U=0,G=0;for(e=0,n=N.length;e<n;e++){var z=N[e],V=z.coords,H=z.colors;switch(z.type){case"lattice":var $=z.verticesPerRow;s=V.length/$|0;for(var K=1;K<s;K++)for(var Y=K*$+1,Z=1;Z<$;Z++,Y++)u[U]=_[V[Y-$-1]],u[U+1]=_[V[Y-$-1]+1],u[U+2]=_[V[Y-$]],u[U+3]=_[V[Y-$]+1],u[U+4]=_[V[Y-1]],u[U+5]=_[V[Y-1]+1],p[G]=F[H[Y-$-1]],p[G+1]=F[H[Y-$-1]+1],p[G+2]=F[H[Y-$-1]+2],p[G+3]=F[H[Y-$]],p[G+4]=F[H[Y-$]+1],p[G+5]=F[H[Y-$]+2],p[G+6]=F[H[Y-1]],p[G+7]=F[H[Y-1]+1],p[G+8]=F[H[Y-1]+2],u[U+6]=u[U+2],u[U+7]=u[U+3],u[U+8]=u[U+4],u[U+9]=u[U+5],u[U+10]=_[V[Y]],u[U+11]=_[V[Y]+1],p[G+9]=p[G+3],p[G+10]=p[G+4],p[G+11]=p[G+5],p[G+12]=p[G+6],p[G+13]=p[G+7],p[G+14]=p[G+8],p[G+15]=F[H[Y]],p[G+16]=F[H[Y]+1],p[G+17]=F[H[Y]+2],U+=12,G+=18;break;case"triangles":for(var ee=0,te=V.length;ee<te;ee++)u[U]=_[V[ee]],u[U+1]=_[V[ee]+1],p[G]=F[H[ee]],p[G+1]=F[H[ee]+1],p[G+2]=F[H[ee]+2],U+=2,G+=3;break}}P?W.clearColor(P[0]/255,P[1]/255,P[2]/255,1):W.clearColor(0,0,0,0),W.clear(W.COLOR_BUFFER_BIT);var se=W.createBuffer();W.bindBuffer(W.ARRAY_BUFFER,se),W.bufferData(W.ARRAY_BUFFER,u,W.STATIC_DRAW),W.enableVertexAttribArray(O.positionLocation),W.vertexAttribPointer(O.positionLocation,2,W.FLOAT,!1,0,0);var ae=W.createBuffer();return W.bindBuffer(W.ARRAY_BUFFER,ae),W.bufferData(W.ARRAY_BUFFER,p,W.STATIC_DRAW),W.enableVertexAttribArray(O.colorLocation),W.vertexAttribPointer(O.colorLocation,3,W.UNSIGNED_BYTE,!1,0,0),W.uniform2f(O.scaleLocation,M.scaleX,M.scaleY),W.uniform2f(O.offsetLocation,M.offsetX,M.offsetY),W.drawArrays(W.TRIANGLES,0,L),W.flush(),W.deleteBuffer(se),W.deleteBuffer(ae),X}return{tryInitGL(){try{return g(),!!I}catch{}return!1},composeSMask:k,drawFigures:c,cleanup(){S&&S.canvas&&(S.canvas.width=0,S.canvas.height=0),o&&o.canvas&&(o.canvas.width=0,o.canvas.height=0),S=null,o=null}}}()},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.AnnotationLayer=void 0;var t=y(1),A=y(2),w=y(8);class D{static create(e){switch(e.data.annotationType){case A.AnnotationType.LINK:return new b(e);case A.AnnotationType.TEXT:return new T(e);case A.AnnotationType.WIDGET:switch(e.data.fieldType){case"Tx":return new C(e);case"Btn":return e.data.radioButton?new a(e):e.data.checkBox?new I(e):new g(e);case"Ch":return new m(e)}return new h(e);case A.AnnotationType.POPUP:return new E(e);case A.AnnotationType.FREETEXT:return new x(e);case A.AnnotationType.LINE:return new k(e);case A.AnnotationType.SQUARE:return new d(e);case A.AnnotationType.CIRCLE:return new i(e);case A.AnnotationType.POLYLINE:return new o(e);case A.AnnotationType.CARET:return new c(e);case A.AnnotationType.INK:return new l(e);case A.AnnotationType.POLYGON:return new f(e);case A.AnnotationType.HIGHLIGHT:return new v(e);case A.AnnotationType.UNDERLINE:return new P(e);case A.AnnotationType.SQUIGGLY:return new N(e);case A.AnnotationType.STRIKEOUT:return new M(e);case A.AnnotationType.STAMP:return new O(e);case A.AnnotationType.FILEATTACHMENT:return new X(e);default:return new R(e)}}}class R{constructor(e,n=!1,s=!1){this.isRenderable=n,this.data=e.data,this.layer=e.layer,this.page=e.page,this.viewport=e.viewport,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderInteractiveForms=e.renderInteractiveForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,n&&(this.container=this._createContainer(s))}_createContainer(e=!1){const n=this.data,s=this.page,u=this.viewport,p=document.createElement("section");let _=n.rect[2]-n.rect[0],F=n.rect[3]-n.rect[1];p.setAttribute("data-annotation-id",n.id);const U=A.Util.normalizeRect([n.rect[0],s.view[3]-n.rect[1]+s.view[1],n.rect[2],s.view[3]-n.rect[3]+s.view[1]]);if(p.style.transform=`matrix(${u.transform.join(",")})`,p.style.transformOrigin=`-${U[0]}px -${U[1]}px`,!e&&n.borderStyle.width>0){p.style.borderWidth=`${n.borderStyle.width}px`,n.borderStyle.style!==A.AnnotationBorderStyleType.UNDERLINE&&(_=_-2*n.borderStyle.width,F=F-2*n.borderStyle.width);const G=n.borderStyle.horizontalCornerRadius,z=n.borderStyle.verticalCornerRadius;if(G>0||z>0){const V=`${G}px / ${z}px`;p.style.borderRadius=V}switch(n.borderStyle.style){case A.AnnotationBorderStyleType.SOLID:p.style.borderStyle="solid";break;case A.AnnotationBorderStyleType.DASHED:p.style.borderStyle="dashed";break;case A.AnnotationBorderStyleType.BEVELED:(0,A.warn)("Unimplemented border style: beveled");break;case A.AnnotationBorderStyleType.INSET:(0,A.warn)("Unimplemented border style: inset");break;case A.AnnotationBorderStyleType.UNDERLINE:p.style.borderBottomStyle="solid";break}n.color?p.style.borderColor=A.Util.makeCssRgb(n.color[0]|0,n.color[1]|0,n.color[2]|0):p.style.borderWidth=0}return p.style.left=`${U[0]}px`,p.style.top=`${U[1]}px`,p.style.width=`${_}px`,p.style.height=`${F}px`,p}_createPopup(e,n,s){n||(n=document.createElement("div"),n.style.height=e.style.height,n.style.width=e.style.width,e.appendChild(n));const p=new S({container:e,trigger:n,color:s.color,title:s.title,modificationDate:s.modificationDate,contents:s.contents,hideWrapper:!0}).render();p.style.left=e.style.width,e.appendChild(p)}render(){(0,A.unreachable)("Abstract method `AnnotationElement.render` called")}}class b extends R{constructor(e){const n=!!(e.data.url||e.data.dest||e.data.action);super(e,n)}render(){this.container.className="linkAnnotation";const{data:e,linkService:n}=this,s=document.createElement("a");return e.url?(0,t.addLinkAttributes)(s,{url:e.url,target:e.newWindow?t.LinkTarget.BLANK:n.externalLinkTarget,rel:n.externalLinkRel,enabled:n.externalLinkEnabled}):e.action?this._bindNamedAction(s,e.action):this._bindLink(s,e.dest),this.container.appendChild(s),this.container}_bindLink(e,n){e.href=this.linkService.getDestinationHash(n),e.onclick=()=>(n&&this.linkService.navigateTo(n),!1),n&&(e.className="internalLink")}_bindNamedAction(e,n){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(n),!1),e.className="internalLink"}}class T extends R{constructor(e){const n=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,n)}render(){this.container.className="textAnnotation";const e=document.createElement("img");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.alt="[{{type}} Annotation]",e.dataset.l10nId="text_annotation_type",e.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(this.container,e,this.data),this.container.appendChild(e),this.container}}class h extends R{render(){return this.container}}class C extends h{constructor(e){const n=e.renderInteractiveForms||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,n)}render(){const e=["left","center","right"],n=this.annotationStorage,s=this.data.id;this.container.className="textWidgetAnnotation";let u=null;if(this.renderInteractiveForms){const p=n.getOrCreateValue(s,this.data.fieldValue);if(this.data.multiLine?(u=document.createElement("textarea"),u.textContent=p):(u=document.createElement("input"),u.type="text",u.setAttribute("value",p)),u.addEventListener("input",function(_){n.setValue(s,_.target.value)}),u.disabled=this.data.readOnly,u.name=this.data.fieldName,this.data.maxLen!==null&&(u.maxLength=this.data.maxLen),this.data.comb){const F=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;u.classList.add("comb"),u.style.letterSpacing=`calc(${F}px - 1ch)`}}else{u=document.createElement("div"),u.textContent=this.data.fieldValue,u.style.verticalAlign="middle",u.style.display="table-cell";let p=null;this.data.fontRefName&&this.page.commonObjs.has(this.data.fontRefName)&&(p=this.page.commonObjs.get(this.data.fontRefName)),this._setTextStyle(u,p)}return this.data.textAlignment!==null&&(u.style.textAlign=e[this.data.textAlignment]),this.container.appendChild(u),this.container}_setTextStyle(e,n){const s=e.style;if(s.fontSize=`${this.data.fontSize}px`,s.direction=this.data.fontDirection<0?"rtl":"ltr",!n)return;let u="normal";n.black?u="900":n.bold&&(u="bold"),s.fontWeight=u,s.fontStyle=n.italic?"italic":"normal";const p=n.loadedName?`"${n.loadedName}", `:"",_=n.fallbackName||"Helvetica, sans-serif";s.fontFamily=p+_}}class I extends h{constructor(e){super(e,e.renderInteractiveForms)}render(){const e=this.annotationStorage,n=this.data,s=n.id,u=e.getOrCreateValue(s,n.fieldValue&&n.fieldValue!=="Off");this.container.className="buttonWidgetAnnotation checkBox";const p=document.createElement("input");return p.disabled=n.readOnly,p.type="checkbox",p.name=this.data.fieldName,u&&p.setAttribute("checked",!0),p.addEventListener("change",function(_){e.setValue(s,_.target.checked)}),this.container.appendChild(p),this.container}}class a extends h{constructor(e){super(e,e.renderInteractiveForms)}render(){this.container.className="buttonWidgetAnnotation radioButton";const e=this.annotationStorage,n=this.data,s=n.id,u=e.getOrCreateValue(s,n.fieldValue===n.buttonValue),p=document.createElement("input");return p.disabled=n.readOnly,p.type="radio",p.name=n.fieldName,u&&p.setAttribute("checked",!0),p.addEventListener("change",function(_){const F=_.target.name;for(const U of document.getElementsByName(F))U!==_.target&&e.setValue(U.parentNode.getAttribute("data-annotation-id"),!1);e.setValue(s,_.target.checked)}),this.container.appendChild(p),this.container}}class g extends b{render(){const e=super.render();return e.className="buttonWidgetAnnotation pushButton",e}}class m extends h{constructor(e){super(e,e.renderInteractiveForms)}render(){this.container.className="choiceWidgetAnnotation";const e=this.annotationStorage,n=this.data.id;e.getOrCreateValue(n,this.data.fieldValue.length>0?this.data.fieldValue[0]:null);const s=document.createElement("select");s.disabled=this.data.readOnly,s.name=this.data.fieldName,this.data.combo||(s.size=this.data.options.length,this.data.multiSelect&&(s.multiple=!0));for(const u of this.data.options){const p=document.createElement("option");p.textContent=u.displayValue,p.value=u.exportValue,this.data.fieldValue.includes(u.exportValue)&&p.setAttribute("selected",!0),s.appendChild(p)}return s.addEventListener("input",function(u){const p=u.target.options,_=p[p.selectedIndex].value;e.setValue(n,_)}),this.container.appendChild(s),this.container}}class E extends R{constructor(e){const n=!!(e.data.title||e.data.contents);super(e,n)}render(){const e=["Line","Square","Circle","PolyLine","Polygon","Ink"];if(this.container.className="popupAnnotation",e.includes(this.data.parentType))return this.container;const n=`[data-annotation-id="${this.data.parentId}"]`,s=this.layer.querySelector(n);if(!s)return this.container;const u=new S({container:this.container,trigger:s,color:this.data.color,title:this.data.title,modificationDate:this.data.modificationDate,contents:this.data.contents}),p=parseFloat(s.style.left),_=parseFloat(s.style.width);return this.container.style.transformOrigin=`-${p+_}px -${s.style.top}`,this.container.style.left=`${p+_}px`,this.container.appendChild(u.render()),this.container}}class S{constructor(e){this.container=e.container,this.trigger=e.trigger,this.color=e.color,this.title=e.title,this.modificationDate=e.modificationDate,this.contents=e.contents,this.hideWrapper=e.hideWrapper||!1,this.pinned=!1}render(){const n=document.createElement("div");n.className="popupWrapper",this.hideElement=this.hideWrapper?n:this.container,this.hideElement.setAttribute("hidden",!0);const s=document.createElement("div");s.className="popup";const u=this.color;if(u){const U=.7*(255-u[0])+u[0],G=.7*(255-u[1])+u[1],z=.7*(255-u[2])+u[2];s.style.backgroundColor=A.Util.makeCssRgb(U|0,G|0,z|0)}const p=document.createElement("h1");p.textContent=this.title,s.appendChild(p);const _=t.PDFDateString.toDateObject(this.modificationDate);if(_){const U=document.createElement("span");U.textContent="{{date}}, {{time}}",U.dataset.l10nId="annotation_date_string",U.dataset.l10nArgs=JSON.stringify({date:_.toLocaleDateString(),time:_.toLocaleTimeString()}),s.appendChild(U)}const F=this._formatContents(this.contents);return s.appendChild(F),this.trigger.addEventListener("click",this._toggle.bind(this)),this.trigger.addEventListener("mouseover",this._show.bind(this,!1)),this.trigger.addEventListener("mouseout",this._hide.bind(this,!1)),s.addEventListener("click",this._hide.bind(this,!0)),n.appendChild(s),n}_formatContents(e){const n=document.createElement("p"),s=e.split(/(?:\r\n?|\n)/);for(let u=0,p=s.length;u<p;++u){const _=s[u];n.appendChild(document.createTextNode(_)),u<p-1&&n.appendChild(document.createElement("br"))}return n}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(e=!1){e&&(this.pinned=!0),this.hideElement.hasAttribute("hidden")&&(this.hideElement.removeAttribute("hidden"),this.container.style.zIndex+=1)}_hide(e=!0){e&&(this.pinned=!1),!this.hideElement.hasAttribute("hidden")&&!this.pinned&&(this.hideElement.setAttribute("hidden",!0),this.container.style.zIndex-=1)}}class x extends R{constructor(e){const n=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,n,!0)}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class k extends R{constructor(e){const n=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,n,!0)}render(){this.container.className="lineAnnotation";const e=this.data,n=e.rect[2]-e.rect[0],s=e.rect[3]-e.rect[1],u=this.svgFactory.create(n,s),p=this.svgFactory.createElement("svg:line");return p.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),p.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),p.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),p.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),p.setAttribute("stroke-width",e.borderStyle.width||1),p.setAttribute("stroke","transparent"),u.appendChild(p),this.container.append(u),this._createPopup(this.container,p,e),this.container}}class d extends R{constructor(e){const n=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,n,!0)}render(){this.container.className="squareAnnotation";const e=this.data,n=e.rect[2]-e.rect[0],s=e.rect[3]-e.rect[1],u=this.svgFactory.create(n,s),p=e.borderStyle.width,_=this.svgFactory.createElement("svg:rect");return _.setAttribute("x",p/2),_.setAttribute("y",p/2),_.setAttribute("width",n-p),_.setAttribute("height",s-p),_.setAttribute("stroke-width",p||1),_.setAttribute("stroke","transparent"),_.setAttribute("fill","none"),u.appendChild(_),this.container.append(u),this._createPopup(this.container,_,e),this.container}}class i extends R{constructor(e){const n=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,n,!0)}render(){this.container.className="circleAnnotation";const e=this.data,n=e.rect[2]-e.rect[0],s=e.rect[3]-e.rect[1],u=this.svgFactory.create(n,s),p=e.borderStyle.width,_=this.svgFactory.createElement("svg:ellipse");return _.setAttribute("cx",n/2),_.setAttribute("cy",s/2),_.setAttribute("rx",n/2-p/2),_.setAttribute("ry",s/2-p/2),_.setAttribute("stroke-width",p||1),_.setAttribute("stroke","transparent"),_.setAttribute("fill","none"),u.appendChild(_),this.container.append(u),this._createPopup(this.container,_,e),this.container}}class o extends R{constructor(e){const n=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,n,!0),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,n=e.rect[2]-e.rect[0],s=e.rect[3]-e.rect[1],u=this.svgFactory.create(n,s);let p=[];for(const F of e.vertices){const U=F.x-e.rect[0],G=e.rect[3]-F.y;p.push(U+","+G)}p=p.join(" ");const _=this.svgFactory.createElement(this.svgElementName);return _.setAttribute("points",p),_.setAttribute("stroke-width",e.borderStyle.width||1),_.setAttribute("stroke","transparent"),_.setAttribute("fill","none"),u.appendChild(_),this.container.append(u),this._createPopup(this.container,_,e),this.container}}class f extends o{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class c extends R{constructor(e){const n=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,n,!0)}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class l extends R{constructor(e){const n=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,n,!0),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const e=this.data,n=e.rect[2]-e.rect[0],s=e.rect[3]-e.rect[1],u=this.svgFactory.create(n,s);for(const p of e.inkLists){let _=[];for(const U of p){const G=U.x-e.rect[0],z=e.rect[3]-U.y;_.push(`${G},${z}`)}_=_.join(" ");const F=this.svgFactory.createElement(this.svgElementName);F.setAttribute("points",_),F.setAttribute("stroke-width",e.borderStyle.width||1),F.setAttribute("stroke","transparent"),F.setAttribute("fill","none"),this._createPopup(this.container,F,e),u.appendChild(F)}return this.container.append(u),this.container}}class v extends R{constructor(e){const n=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,n,!0)}render(){return this.container.className="highlightAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class P extends R{constructor(e){const n=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,n,!0)}render(){return this.container.className="underlineAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class N extends R{constructor(e){const n=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,n,!0)}render(){return this.container.className="squigglyAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class M extends R{constructor(e){const n=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,n,!0)}render(){return this.container.className="strikeoutAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class O extends R{constructor(e){const n=!!(e.data.hasPopup||e.data.title||e.data.contents);super(e,n,!0)}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(this.container,null,this.data),this.container}}class X extends R{constructor(e){super(e,!0);const{filename:n,content:s}=this.data.file;this.filename=(0,t.getFilenameFromUrl)(n),this.content=s,this.linkService.eventBus&&this.linkService.eventBus.dispatch("fileattachmentannotation",{source:this,id:(0,A.stringToPDFString)(n),filename:n,content:s})}render(){this.container.className="fileAttachmentAnnotation";const e=document.createElement("div");return e.style.height=this.container.style.height,e.style.width=this.container.style.width,e.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&(this.data.title||this.data.contents)&&this._createPopup(this.container,e,this.data),this.container.appendChild(e),this.container}_download(){if(!this.downloadManager){(0,A.warn)("Download cannot be started due to unavailable download manager");return}this.downloadManager.downloadData(this.content,this.filename,"")}}class W{static render(e){const n=[],s=[];for(const u of e.annotations)if(u){if(u.annotationType===A.AnnotationType.POPUP){s.push(u);continue}n.push(u)}s.length&&n.push(...s);for(const u of n){const p=D.create({data:u,layer:e.div,page:e.page,viewport:e.viewport,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderInteractiveForms:typeof e.renderInteractiveForms=="boolean"?e.renderInteractiveForms:!0,svgFactory:new t.DOMSVGFactory,annotationStorage:e.annotationStorage||new w.AnnotationStorage});p.isRenderable&&e.div.appendChild(p.render())}}static update(e){for(const n of e.annotations){const s=e.div.querySelector(`[data-annotation-id="${n.id}"]`);s&&(s.style.transform=`matrix(${e.viewport.transform.join(",")})`)}e.div.removeAttribute("hidden")}}r.AnnotationLayer=W},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.renderTextLayer=void 0;var t=y(2),A=function(){var D=1e5,R=/\S/;function b(S){return!R.test(S)}function T(S,x,k){var d=document.createElement("span"),i={angle:0,canvasWidth:0,isWhitespace:!1,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1};if(S._textDivs.push(d),b(x.str)){i.isWhitespace=!0,S._textDivProperties.set(d,i);return}var o=t.Util.transform(S._viewport.transform,x.transform),f=Math.atan2(o[1],o[0]),c=k[x.fontName];c.vertical&&(f+=Math.PI/2);var l=Math.sqrt(o[2]*o[2]+o[3]*o[3]),v=l;c.ascent?v=c.ascent*v:c.descent&&(v=(1+c.descent)*v);let P,N;f===0?(P=o[4],N=o[5]-v):(P=o[4]+v*Math.sin(f),N=o[5]-v*Math.cos(f)),d.style.left=`${P}px`,d.style.top=`${N}px`,d.style.fontSize=`${l}px`,d.style.fontFamily=c.fontFamily,d.textContent=x.str,S._fontInspectorEnabled&&(d.dataset.fontName=x.fontName),f!==0&&(i.angle=f*(180/Math.PI));let M=!1;if(x.str.length>1)M=!0;else if(x.transform[0]!==x.transform[3]){const s=Math.abs(x.transform[0]),u=Math.abs(x.transform[3]);s!==u&&Math.max(s,u)/Math.min(s,u)>1.5&&(M=!0)}if(M&&(c.vertical?i.canvasWidth=x.height*S._viewport.scale:i.canvasWidth=x.width*S._viewport.scale),S._textDivProperties.set(d,i),S._textContentStream&&S._layoutText(d),S._enhanceTextSelection){var O=1,X=0;f!==0&&(O=Math.cos(f),X=Math.sin(f));var W=(c.vertical?x.height:x.width)*S._viewport.scale,L=l,e,n;f!==0?(e=[O,X,-X,O,P,N],n=t.Util.getAxialAlignedBoundingBox([0,0,W,L],e)):n=[P,N,P+W,N+L],S._bounds.push({left:n[0],top:n[1],right:n[2],bottom:n[3],div:d,size:[W,L],m:e})}}function h(S){if(!S._canceled){var x=S._textDivs,k=S._capability,d=x.length;if(d>D){S._renderingDone=!0,k.resolve();return}if(!S._textContentStream)for(var i=0;i<d;i++)S._layoutText(x[i]);S._renderingDone=!0,k.resolve()}}function C(S,x,k){let d=0;for(let i=0;i<k;i++){const o=S[x++];o>0&&(d=d?Math.min(o,d):o)}return d}function I(S){for(var x=S._bounds,k=S._viewport,d=a(k.width,k.height,x),i=0;i<d.length;i++){var o=x[i].div,f=S._textDivProperties.get(o);if(f.angle===0){f.paddingLeft=x[i].left-d[i].left,f.paddingTop=x[i].top-d[i].top,f.paddingRight=d[i].right-x[i].right,f.paddingBottom=d[i].bottom-x[i].bottom,S._textDivProperties.set(o,f);continue}var c=d[i],l=x[i],v=l.m,P=v[0],N=v[1],M=[[0,0],[0,l.size[1]],[l.size[0],0],l.size],O=new Float64Array(64);M.forEach(function(W,L){var e=t.Util.applyTransform(W,v);O[L+0]=P&&(c.left-e[0])/P,O[L+4]=N&&(c.top-e[1])/N,O[L+8]=P&&(c.right-e[0])/P,O[L+12]=N&&(c.bottom-e[1])/N,O[L+16]=N&&(c.left-e[0])/-N,O[L+20]=P&&(c.top-e[1])/P,O[L+24]=N&&(c.right-e[0])/-N,O[L+28]=P&&(c.bottom-e[1])/P,O[L+32]=P&&(c.left-e[0])/-P,O[L+36]=N&&(c.top-e[1])/-N,O[L+40]=P&&(c.right-e[0])/-P,O[L+44]=N&&(c.bottom-e[1])/-N,O[L+48]=N&&(c.left-e[0])/N,O[L+52]=P&&(c.top-e[1])/-P,O[L+56]=N&&(c.right-e[0])/N,O[L+60]=P&&(c.bottom-e[1])/-P});var X=1+Math.min(Math.abs(P),Math.abs(N));f.paddingLeft=C(O,32,16)/X,f.paddingTop=C(O,48,16)/X,f.paddingRight=C(O,0,16)/X,f.paddingBottom=C(O,16,16)/X,S._textDivProperties.set(o,f)}}function a(S,x,k){var d=k.map(function(o,f){return{x1:o.left,y1:o.top,x2:o.right,y2:o.bottom,index:f,x1New:void 0,x2New:void 0}});g(S,d);var i=new Array(k.length);return d.forEach(function(o){var f=o.index;i[f]={left:o.x1New,top:0,right:o.x2New,bottom:0}}),k.map(function(o,f){var c=i[f],l=d[f];l.x1=o.top,l.y1=S-c.right,l.x2=o.bottom,l.y2=S-c.left,l.index=f,l.x1New=void 0,l.x2New=void 0}),g(x,d),d.forEach(function(o){var f=o.index;i[f].top=o.x1New,i[f].bottom=o.x2New}),i}function g(S,x){x.sort(function(i,o){return i.x1-o.x1||i.index-o.index});var k={x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0},d=[{start:-1/0,end:1/0,boundary:k}];x.forEach(function(i){for(var o=0;o<d.length&&d[o].end<=i.y1;)o++;for(var f=d.length-1;f>=0&&d[f].start>=i.y2;)f--;var c,l,v,P,N=-1/0;for(v=o;v<=f;v++){c=d[v],l=c.boundary;var M;l.x2>i.x1?M=l.index>i.index?l.x1New:i.x1:l.x2New===void 0?M=(l.x2+i.x1)/2:M=l.x2New,M>N&&(N=M)}for(i.x1New=N,v=o;v<=f;v++)c=d[v],l=c.boundary,l.x2New===void 0?l.x2>i.x1?l.index>i.index&&(l.x2New=l.x2):l.x2New=N:l.x2New>N&&(l.x2New=Math.max(N,l.x2));var O=[],X=null;for(v=o;v<=f;v++){c=d[v],l=c.boundary;var W=l.x2>i.x2?l:i;X===W?O[O.length-1].end=c.end:(O.push({start:c.start,end:c.end,boundary:W}),X=W)}for(d[o].start<i.y1&&(O[0].start=i.y1,O.unshift({start:d[o].start,end:i.y1,boundary:d[o].boundary})),i.y2<d[f].end&&(O[O.length-1].end=i.y2,O.push({start:i.y2,end:d[f].end,boundary:d[f].boundary})),v=o;v<=f;v++)if(c=d[v],l=c.boundary,l.x2New===void 0){var L=!1;for(P=o-1;!L&&P>=0&&d[P].start>=l.y1;P--)L=d[P].boundary===l;for(P=f+1;!L&&P<d.length&&d[P].end<=l.y2;P++)L=d[P].boundary===l;for(P=0;!L&&P<O.length;P++)L=O[P].boundary===l;L||(l.x2New=N)}Array.prototype.splice.apply(d,[o,f-o+1].concat(O))}),d.forEach(function(i){var o=i.boundary;o.x2New===void 0&&(o.x2New=Math.max(S,o.x2))})}function m({textContent:S,textContentStream:x,container:k,viewport:d,textDivs:i,textContentItemsStr:o,enhanceTextSelection:f}){this._textContent=S,this._textContentStream=x,this._container=k,this._document=k.ownerDocument,this._viewport=d,this._textDivs=i||[],this._textContentItemsStr=o||[],this._enhanceTextSelection=!!f,this._fontInspectorEnabled=!!(globalThis.FontInspector&&globalThis.FontInspector.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,t.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}m.prototype={get promise(){return this._capability.promise},cancel:function(){this._canceled=!0,this._reader&&(this._reader.cancel(new t.AbortException("TextLayer task cancelled.")),this._reader=null),this._renderTimer!==null&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))},_processItems(S,x){for(let k=0,d=S.length;k<d;k++)this._textContentItemsStr.push(S[k].str),T(this,S[k],x)},_layoutText(S){const x=this._textDivProperties.get(S);if(x.isWhitespace)return;let k="";if(x.canvasWidth!==0){const{fontSize:d,fontFamily:i}=S.style;(d!==this._layoutTextLastFontSize||i!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${d} ${i}`,this._layoutTextLastFontSize=d,this._layoutTextLastFontFamily=i);const{width:o}=this._layoutTextCtx.measureText(S.textContent);o>0&&(x.scale=x.canvasWidth/o,k=`scaleX(${x.scale})`)}x.angle!==0&&(k=`rotate(${x.angle}deg) ${k}`),k.length>0&&(this._enhanceTextSelection&&(x.originalTransform=k),S.style.transform=k),this._textDivProperties.set(S,x),this._container.appendChild(S)},_render:function(x){const k=(0,t.createPromiseCapability)();let d=Object.create(null);const i=this._document.createElement("canvas");if(i.mozOpaque=!0,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent){const o=this._textContent.items,f=this._textContent.styles;this._processItems(o,f),k.resolve()}else if(this._textContentStream){const o=()=>{this._reader.read().then(({value:f,done:c})=>{if(c){k.resolve();return}Object.assign(d,f.styles),this._processItems(f.items,d),o()},k.reject)};this._reader=this._textContentStream.getReader(),o()}else throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');k.promise.then(()=>{d=null,x?this._renderTimer=setTimeout(()=>{h(this),this._renderTimer=null},x):h(this)},this._capability.reject)},expandTextDivs:function(x){if(!this._enhanceTextSelection||!this._renderingDone)return;this._bounds!==null&&(I(this),this._bounds=null);const k=[],d=[];for(var i=0,o=this._textDivs.length;i<o;i++){const f=this._textDivs[i],c=this._textDivProperties.get(f);c.isWhitespace||(x?(k.length=0,d.length=0,c.originalTransform&&k.push(c.originalTransform),c.paddingTop>0?(d.push(`${c.paddingTop}px`),k.push(`translateY(${-c.paddingTop}px)`)):d.push(0),c.paddingRight>0?d.push(`${c.paddingRight/c.scale}px`):d.push(0),c.paddingBottom>0?d.push(`${c.paddingBottom}px`):d.push(0),c.paddingLeft>0?(d.push(`${c.paddingLeft/c.scale}px`),k.push(`translateX(${-c.paddingLeft/c.scale}px)`)):d.push(0),f.style.padding=d.join(" "),k.length&&(f.style.transform=k.join(" "))):(f.style.padding=null,f.style.transform=c.originalTransform))}}};function E(S){var x=new m({textContent:S.textContent,textContentStream:S.textContentStream,container:S.container,viewport:S.viewport,textDivs:S.textDivs,textContentItemsStr:S.textContentItemsStr,enhanceTextSelection:S.enhanceTextSelection});return x._render(S.timeout),x}return E}();r.renderTextLayer=A},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.SVGGraphics=void 0;var t=y(2),A=y(1),w=y(4);let D=function(){throw new Error("Not implemented: SVGGraphics")};r.SVGGraphics=D;{let g=function(d){let i=[];const o=[];for(const f of d){if(f.fn==="save"){i.push({fnId:92,fn:"group",items:[]}),o.push(i),i=i[i.length-1].items;continue}f.fn==="restore"?i=o.pop():i.push(f)}return i},m=function(d){if(Number.isInteger(d))return d.toString();const i=d.toFixed(10);let o=i.length-1;if(i[o]!=="0")return i;do o--;while(i[o]==="0");return i.substring(0,i[o]==="."?o:o+1)},E=function(d){if(d[4]===0&&d[5]===0){if(d[1]===0&&d[2]===0)return d[0]===1&&d[3]===1?"":`scale(${m(d[0])} ${m(d[3])})`;if(d[0]===d[3]&&d[1]===-d[2]){const i=Math.acos(d[0])*180/Math.PI;return`rotate(${m(i)})`}}else if(d[0]===1&&d[1]===0&&d[2]===0&&d[3]===1)return`translate(${m(d[4])} ${m(d[5])})`;return`matrix(${m(d[0])} ${m(d[1])} ${m(d[2])} ${m(d[3])} ${m(d[4])} ${m(d[5])})`};const R={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},b="http://www.w3.org/XML/1998/namespace",T="http://www.w3.org/1999/xlink",h=["butt","round","square"],C=["miter","round","bevel"],I=function(){const d=new Uint8Array([137,80,78,71,13,10,26,10]),i=12,o=new Int32Array(256);for(let M=0;M<256;M++){let O=M;for(let X=0;X<8;X++)O&1?O=3988292384^O>>1&2147483647:O=O>>1&2147483647;o[M]=O}function f(M,O,X){let W=-1;for(let L=O;L<X;L++){const e=(W^M[L])&255,n=o[e];W=W>>>8^n}return W^-1}function c(M,O,X,W){let L=W;const e=O.length;X[L]=e>>24&255,X[L+1]=e>>16&255,X[L+2]=e>>8&255,X[L+3]=e&255,L+=4,X[L]=M.charCodeAt(0)&255,X[L+1]=M.charCodeAt(1)&255,X[L+2]=M.charCodeAt(2)&255,X[L+3]=M.charCodeAt(3)&255,L+=4,X.set(O,L),L+=O.length;const n=f(X,W+4,L);X[L]=n>>24&255,X[L+1]=n>>16&255,X[L+2]=n>>8&255,X[L+3]=n&255}function l(M,O,X){let W=1,L=0;for(let e=O;e<X;++e)W=(W+(M[e]&255))%65521,L=(L+W)%65521;return L<<16|W}function v(M){if(!w.isNodeJS)return P(M);try{let O;parseInt(process.versions.node)>=8?O=M:O=Buffer.from(M);const X=require$$5.deflateSync(O,{level:9});return X instanceof Uint8Array?X:new Uint8Array(X)}catch(O){(0,t.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+O)}return P(M)}function P(M){let O=M.length;const X=65535,W=Math.ceil(O/X),L=new Uint8Array(2+O+W*5+4);let e=0;L[e++]=120,L[e++]=156;let n=0;for(;O>X;)L[e++]=0,L[e++]=255,L[e++]=255,L[e++]=0,L[e++]=0,L.set(M.subarray(n,n+X),e),e+=X,n+=X,O-=X;L[e++]=1,L[e++]=O&255,L[e++]=O>>8&255,L[e++]=~O&65535&255,L[e++]=(~O&65535)>>8&255,L.set(M.subarray(n),e),e+=M.length-n;const s=l(M,0,M.length);return L[e++]=s>>24&255,L[e++]=s>>16&255,L[e++]=s>>8&255,L[e++]=s&255,L}function N(M,O,X,W){const L=M.width,e=M.height;let n,s,u;const p=M.data;switch(O){case t.ImageKind.GRAYSCALE_1BPP:s=0,n=1,u=L+7>>3;break;case t.ImageKind.RGB_24BPP:s=2,n=8,u=L*3;break;case t.ImageKind.RGBA_32BPP:s=6,n=8,u=L*4;break;default:throw new Error("invalid format")}const _=new Uint8Array((1+u)*e);let F=0,U=0;for(let K=0;K<e;++K)_[F++]=0,_.set(p.subarray(U,U+u),F),U+=u,F+=u;if(O===t.ImageKind.GRAYSCALE_1BPP&&W){F=0;for(let K=0;K<e;K++){F++;for(let Y=0;Y<u;Y++)_[F++]^=255}}const G=new Uint8Array([L>>24&255,L>>16&255,L>>8&255,L&255,e>>24&255,e>>16&255,e>>8&255,e&255,n,s,0,0,0]),z=v(_),V=d.length+i*3+G.length+z.length,H=new Uint8Array(V);let $=0;return H.set(d,$),$+=d.length,c("IHDR",G,H,$),$+=i+G.length,c("IDATA",z,H,$),$+=i+z.length,c("IEND",new Uint8Array(0),H,$),(0,t.createObjectURL)(H,"image/png",X)}return function(O,X,W){const L=O.kind===void 0?t.ImageKind.GRAYSCALE_1BPP:O.kind;return N(O,L,X,W)}}();class a{constructor(){this.fontSizeScale=1,this.fontWeight=R.fontWeight,this.fontSize=0,this.textMatrix=t.IDENTITY_MATRIX,this.fontMatrix=t.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=t.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=R.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,o){this.x=i,this.y=o}}let S=0,x=0,k=0;r.SVGGraphics=D=class{constructor(i,o,f=!1){this.svgFactory=new A.DOMSVGFactory,this.current=new a,this.transformMatrix=t.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=i,this.objs=o,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!f,this._operatorIdMapping=[];for(const c in t.OPS)this._operatorIdMapping[t.OPS[c]]=c}save(){this.transformStack.push(this.transformMatrix);const i=this.current;this.extraStack.push(i),this.current=i.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(i){this.save(),this.executeOpTree(i),this.restore()}loadDependencies(i){const o=i.fnArray,f=i.argsArray;for(let c=0,l=o.length;c<l;c++)if(o[c]===t.OPS.dependency)for(const v of f[c]){const P=v.startsWith("g_")?this.commonObjs:this.objs,N=new Promise(M=>{P.get(v,M)});this.current.dependencies.push(N)}return Promise.all(this.current.dependencies)}transform(i,o,f,c,l,v){const P=[i,o,f,c,l,v];this.transformMatrix=t.Util.transform(this.transformMatrix,P),this.tgrp=null}getSVG(i,o){this.viewport=o;const f=this._initialize(o);return this.loadDependencies(i).then(()=>(this.transformMatrix=t.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(i)),f))}convertOpList(i){const o=this._operatorIdMapping,f=i.argsArray,c=i.fnArray,l=[];for(let v=0,P=c.length;v<P;v++){const N=c[v];l.push({fnId:N,fn:o[N],args:f[v]})}return g(l)}executeOpTree(i){for(const o of i){const f=o.fn,c=o.fnId,l=o.args;switch(c|0){case t.OPS.beginText:this.beginText();break;case t.OPS.dependency:break;case t.OPS.setLeading:this.setLeading(l);break;case t.OPS.setLeadingMoveText:this.setLeadingMoveText(l[0],l[1]);break;case t.OPS.setFont:this.setFont(l);break;case t.OPS.showText:this.showText(l[0]);break;case t.OPS.showSpacedText:this.showText(l[0]);break;case t.OPS.endText:this.endText();break;case t.OPS.moveText:this.moveText(l[0],l[1]);break;case t.OPS.setCharSpacing:this.setCharSpacing(l[0]);break;case t.OPS.setWordSpacing:this.setWordSpacing(l[0]);break;case t.OPS.setHScale:this.setHScale(l[0]);break;case t.OPS.setTextMatrix:this.setTextMatrix(l[0],l[1],l[2],l[3],l[4],l[5]);break;case t.OPS.setTextRise:this.setTextRise(l[0]);break;case t.OPS.setTextRenderingMode:this.setTextRenderingMode(l[0]);break;case t.OPS.setLineWidth:this.setLineWidth(l[0]);break;case t.OPS.setLineJoin:this.setLineJoin(l[0]);break;case t.OPS.setLineCap:this.setLineCap(l[0]);break;case t.OPS.setMiterLimit:this.setMiterLimit(l[0]);break;case t.OPS.setFillRGBColor:this.setFillRGBColor(l[0],l[1],l[2]);break;case t.OPS.setStrokeRGBColor:this.setStrokeRGBColor(l[0],l[1],l[2]);break;case t.OPS.setStrokeColorN:this.setStrokeColorN(l);break;case t.OPS.setFillColorN:this.setFillColorN(l);break;case t.OPS.shadingFill:this.shadingFill(l[0]);break;case t.OPS.setDash:this.setDash(l[0],l[1]);break;case t.OPS.setRenderingIntent:this.setRenderingIntent(l[0]);break;case t.OPS.setFlatness:this.setFlatness(l[0]);break;case t.OPS.setGState:this.setGState(l[0]);break;case t.OPS.fill:this.fill();break;case t.OPS.eoFill:this.eoFill();break;case t.OPS.stroke:this.stroke();break;case t.OPS.fillStroke:this.fillStroke();break;case t.OPS.eoFillStroke:this.eoFillStroke();break;case t.OPS.clip:this.clip("nonzero");break;case t.OPS.eoClip:this.clip("evenodd");break;case t.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case t.OPS.paintImageXObject:this.paintImageXObject(l[0]);break;case t.OPS.paintInlineImageXObject:this.paintInlineImageXObject(l[0]);break;case t.OPS.paintImageMaskXObject:this.paintImageMaskXObject(l[0]);break;case t.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(l[0],l[1]);break;case t.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case t.OPS.closePath:this.closePath();break;case t.OPS.closeStroke:this.closeStroke();break;case t.OPS.closeFillStroke:this.closeFillStroke();break;case t.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case t.OPS.nextLine:this.nextLine();break;case t.OPS.transform:this.transform(l[0],l[1],l[2],l[3],l[4],l[5]);break;case t.OPS.constructPath:this.constructPath(l[0],l[1]);break;case t.OPS.endPath:this.endPath();break;case 92:this.group(o.items);break;default:(0,t.warn)(`Unimplemented operator ${f}`);break}}}setWordSpacing(i){this.current.wordSpacing=i}setCharSpacing(i){this.current.charSpacing=i}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(i,o,f,c,l,v){const P=this.current;P.textMatrix=P.lineMatrix=[i,o,f,c,l,v],P.textMatrixScale=Math.sqrt(i*i+o*o),P.x=P.lineX=0,P.y=P.lineY=0,P.xcoords=[],P.ycoords=[],P.tspan=this.svgFactory.createElement("svg:tspan"),P.tspan.setAttributeNS(null,"font-family",P.fontFamily),P.tspan.setAttributeNS(null,"font-size",`${m(P.fontSize)}px`),P.tspan.setAttributeNS(null,"y",m(-P.y)),P.txtElement=this.svgFactory.createElement("svg:text"),P.txtElement.appendChild(P.tspan)}beginText(){const i=this.current;i.x=i.lineX=0,i.y=i.lineY=0,i.textMatrix=t.IDENTITY_MATRIX,i.lineMatrix=t.IDENTITY_MATRIX,i.textMatrixScale=1,i.tspan=this.svgFactory.createElement("svg:tspan"),i.txtElement=this.svgFactory.createElement("svg:text"),i.txtgrp=this.svgFactory.createElement("svg:g"),i.xcoords=[],i.ycoords=[]}moveText(i,o){const f=this.current;f.x=f.lineX+=i,f.y=f.lineY+=o,f.xcoords=[],f.ycoords=[],f.tspan=this.svgFactory.createElement("svg:tspan"),f.tspan.setAttributeNS(null,"font-family",f.fontFamily),f.tspan.setAttributeNS(null,"font-size",`${m(f.fontSize)}px`),f.tspan.setAttributeNS(null,"y",m(-f.y))}showText(i){const o=this.current,f=o.font,c=o.fontSize;if(c===0)return;const l=o.fontSizeScale,v=o.charSpacing,P=o.wordSpacing,N=o.fontDirection,M=o.textHScale*N,O=f.vertical,X=O?1:-1,W=f.defaultVMetrics,L=c*o.fontMatrix[0];let e=0;for(const u of i){if(u===null){e+=N*P;continue}else if((0,t.isNum)(u)){e+=X*u*c/1e3;continue}const p=(u.isSpace?P:0)+v,_=u.fontChar;let F,U,G=u.width;if(O){let V;const H=u.vmetric||W;V=u.vmetric?H[1]:G*.5,V=-V*L;const $=H[2]*L;G=H?-H[0]:G,F=V/l,U=(e+$)/l}else F=e/l,U=0;(u.isInFont||f.missingFile)&&(o.xcoords.push(o.x+F),O&&o.ycoords.push(-o.y+U),o.tspan.textContent+=_);let z;O?z=G*L-p*N:z=G*L+p*N,e+=z}o.tspan.setAttributeNS(null,"x",o.xcoords.map(m).join(" ")),O?o.tspan.setAttributeNS(null,"y",o.ycoords.map(m).join(" ")):o.tspan.setAttributeNS(null,"y",m(-o.y)),O?o.y-=e:o.x+=e*M,o.tspan.setAttributeNS(null,"font-family",o.fontFamily),o.tspan.setAttributeNS(null,"font-size",`${m(o.fontSize)}px`),o.fontStyle!==R.fontStyle&&o.tspan.setAttributeNS(null,"font-style",o.fontStyle),o.fontWeight!==R.fontWeight&&o.tspan.setAttributeNS(null,"font-weight",o.fontWeight);const n=o.textRenderingMode&t.TextRenderingMode.FILL_STROKE_MASK;if(n===t.TextRenderingMode.FILL||n===t.TextRenderingMode.FILL_STROKE?(o.fillColor!==R.fillColor&&o.tspan.setAttributeNS(null,"fill",o.fillColor),o.fillAlpha<1&&o.tspan.setAttributeNS(null,"fill-opacity",o.fillAlpha)):o.textRenderingMode===t.TextRenderingMode.ADD_TO_PATH?o.tspan.setAttributeNS(null,"fill","transparent"):o.tspan.setAttributeNS(null,"fill","none"),n===t.TextRenderingMode.STROKE||n===t.TextRenderingMode.FILL_STROKE){const u=1/(o.textMatrixScale||1);this._setStrokeAttributes(o.tspan,u)}let s=o.textMatrix;o.textRise!==0&&(s=s.slice(),s[5]+=o.textRise),o.txtElement.setAttributeNS(null,"transform",`${E(s)} scale(${m(M)}, -1)`),o.txtElement.setAttributeNS(b,"xml:space","preserve"),o.txtElement.appendChild(o.tspan),o.txtgrp.appendChild(o.txtElement),this._ensureTransformGroup().appendChild(o.txtElement)}setLeadingMoveText(i,o){this.setLeading(-o),this.moveText(i,o)}addFontStyle(i){if(!i.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const o=(0,t.createObjectURL)(i.data,i.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${i.loadedName}"; src: url(${o}); }
`}setFont(i){const o=this.current,f=this.commonObjs.get(i[0]);let c=i[1];o.font=f,this.embedFonts&&!f.missingFile&&!this.embeddedFonts[f.loadedName]&&(this.addFontStyle(f),this.embeddedFonts[f.loadedName]=f),o.fontMatrix=f.fontMatrix?f.fontMatrix:t.FONT_IDENTITY_MATRIX;let l="normal";f.black?l="900":f.bold&&(l="bold");const v=f.italic?"italic":"normal";c<0?(c=-c,o.fontDirection=-1):o.fontDirection=1,o.fontSize=c,o.fontFamily=f.loadedName,o.fontWeight=l,o.fontStyle=v,o.tspan=this.svgFactory.createElement("svg:tspan"),o.tspan.setAttributeNS(null,"y",m(-o.y)),o.xcoords=[],o.ycoords=[]}endText(){const i=this.current;i.textRenderingMode&t.TextRenderingMode.ADD_TO_PATH_FLAG&&i.txtElement&&i.txtElement.hasChildNodes()&&(i.element=i.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(i){i>0&&(this.current.lineWidth=i)}setLineCap(i){this.current.lineCap=h[i]}setLineJoin(i){this.current.lineJoin=C[i]}setMiterLimit(i){this.current.miterLimit=i}setStrokeAlpha(i){this.current.strokeAlpha=i}setStrokeRGBColor(i,o,f){this.current.strokeColor=t.Util.makeCssRgb(i,o,f)}setFillAlpha(i){this.current.fillAlpha=i}setFillRGBColor(i,o,f){this.current.fillColor=t.Util.makeCssRgb(i,o,f),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(i){this.current.strokeColor=this._makeColorN_Pattern(i)}setFillColorN(i){this.current.fillColor=this._makeColorN_Pattern(i)}shadingFill(i){const o=this.viewport.width,f=this.viewport.height,c=t.Util.inverseTransform(this.transformMatrix),l=t.Util.applyTransform([0,0],c),v=t.Util.applyTransform([0,f],c),P=t.Util.applyTransform([o,0],c),N=t.Util.applyTransform([o,f],c),M=Math.min(l[0],v[0],P[0],N[0]),O=Math.min(l[1],v[1],P[1],N[1]),X=Math.max(l[0],v[0],P[0],N[0]),W=Math.max(l[1],v[1],P[1],N[1]),L=this.svgFactory.createElement("svg:rect");L.setAttributeNS(null,"x",M),L.setAttributeNS(null,"y",O),L.setAttributeNS(null,"width",X-M),L.setAttributeNS(null,"height",W-O),L.setAttributeNS(null,"fill",this._makeShadingPattern(i)),this.current.fillAlpha<1&&L.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(L)}_makeColorN_Pattern(i){return i[0]==="TilingPattern"?this._makeTilingPattern(i):this._makeShadingPattern(i)}_makeTilingPattern(i){const o=i[1],f=i[2],c=i[3]||t.IDENTITY_MATRIX,[l,v,P,N]=i[4],M=i[5],O=i[6],X=i[7],W=`shading${k++}`,[L,e]=t.Util.applyTransform([l,v],c),[n,s]=t.Util.applyTransform([P,N],c),[u,p]=t.Util.singularValueDecompose2dScale(c),_=M*u,F=O*p,U=this.svgFactory.createElement("svg:pattern");U.setAttributeNS(null,"id",W),U.setAttributeNS(null,"patternUnits","userSpaceOnUse"),U.setAttributeNS(null,"width",_),U.setAttributeNS(null,"height",F),U.setAttributeNS(null,"x",`${L}`),U.setAttributeNS(null,"y",`${e}`);const G=this.svg,z=this.transformMatrix,V=this.current.fillColor,H=this.current.strokeColor,$=this.svgFactory.create(n-L,s-e);if(this.svg=$,this.transformMatrix=c,X===2){const K=t.Util.makeCssRgb(...o);this.current.fillColor=K,this.current.strokeColor=K}return this.executeOpTree(this.convertOpList(f)),this.svg=G,this.transformMatrix=z,this.current.fillColor=V,this.current.strokeColor=H,U.appendChild($.childNodes[0]),this.defs.appendChild(U),`url(#${W})`}_makeShadingPattern(i){switch(i[0]){case"RadialAxial":const o=`shading${k++}`,f=i[3];let c;switch(i[1]){case"axial":const l=i[4],v=i[5];c=this.svgFactory.createElement("svg:linearGradient"),c.setAttributeNS(null,"id",o),c.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),c.setAttributeNS(null,"x1",l[0]),c.setAttributeNS(null,"y1",l[1]),c.setAttributeNS(null,"x2",v[0]),c.setAttributeNS(null,"y2",v[1]);break;case"radial":const P=i[4],N=i[5],M=i[6],O=i[7];c=this.svgFactory.createElement("svg:radialGradient"),c.setAttributeNS(null,"id",o),c.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),c.setAttributeNS(null,"cx",N[0]),c.setAttributeNS(null,"cy",N[1]),c.setAttributeNS(null,"r",O),c.setAttributeNS(null,"fx",P[0]),c.setAttributeNS(null,"fy",P[1]),c.setAttributeNS(null,"fr",M);break;default:throw new Error(`Unknown RadialAxial type: ${i[1]}`)}for(const l of f){const v=this.svgFactory.createElement("svg:stop");v.setAttributeNS(null,"offset",l[0]),v.setAttributeNS(null,"stop-color",l[1]),c.appendChild(v)}return this.defs.appendChild(c),`url(#${o})`;case"Mesh":return(0,t.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${i[0]}`)}}setDash(i,o){this.current.dashArray=i,this.current.dashPhase=o}constructPath(i,o){const f=this.current;let c=f.x,l=f.y,v=[],P=0;for(const N of i)switch(N|0){case t.OPS.rectangle:c=o[P++],l=o[P++];const M=o[P++],O=o[P++],X=c+M,W=l+O;v.push("M",m(c),m(l),"L",m(X),m(l),"L",m(X),m(W),"L",m(c),m(W),"Z");break;case t.OPS.moveTo:c=o[P++],l=o[P++],v.push("M",m(c),m(l));break;case t.OPS.lineTo:c=o[P++],l=o[P++],v.push("L",m(c),m(l));break;case t.OPS.curveTo:c=o[P+4],l=o[P+5],v.push("C",m(o[P]),m(o[P+1]),m(o[P+2]),m(o[P+3]),m(c),m(l)),P+=6;break;case t.OPS.curveTo2:v.push("C",m(c),m(l),m(o[P]),m(o[P+1]),m(o[P+2]),m(o[P+3])),c=o[P+2],l=o[P+3],P+=4;break;case t.OPS.curveTo3:c=o[P+2],l=o[P+3],v.push("C",m(o[P]),m(o[P+1]),m(c),m(l),m(c),m(l)),P+=4;break;case t.OPS.closePath:v.push("Z");break}v=v.join(" "),f.path&&i.length>0&&i[0]!==t.OPS.rectangle&&i[0]!==t.OPS.moveTo?v=f.path.getAttributeNS(null,"d")+v:(f.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(f.path)),f.path.setAttributeNS(null,"d",v),f.path.setAttributeNS(null,"fill","none"),f.element=f.path,f.setCurrentPoint(c,l)}endPath(){const i=this.current;if(i.path=null,!this.pendingClip)return;if(!i.element){this.pendingClip=null;return}const o=`clippath${S++}`,f=this.svgFactory.createElement("svg:clipPath");f.setAttributeNS(null,"id",o),f.setAttributeNS(null,"transform",E(this.transformMatrix));const c=i.element.cloneNode(!0);this.pendingClip==="evenodd"?c.setAttributeNS(null,"clip-rule","evenodd"):c.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,f.appendChild(c),this.defs.appendChild(f),i.activeClipUrl&&(i.clipGroup=null,this.extraStack.forEach(function(l){l.clipGroup=null}),f.setAttributeNS(null,"clip-path",i.activeClipUrl)),i.activeClipUrl=`url(#${o})`,this.tgrp=null}clip(i){this.pendingClip=i}closePath(){const i=this.current;if(i.path){const o=`${i.path.getAttributeNS(null,"d")}Z`;i.path.setAttributeNS(null,"d",o)}}setLeading(i){this.current.leading=-i}setTextRise(i){this.current.textRise=i}setTextRenderingMode(i){this.current.textRenderingMode=i}setHScale(i){this.current.textHScale=i/100}setRenderingIntent(i){}setFlatness(i){}setGState(i){for(const[o,f]of i)switch(o){case"LW":this.setLineWidth(f);break;case"LC":this.setLineCap(f);break;case"LJ":this.setLineJoin(f);break;case"ML":this.setMiterLimit(f);break;case"D":this.setDash(f[0],f[1]);break;case"RI":this.setRenderingIntent(f);break;case"FL":this.setFlatness(f);break;case"Font":this.setFont(f);break;case"CA":this.setStrokeAlpha(f);break;case"ca":this.setFillAlpha(f);break;default:(0,t.warn)(`Unimplemented graphic state operator ${o}`);break}}fill(){const i=this.current;i.element&&(i.element.setAttributeNS(null,"fill",i.fillColor),i.element.setAttributeNS(null,"fill-opacity",i.fillAlpha),this.endPath())}stroke(){const i=this.current;i.element&&(this._setStrokeAttributes(i.element),i.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(i,o=1){const f=this.current;let c=f.dashArray;o!==1&&c.length>0&&(c=c.map(function(l){return o*l})),i.setAttributeNS(null,"stroke",f.strokeColor),i.setAttributeNS(null,"stroke-opacity",f.strokeAlpha),i.setAttributeNS(null,"stroke-miterlimit",m(f.miterLimit)),i.setAttributeNS(null,"stroke-linecap",f.lineCap),i.setAttributeNS(null,"stroke-linejoin",f.lineJoin),i.setAttributeNS(null,"stroke-width",m(o*f.lineWidth)+"px"),i.setAttributeNS(null,"stroke-dasharray",c.map(m).join(" ")),i.setAttributeNS(null,"stroke-dashoffset",m(o*f.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const i=this.svgFactory.createElement("svg:rect");i.setAttributeNS(null,"x","0"),i.setAttributeNS(null,"y","0"),i.setAttributeNS(null,"width","1px"),i.setAttributeNS(null,"height","1px"),i.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(i)}paintImageXObject(i){const o=i.startsWith("g_")?this.commonObjs.get(i):this.objs.get(i);if(!o){(0,t.warn)(`Dependent image with object ID ${i} is not ready yet`);return}this.paintInlineImageXObject(o)}paintInlineImageXObject(i,o){const f=i.width,c=i.height,l=I(i,this.forceDataSchema,!!o),v=this.svgFactory.createElement("svg:rect");v.setAttributeNS(null,"x","0"),v.setAttributeNS(null,"y","0"),v.setAttributeNS(null,"width",m(f)),v.setAttributeNS(null,"height",m(c)),this.current.element=v,this.clip("nonzero");const P=this.svgFactory.createElement("svg:image");P.setAttributeNS(T,"xlink:href",l),P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y",m(-c)),P.setAttributeNS(null,"width",m(f)+"px"),P.setAttributeNS(null,"height",m(c)+"px"),P.setAttributeNS(null,"transform",`scale(${m(1/f)} ${m(-1/c)})`),o?o.appendChild(P):this._ensureTransformGroup().appendChild(P)}paintImageMaskXObject(i){const o=this.current,f=i.width,c=i.height,l=o.fillColor;o.maskId=`mask${x++}`;const v=this.svgFactory.createElement("svg:mask");v.setAttributeNS(null,"id",o.maskId);const P=this.svgFactory.createElement("svg:rect");P.setAttributeNS(null,"x","0"),P.setAttributeNS(null,"y","0"),P.setAttributeNS(null,"width",m(f)),P.setAttributeNS(null,"height",m(c)),P.setAttributeNS(null,"fill",l),P.setAttributeNS(null,"mask",`url(#${o.maskId})`),this.defs.appendChild(v),this._ensureTransformGroup().appendChild(P),this.paintInlineImageXObject(i,v)}paintFormXObjectBegin(i,o){if(Array.isArray(i)&&i.length===6&&this.transform(i[0],i[1],i[2],i[3],i[4],i[5]),o){const f=o[2]-o[0],c=o[3]-o[1],l=this.svgFactory.createElement("svg:rect");l.setAttributeNS(null,"x",o[0]),l.setAttributeNS(null,"y",o[1]),l.setAttributeNS(null,"width",m(f)),l.setAttributeNS(null,"height",m(c)),this.current.element=l,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(i){const o=this.svgFactory.create(i.width,i.height),f=this.svgFactory.createElement("svg:defs");o.appendChild(f),this.defs=f;const c=this.svgFactory.createElement("svg:g");return c.setAttributeNS(null,"transform",E(i.transform)),o.appendChild(c),this.svg=c,o}_ensureClipGroup(){if(!this.current.clipGroup){const i=this.svgFactory.createElement("svg:g");i.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(i),this.current.clipGroup=i}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",E(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNodeStream=void 0;var t=y(2),A=y(23);const w=require$$5,D=require$$5,R=require$$5,b=require$$5,T=/^file:\/\/\/[a-zA-Z]:\//;function h(k){const d=b.parse(k);return d.protocol==="file:"||d.host?d:/^[a-z]:[/\\]/i.test(k)?b.parse(`file:///${k}`):(d.host||(d.protocol="file:"),d)}class C{constructor(d){this.source=d,this.url=h(d.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&d.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new S(this):new m(this),this._fullRequestReader}getRangeReader(d,i){if(i<=this._progressiveDataLength)return null;const o=this.isFsUrl?new x(this,d,i):new E(this,d,i);return this._rangeRequestReaders.push(o),o}cancelAllRequests(d){this._fullRequestReader&&this._fullRequestReader.cancel(d),this._rangeRequestReaders.slice(0).forEach(function(o){o.cancel(d)})}}r.PDFNodeStream=C;class I{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null;const i=d.source;this._contentLength=i.length,this._loaded=0,this._filename=null,this._disableRange=i.disableRange||!1,this._rangeChunkSize=i.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!i.disableStream,this._isRangeSupported=!i.disableRange,this._readableStream=null,this._readCapability=(0,t.createPromiseCapability)(),this._headersCapability=(0,t.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const d=this._readableStream.read();return d===null?(this._readCapability=(0,t.createPromiseCapability)(),this.read()):(this._loaded+=d.length,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(d).buffer,done:!1})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",i=>{this._error(i)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new t.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class a{constructor(d){this._url=d.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,t.createPromiseCapability)();const i=d.source;this._isStreamingSupported=!i.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const d=this._readableStream.read();return d===null?(this._readCapability=(0,t.createPromiseCapability)(),this.read()):(this._loaded+=d.length,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(d).buffer,done:!1})}cancel(d){if(!this._readableStream){this._error(d);return}this._readableStream.destroy(d)}_error(d){this._storedError=d,this._readCapability.resolve()}_setReadableStream(d){this._readableStream=d,d.on("readable",()=>{this._readCapability.resolve()}),d.on("end",()=>{d.destroy(),this._done=!0,this._readCapability.resolve()}),d.on("error",i=>{this._error(i)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function g(k,d){return{protocol:k.protocol,auth:k.auth,host:k.hostname,port:k.port,path:k.path,method:"GET",headers:d}}class m extends I{constructor(d){super(d);const i=o=>{if(o.statusCode===404){const v=new t.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=v,this._headersCapability.reject(v);return}this._headersCapability.resolve(),this._setReadableStream(o);const f=v=>this._readableStream.headers[v.toLowerCase()],{allowRangeRequests:c,suggestedLength:l}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:f,isHttp:d.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=c,this._contentLength=l||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(f)};this._request=null,this._url.protocol==="http:"?this._request=D.request(g(this._url,d.httpHeaders),i):this._request=R.request(g(this._url,d.httpHeaders),i),this._request.on("error",o=>{this._storedError=o,this._headersCapability.reject(o)}),this._request.end()}}class E extends a{constructor(d,i,o){super(d),this._httpHeaders={};for(const c in d.httpHeaders){const l=d.httpHeaders[c];typeof l>"u"||(this._httpHeaders[c]=l)}this._httpHeaders.Range=`bytes=${i}-${o-1}`;const f=c=>{if(c.statusCode===404){const l=new t.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=l;return}this._setReadableStream(c)};this._request=null,this._url.protocol==="http:"?this._request=D.request(g(this._url,this._httpHeaders),f):this._request=R.request(g(this._url,this._httpHeaders),f),this._request.on("error",c=>{this._storedError=c}),this._request.end()}}class S extends I{constructor(d){super(d);let i=decodeURIComponent(this._url.path);T.test(this._url.href)&&(i=i.replace(/^\//,"")),w.lstat(i,(o,f)=>{if(o){o.code==="ENOENT"&&(o=new t.MissingPDFException(`Missing PDF "${i}".`)),this._storedError=o,this._headersCapability.reject(o);return}this._contentLength=f.size,this._setReadableStream(w.createReadStream(i)),this._headersCapability.resolve()})}}class x extends a{constructor(d,i,o){super(d);let f=decodeURIComponent(this._url.path);T.test(this._url.href)&&(f=f.replace(/^\//,"")),this._setReadableStream(w.createReadStream(f,{start:i,end:o-1}))}}},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.createResponseStatusError=R,r.extractFilenameFromHeader=D,r.validateRangeRequestCapabilities=w,r.validateResponseStatus=b;var t=y(2),A=y(24);function w({getResponseHeader:T,isHttp:h,rangeChunkSize:C,disableRange:I}){(0,t.assert)(C>0,"Range chunk size must be larger than zero");const a={allowRangeRequests:!1,suggestedLength:void 0},g=parseInt(T("Content-Length"),10);return!Number.isInteger(g)||(a.suggestedLength=g,g<=2*C)||I||!h||T("Accept-Ranges")!=="bytes"||(T("Content-Encoding")||"identity")!=="identity"||(a.allowRangeRequests=!0),a}function D(T){const h=T("Content-Disposition");if(h){let C=(0,A.getFilenameFromContentDispositionHeader)(h);if(C.includes("%"))try{C=decodeURIComponent(C)}catch{}if(/\.pdf$/i.test(C))return C}return null}function R(T,h){return T===404||T===0&&h.startsWith("file:")?new t.MissingPDFException('Missing PDF "'+h+'".'):new t.UnexpectedResponseException("Unexpected server response ("+T+') while retrieving PDF "'+h+'".',T)}function b(T){return T===200||T===206}},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.getFilenameFromContentDispositionHeader=t;function t(A){let w=!0,D=R("filename\\*","i").exec(A);if(D){D=D[1];let g=C(D);return g=unescape(g),g=I(g),g=a(g),T(g)}if(D=h(A),D){const g=a(D);return T(g)}if(D=R("filename","i").exec(A),D){D=D[1];let g=C(D);return g=a(g),T(g)}function R(g,m){return new RegExp("(?:^|;)\\s*"+g+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',m)}function b(g,m){if(g){if(!/^[\x00-\xFF]+$/.test(m))return m;try{const E=new TextDecoder(g,{fatal:!0}),S=Array.from(m,function(x){return x.charCodeAt(0)&255});m=E.decode(new Uint8Array(S)),w=!1}catch{if(/^utf-?8$/i.test(g))try{m=decodeURIComponent(escape(m)),w=!1}catch{}}}return m}function T(g){return w&&/[\x80-\xff]/.test(g)&&(g=b("utf-8",g),w&&(g=b("iso-8859-1",g))),g}function h(g){const m=[];let E;const S=R("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(E=S.exec(g))!==null;){let[,k,d,i]=E;if(k=parseInt(k,10),k in m){if(k===0)break;continue}m[k]=[d,i]}const x=[];for(let k=0;k<m.length&&k in m;++k){let[d,i]=m[k];i=C(i),d&&(i=unescape(i),k===0&&(i=I(i))),x.push(i)}return x.join("")}function C(g){if(g.startsWith('"')){const m=g.slice(1).split('\\"');for(let E=0;E<m.length;++E){const S=m[E].indexOf('"');S!==-1&&(m[E]=m[E].slice(0,S),m.length=E+1),m[E]=m[E].replace(/\\(.)/g,"$1")}g=m.join('"')}return g}function I(g){const m=g.indexOf("'");if(m===-1)return g;const E=g.slice(0,m),x=g.slice(m+1).replace(/^[^']*'/,"");return b(E,x)}function a(g){return!g.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(g)?g:g.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(m,E,S,x){if(S==="q"||S==="Q")return x=x.replace(/_/g," "),x=x.replace(/=([0-9a-fA-F]{2})/g,function(k,d){return String.fromCharCode(parseInt(d,16))}),b(E,x);try{x=atob(x)}catch{}return b(E,x)})}return""}},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.PDFNetworkStream=void 0;var t=y(2),A=y(23);const w=200,D=206;function R(I){const a=I.response;return typeof a!="string"?a:(0,t.stringToBytes)(a).buffer}class b{constructor(a,g){this.url=a,g=g||{},this.isHttp=/^https?:/i.test(a),this.httpHeaders=this.isHttp&&g.httpHeaders||{},this.withCredentials=g.withCredentials||!1,this.getXhr=g.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(a,g,m){const E={begin:a,end:g};for(const S in m)E[S]=m[S];return this.request(E)}requestFull(a){return this.request(a)}request(a){const g=this.getXhr(),m=this.currXhrId++,E=this.pendingRequests[m]={xhr:g};g.open("GET",this.url),g.withCredentials=this.withCredentials;for(const S in this.httpHeaders){const x=this.httpHeaders[S];typeof x>"u"||g.setRequestHeader(S,x)}return this.isHttp&&"begin"in a&&"end"in a?(g.setRequestHeader("Range",`bytes=${a.begin}-${a.end-1}`),E.expectedStatus=D):E.expectedStatus=w,g.responseType="arraybuffer",a.onError&&(g.onerror=function(S){a.onError(g.status)}),g.onreadystatechange=this.onStateChange.bind(this,m),g.onprogress=this.onProgress.bind(this,m),E.onHeadersReceived=a.onHeadersReceived,E.onDone=a.onDone,E.onError=a.onError,E.onProgress=a.onProgress,g.send(null),m}onProgress(a,g){const m=this.pendingRequests[a];m&&m.onProgress&&m.onProgress(g)}onStateChange(a,g){const m=this.pendingRequests[a];if(!m)return;const E=m.xhr;if(E.readyState>=2&&m.onHeadersReceived&&(m.onHeadersReceived(),delete m.onHeadersReceived),E.readyState!==4||!(a in this.pendingRequests))return;if(delete this.pendingRequests[a],E.status===0&&this.isHttp){m.onError&&m.onError(E.status);return}const S=E.status||w;if(!(S===w&&m.expectedStatus===D)&&S!==m.expectedStatus){m.onError&&m.onError(E.status);return}const k=R(E);if(S===D){const d=E.getResponseHeader("Content-Range"),i=/bytes (\d+)-(\d+)\/(\d+)/.exec(d);m.onDone({begin:parseInt(i[1],10),chunk:k})}else k?m.onDone({begin:0,chunk:k}):m.onError&&m.onError(E.status)}getRequestXhr(a){return this.pendingRequests[a].xhr}isPendingRequest(a){return a in this.pendingRequests}abortRequest(a){const g=this.pendingRequests[a].xhr;delete this.pendingRequests[a],g.abort()}}class T{constructor(a){this._source=a,this._manager=new b(a.url,{httpHeaders:a.httpHeaders,withCredentials:a.withCredentials}),this._rangeChunkSize=a.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(a){const g=this._rangeRequestReaders.indexOf(a);g>=0&&this._rangeRequestReaders.splice(g,1)}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new h(this._manager,this._source),this._fullRequestReader}getRangeReader(a,g){const m=new C(this._manager,a,g);return m.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(m),m}cancelAllRequests(a){this._fullRequestReader&&this._fullRequestReader.cancel(a),this._rangeRequestReaders.slice(0).forEach(function(m){m.cancel(a)})}}r.PDFNetworkStream=T;class h{constructor(a,g){this._manager=a;const m={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=g.url,this._fullRequestId=a.requestFull(m),this._headersReceivedCapability=(0,t.createPromiseCapability)(),this._disableRange=g.disableRange||!1,this._contentLength=g.length,this._rangeChunkSize=g.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const a=this._fullRequestId,g=this._manager.getRequestXhr(a),m=x=>g.getResponseHeader(x),{allowRangeRequests:E,suggestedLength:S}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});E&&(this._isRangeSupported=!0),this._contentLength=S||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(m),this._isRangeSupported&&this._manager.abortRequest(a),this._headersReceivedCapability.resolve()}_onDone(a){a&&(this._requests.length>0?this._requests.shift().resolve({value:a.chunk,done:!1}):this._cachedChunks.push(a.chunk)),this._done=!0,!(this._cachedChunks.length>0)&&(this._requests.forEach(function(g){g.resolve({value:void 0,done:!0})}),this._requests=[])}_onError(a){const g=this._url,m=(0,A.createResponseStatusError)(a,g);this._storedError=m,this._headersReceivedCapability.reject(m),this._requests.forEach(function(E){E.reject(m)}),this._requests=[],this._cachedChunks=[]}_onProgress(a){this.onProgress&&this.onProgress({loaded:a.loaded,total:a.lengthComputable?a.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const a=(0,t.createPromiseCapability)();return this._requests.push(a),a.promise}cancel(a){this._done=!0,this._headersReceivedCapability.reject(a),this._requests.forEach(function(g){g.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class C{constructor(a,g,m){this._manager=a;const E={onDone:this._onDone.bind(this),onProgress:this._onProgress.bind(this)};this._requestId=a.requestRange(g,m,E),this._requests=[],this._queuedChunk=null,this._done=!1,this.onProgress=null,this.onClosed=null}_close(){this.onClosed&&this.onClosed(this)}_onDone(a){const g=a.chunk;this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunk=g,this._done=!0,this._requests.forEach(function(m){m.resolve({value:void 0,done:!0})}),this._requests=[],this._close()}_onProgress(a){!this.isStreamingSupported&&this.onProgress&&this.onProgress({loaded:a.loaded})}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk!==null){const g=this._queuedChunk;return this._queuedChunk=null,{value:g,done:!1}}if(this._done)return{value:void 0,done:!0};const a=(0,t.createPromiseCapability)();return this._requests.push(a),a.promise}cancel(a){this._done=!0,this._requests.forEach(function(g){g.resolve({value:void 0,done:!0})}),this._requests=[],this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},function(Q,r,y){Object.defineProperty(r,"__esModule",{value:!0}),r.PDFFetchStream=void 0;var t=y(2),A=y(23);function w(h,C,I){return{method:"GET",headers:h,signal:I&&I.signal,mode:"cors",credentials:C?"include":"same-origin",redirect:"follow"}}function D(h){const C=new Headers;for(const I in h){const a=h[I];typeof a>"u"||C.append(I,a)}return C}class R{constructor(C){this.source=C,this.isHttp=/^https?:/i.test(C.url),this.httpHeaders=this.isHttp&&C.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?this._fullRequestReader._loaded:0}getFullReader(){return(0,t.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new b(this),this._fullRequestReader}getRangeReader(C,I){if(I<=this._progressiveDataLength)return null;const a=new T(this,C,I);return this._rangeRequestReaders.push(a),a}cancelAllRequests(C){this._fullRequestReader&&this._fullRequestReader.cancel(C),this._rangeRequestReaders.slice(0).forEach(function(a){a.cancel(C)})}}r.PDFFetchStream=R;class b{constructor(C){this._stream=C,this._reader=null,this._loaded=0,this._filename=null;const I=C.source;this._withCredentials=I.withCredentials||!1,this._contentLength=I.length,this._headersCapability=(0,t.createPromiseCapability)(),this._disableRange=I.disableRange||!1,this._rangeChunkSize=I.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),typeof AbortController<"u"&&(this._abortController=new AbortController),this._isStreamingSupported=!I.disableStream,this._isRangeSupported=!I.disableRange,this._headers=D(this._stream.httpHeaders);const a=I.url;fetch(a,w(this._headers,this._withCredentials,this._abortController)).then(g=>{if(!(0,A.validateResponseStatus)(g.status))throw(0,A.createResponseStatusError)(g.status,a);this._reader=g.body.getReader(),this._headersCapability.resolve();const m=x=>g.headers.get(x),{allowRangeRequests:E,suggestedLength:S}=(0,A.validateRangeRequestCapabilities)({getResponseHeader:m,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=E,this._contentLength=S||this._contentLength,this._filename=(0,A.extractFilenameFromHeader)(m),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new t.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:C,done:I}=await this._reader.read();return I?{value:C,done:I}:(this._loaded+=C.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(C).buffer,done:!1})}cancel(C){this._reader&&this._reader.cancel(C),this._abortController&&this._abortController.abort()}}class T{constructor(C,I,a){this._stream=C,this._reader=null,this._loaded=0;const g=C.source;this._withCredentials=g.withCredentials||!1,this._readCapability=(0,t.createPromiseCapability)(),this._isStreamingSupported=!g.disableStream,typeof AbortController<"u"&&(this._abortController=new AbortController),this._headers=D(this._stream.httpHeaders),this._headers.append("Range",`bytes=${I}-${a-1}`);const m=g.url;fetch(m,w(this._headers,this._withCredentials,this._abortController)).then(E=>{if(!(0,A.validateResponseStatus)(E.status))throw(0,A.createResponseStatusError)(E.status,m);this._readCapability.resolve(),this._reader=E.body.getReader()}).catch(E=>{if(!(E&&E.name==="AbortError"))throw E}),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:C,done:I}=await this._reader.read();return I?{value:C,done:I}:(this._loaded+=C.byteLength,this.onProgress&&this.onProgress({loaded:this._loaded}),{value:new Uint8Array(C).buffer,done:!1})}cancel(C){this._reader&&this._reader.cancel(C),this._abortController&&this._abortController.abort()}}}])})})(pdf$2);var pdfExports=pdf$2.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdf$1=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]);export{pdf$1 as p};
